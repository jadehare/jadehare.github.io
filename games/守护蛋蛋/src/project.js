window.__require=function e(n,t,a){function i(o,s){if(!t[o]){if(!n[o]){var r=o.split("/");if(r=r[r.length-1],!n[r]){var g="function"==typeof __require&&__require;if(!s&&g)return g(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+o+"'")}}var l=t[o]={exports:{}};n[o][0].call(l.exports,function(e){return i(n[o][1][e]||e)},l,l.exports,e,n,t,a)}return t[o].exports}for(var c="function"==typeof __require&&__require,o=0;o<a.length;o++)i(a[o]);return i}({Block:[function(e,n,t){"use strict";cc._RF.push(n,"7678faPbyJLrph1RxP8mctM","Block");var a=e("Common");cc.Class({extends:cc.Component,properties:{rankLabel:{default:null,type:cc.Label},userIcon:{default:null,type:cc.Sprite},userInfo:{default:null,type:cc.Node},userName:{default:null,type:cc.Label},score:{default:null,type:cc.Label}},start:function(){},init:function(e,n,t,i){var c=this;this.rankLabel.string=e,this.rankLabel.node.color="1"==e?new cc.Color(255,0,0,255):"2"==e?new cc.Color(255,102,0,255):"3"==e?new cc.Color(255,204,0,255):new cc.Color(255,255,255,255),this.userName.string=t,this.score.string=i,""==n||(cc.log("load pic",a.url+"/"+n),cc.loader.load("http://image.dialect-tv.com/"+n,function(e,n){e&&console.error(e),c.userIcon.spriteFrame=new cc.SpriteFrame(n)}))}}),cc._RF.pop()},{Common:"Common"}],CameraControl:[function(e,n,t){"use strict";cc._RF.push(n,"dbec0366fxO5JzATplgjsMA","CameraControl");var a=e("Common");cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node},forward_button:{type:cc.Node,default:null},backward_button:{type:cc.Node,default:null},wheel:{type:cc.Node,default:null},score_label:{default:null,type:cc.Label},canvas:{default:null,type:cc.Node},groundCover:{default:null,type:cc.Node},skyCover:{default:null,type:cc.Node},cloud_pres:{default:[],type:cc.Prefab},head:{default:null,type:cc.Node},bg:{default:null,type:cc.Node}},onLoad:function(){this.camera=this.node.getComponent(cc.Camera),this.setInputControl(),this.car_control=this.wheel.getComponent("Wheel")},start:function(){this.gameEnded=!1,this.moveforwarding=!1,this.movebackwarding=!1,this.cloudClock=0,this.cloudDuration=1,this.initCloud()},initCloud:function(){this.cloudPool=new cc.NodePool;for(var e=0;e<8;++e){var n=cc.instantiate(this.cloud_pres[Math.floor(2*Math.random())]);this.cloudPool.put(n)}for(var t=0;t<5;t++)this.spawnCloud(cc.v2(1440*(Math.random()-.5),400*Math.random()+200))},spawnCloud:function(e){var n=null;(n=this.cloudPool.size()>0?this.cloudPool.get():cc.instantiate(this.cloud_pres[Math.floor(2*Math.random())])).getComponent("Cloud").init(),n.setPosition(e),this.node.addChild(n)},setInputControl:function(){var e=this;this.forward_button.on(cc.Node.EventType.TOUCH_START,function(){e.car_control.onMoving=!0,e.movebackwarding=!1,e.moveforwarding=!0}),this.forward_button.on(cc.Node.EventType.TOUCH_END,function(){e.car_control.onMoving=!1,e.moveforwarding=!1}),this.backward_button.on(cc.Node.EventType.TOUCH_START,function(){e.car_control.onMoving=!0,e.moveforwarding=!1,e.movebackwarding=!0}),this.backward_button.on(cc.Node.EventType.TOUCH_END,function(){e.car_control.onMoving=!1,e.movebackwarding=!1})},gameEnd:function(){this.gameEnded=!0,cc.log(this.bg.x,this.bg.y)},lateUpdate:function(e){if(!this.gameEnded){var n=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO);this.node.position=this.node.parent.convertToNodeSpaceAR(n),a.score=Math.round(this.node.position.x/10),a.score<0&&(a.score=0);n.y,cc.winSize.height}},update:function(e){if(this.gameEnded)return this.groundCover.x=this.node.x,this.skyCover.x=this.node.x,void(this.bg.active&&(this.bg.x=this.node.x));this.score_label.string=a.score,this.moveforwarding&&this.car_control.moveForward(),this.movebackwarding&&this.car_control.moveBackward(),this.node.y<-600&&this.canvas.getComponent("Game").gameEnd(),this.groundCover.x=this.node.x,this.skyCover.x=this.node.x}}),cc._RF.pop()},{Common:"Common"}],Car:[function(e,n,t){"use strict";cc._RF.push(n,"08452yIT49PF7X5crAki4o1","Car"),cc.Class({extends:cc.Component,properties:{body:{type:cc.RigidBody,default:null},front_wheel:{type:cc.Node,default:null},back_wheel:{type:cc.Node,default:null}},start:function(){},moveForward:function(){},backForward:function(){},update:function(e){}}),cc._RF.pop()},{}],Cloud:[function(e,n,t){"use strict";cc._RF.push(n,"a5fb0a5kKJASaq7KDiOA8RF","Cloud"),cc.Class({extends:cc.Component,properties:{},start:function(){this.speed=10+20*Math.random()},init:function(){this.speed=10+20*Math.random()},update:function(e){this.node.x-=this.speed*e,this.node.x<-600&&(this.node.x=600,this.node.y=400*Math.random()+200,this.speed=10+20*Math.random())}}),cc._RF.pop()},{}],Common:[function(e,n,t){"use strict";cc._RF.push(n,"3d54ctinlxKnqjs8HXaAI/E","Common"),n.exports={score:0,SceneType:0,reborn:{},rebornTime:1,GameId:52,url:"",rank:[]},cc._RF.pop()},{}],Egg:[function(e,n,t){"use strict";cc._RF.push(n,"4032eQlbVpLrpHMtS4p4mtI","Egg"),cc.Class({extends:cc.Component,properties:{canvas:{default:null,type:cc.Node},head:{default:null,type:cc.Node},egg_c:{default:null,type:cc.Node},egg_c1:{default:null,type:cc.Node}},start:function(){this.head.active=!1,this.egg_c.active=!1,this.egg_c1.active=!1,this.physicsCollider=this.node.getComponent(cc.PhysicsPolygonCollider),this.gameControl=this.canvas.getComponent("Game")},onBeginContact:function(e,n,t){"default"==t.node.group?0==this.physicsCollider.restitution&&(this.physicsCollider.restitution=.5):"ground"==t.node.group&&(this.node.removeComponent(cc.PhysicsPolygonCollider),this.node.removeComponent(cc.RigidBody),this.node.removeComponent(cc.Sprite),this.head.active=!0,this.egg_c.active=!0,this.egg_c1.active=!0,this.gameControl.gameEnd())}}),cc._RF.pop()},{}],Game:[function(e,n,t){"use strict";cc._RF.push(n,"8bdd1Eby4RF8qT6e6St330R","Game"),cc.Class({extends:cc.Component,properties:{pixelStep:10,xOffset:0,yOffset:240,target:{default:null,type:cc.Node},ground:{default:null,type:cc.Node},Camera:{default:null,type:cc.Node},block_sprite:{default:null,type:cc.Sprite},gTexture_pres:{default:[],type:cc.Prefab},bgm_audio:{default:null,type:cc.AudioClip},end_audio:{default:null,type:cc.AudioClip}},onLoad:function(){for(cc.director.getPhysicsManager().enabled=!0,this.hills=[],this.initPool();this.xOffset<1200;)this.generateHill(0)},start:function(){this.currentBgm=cc.audioEngine.play(this.bgm_audio,!0,1)},initPool:function(){this.gTexturePool=new cc.NodePool;for(var e=0;e<8;++e){var n=cc.instantiate(this.gTexture_pres[Math.floor(Math.random()*this.gTexture_pres.length)]);this.gTexturePool.put(n)}},generateHillPiece:function(e,n){var t=this.hills,a=t[0];if(a&&this.target.x-a.node.x>1e3){a.node.x=e,a.collider.points=n,a.collider.apply();var i=t.shift();return this.drawQuadrilateral(n,i.g),i.node.height=n[1].y-100+n[2].y,i.gTexture.y=(Math.random()-.5)*(n[1].y-100+n[2].y)-100,void t.push(i)}var c=new cc.Node;c.x=e,c.y=-360,c.group="ground",c.addComponent(cc.Sprite).spriteFrame=this.block_sprite.spriteFrame,c.height=n[1].y-100+n[2].y,c.width=50,c.color=new cc.Color(204,153,51,255),c.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var o=c.addComponent(cc.PhysicsPolygonCollider);o.points=n,o.offset.x=-25,o.friction=1;var s=this.spawngTexture();s.setPosition(0,(Math.random()-.5)*(n[1].y-100+n[2].y)-100),c.addChild(s),c.parent=this.ground;var r=new cc.Node("graphic"),g=r.addComponent(cc.Graphics);r.width=50,r.x=-25,cc.log("add child"),c.addChild(r),this.drawQuadrilateral(n,g),t.push({node:c,collider:o,g:g,gTexture:s})},generateHill:function(e){var n=this.pixelStep,t=this.xOffset,a=this.yOffset,i=500+50*Math.ceil(26*Math.random()),c=i/n,o=void 0,s=void 0;for(s=0===t?0:Math.min(Math.random()*i/10,400-a),0==e&&(s=0),a+=s,o=0;o<c/2;o++){var r=[];r.push(cc.v2(0,0)),r.push(cc.v2(0,a-s*Math.cos(2*Math.PI/c*o))),r.push(cc.v2(n,a-s*Math.cos(2*Math.PI/c*(o+1)))),r.push(cc.v2(n,0)),this.generateHillPiece(t+o*n,r)}for(a+=s,a-=s=0===t?0:Math.min(Math.random()*i/10,a-240),o=c/2;o<c;o++){var g=[];g.push(cc.v2(0,0)),g.push(cc.v2(0,a-s*Math.cos(2*Math.PI/c*o))),g.push(cc.v2(n,a-s*Math.cos(2*Math.PI/c*(o+1)))),g.push(cc.v2(n,0)),this.generateHillPiece(t+o*n,g)}a-=s,this.xOffset+=i,this.yOffset=a},drawQuadrilateral:function(e,n){n.clear(),n.lineWidth=2;n.fillColor.fromHEX("#e4b455"),n.strokeColor.fromHEX("#e4b455"),n.moveTo(e[0].x,e[1].y-60),n.lineTo(e[1].x,e[1].y),n.lineTo(e[2].x,e[2].y),n.lineTo(e[3].x,e[2].y-60),n.close(),n.stroke(),n.fill()},gameEnd:function(){cc.audioEngine.stop(this.currentBgm),cc.audioEngine.play(this.end_audio,!1,1),this.Camera.getComponent("CameraControl").gameEnd(),this.Camera.getComponent(cc.Camera).zoomRatio=1,this.scheduleOnce(function(){cc.find("Canvas/bg").getComponent("endbg").init()},1)},spawngTexture:function(){return this.gTexturePool.size()>0?this.gTexturePool.get():cc.instantiate(this.gTexture_pres[Math.floor(Math.random()*this.gTexture_pres.length)])},update:function(e){if(this.target)for(;this.target.x+1200>this.xOffset;)this.generateHill()}}),cc._RF.pop()},{}],Rank:[function(e,n,t){"use strict";cc._RF.push(n,"a85ca6+unNLWaN7ujmWKgFm","Rank");var a=e("net"),i=e("Common");cc.Class({extends:cc.Component,properties:{block_pre:{default:null,type:cc.Prefab},content:{default:null,type:cc.Node},self:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},itemHeight:120},start:function(){10==i.SceneType?(this.loading.opacity=0,this.undateCount=0,this.updateDutation=.2,this.content.height=0,this.directionDown=!0,this.lastContentY=0,this.currentPage=1,this.showIndex=2,this.showLineNum=12,this.statusArray=[],this.blockArr=[],this.getStatus(this.currentPage),this.statusBeGet=!1,this.rankDied=!1,this.node.active=!1):this.node.destroy()},init:function(){this.lastContentY=this.content.y;var e=this.statusArray.length;e>12&&(e=12);for(var n=0;n<e;++n){var t=this.statusArray[n],a=t.rank,i=t.avatar,c=t.nickname,o=t.score,s=this.spawnBlock();this.content.addChild(s),s.setPosition(0,-this.itemHeight*(.5+n)),n%2==0&&(s.getChildByName("bg").opacity=0),s.getComponent("Block").init(a,i,c,o),this.blockArr.push(s)}},addRank:function(){this.rankDied||(cc.log("add rank"),this.getStatus(this.currentPage+1))},getStatus:function(e){var n=this,t=a.AREA,c=a.version,o=a.singletoken;cc.log(t,c);var s=i.GameId,r=hex_md5("YanQu"+("game_id="+s+"&page="+e+"&token="+o)+"!qaz@wsx$"),g=i.url+"/game/single_rank_all?token="+o+"&game_id="+s+"&page="+e+"&sign="+r;cc.log(g),axios.post(g,{},{headers:{AREA:t,"CLIENT-VERSION":c}}).then(function(t){cc.log(t);for(var a=t.data.data.rank_list,i=0;i<a.length;i++)n.statusArray.push(a[i]);n.currentPage=e,n.statusControl(t.data.data.current),n.content.height+=a.length*n.itemHeight,a.length<20&&(n.rankDied=!0),n.loading.opacity=0},this).catch(function(e){cc.log(e)})},statusControl:function(e){this.statusBeGet=!0,1==this.currentPage?(this.init(),this.initSelf(e)):this.refreshRank()},initSelf:function(e){cc.log("self data:",e);var n=e.rank,t=e.avatar,a=e.nickname,i=e.score,c=this.spawnBlock();c.getComponent("Block").init(n,t,a,i),this.self.addChild(c)},spawnBlock:function(){return cc.instantiate(this.block_pre)},scrollEvent:function(e,n){1==n&&(cc.log("scroll bottom"),this.refreshRank())},refreshRank:function(){for(var e=0;e<this.blockArr.length;e++){var n=this.blockArr[e],t=Math.abs(n.y),a=Math.round((t+60)/120)-1;if(a>this.statusArray.length-1||a<0)n.opacity=0;else{n.opacity=255;var i=this.statusArray[a],c=i.rank,o=i.avatar,s=i.nickname,r=i.score;n.getComponent("Block").init(c,o,s,r)}}},getCurrentLine:function(){Math.ceil((this.content.y+60)/900)>this.currentPage&&this.addRank();for(var e=0;e<this.blockArr.length;e++){if(this.content.y+this.blockArr[e].y>660){var n=this.blockArr[e];n.y-=1440;var t=Math.abs(n.y),a=Math.round((t+60)/120);if(a>this.statusArray.length||a<0){n.opacity=0;continue}n.opacity=255;var i=this.statusArray[a-1],c=i.rank,o=i.avatar,s=i.nickname,r=i.score;n.getComponent("Block").init(c,o,s,r)}if(this.content.y+this.blockArr[e].y<-660){var g=this.blockArr[e];g.y+=1440;var l=Math.abs(g.y),d=Math.round((l+60)/120);if(d>this.statusArray.length){g.opacity=0;continue}g.opacity=255;var h=this.statusArray[d-1],p=h.rank,u=h.avatar,b=h.nickname,m=h.score;g.getComponent("Block").init(p,u,b,m)}}},update:function(e){this.statusBeGet&&(this.undateCount+=e,this.undateCount<this.updateDutation||(this.undateCount=0,this.getCurrentLine()))}}),cc._RF.pop()},{Common:"Common",net:"net"}],Start:[function(e,n,t){"use strict";cc._RF.push(n,"afd9fxLy0dBZYJ9d6AAhfwt","Start");var a=e("Common"),i=e("net");cc.Class({extends:cc.Component,properties:{button:{default:null,type:cc.Node},rankButton:{default:null,type:cc.Node},illustrate:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},rank:{default:null,type:cc.Node}},onLoad:function(){},start:function(){var e=this;this.rankButton.active=!1,this.button.active=!1,this.illustrate.active=!1,this.netload=!1,this.preload=!1,this.chooseEnv(),this.getInfo(),cc.director.preloadScene("GameScene",function(){e.preload=!0,cc.log("preload success",e.preload,e.netload),e.netload&&(e.button.active=!0)})},chooseEnv:function(){if(void 0==i.type)if(void 0==i.token)void 0!==i.singletoken&&(this.rankButton.active=!0,1==i.env?a.url=i.url.appoffline:2==i.env?a.url=i.url.apppre:a.url=i.url.apponline,a.SceneType=10);else{if(1==i.env){var e=void 0;try{e=window.yanqu.getBrowerID()}catch(e){}a.url=i.url.appoffline,a.SceneType="yqbrower"==e?12:1}else a.SceneType=11,2==i.env?a.url=i.url.apppre:a.url=i.url.apponline;5==i.apptype&&(a.SceneType=15)}else 1==i.env?a.url=i.url.wxoffline:2==i.env?a.url=i.url.wxpre:a.url=i.url.wxonline,void 0!==i.singletoken&&(this.rankButton.active=!0,a.SceneType=10),3==i.type?a.SceneType=20:4==i.type?a.SceneType=21:5==i.type&&(a.SceneType=22);cc.log("scenetype:",a.SceneType)},getInfo:function(){var e,n=this,t="room_id="+i.room_id+"&token="+i.token,c=i.version,o=void 0;if(1==a.SceneType)o=hex_md5("YanQu"+t+"!qaz@wsx$"),c=1,i.AREA=1,this.transcend(o,c);else if(12==a.SceneType||15==a.SceneType||11==a.SceneType){var s=i.getSignString(t);o=s[0],c=s[1],i._version=c,this.transcend(o,c)}else if(20==a.SceneType||21==a.SceneType||22==a.SceneType)this.transcend();else if(10==a.SceneType)return this.netload=!0,void(this.preload&&(this.button.active=!0));e=a.url+"/live_game/revive?token="+i.token+"&room_id="+i.room_id+"&sign="+o,axios.post(e,{},{headers:{AREA:i.AREA,"CLIENT-VERSION":c}}).then(function(e){cc.log("start respose:",e);var t=e.data.data;a.reborn=t,n.netload=!0,n.preload&&(n.button.active=!0)}).catch(function(e){n.button.active=!0,cc.log(e)})},showIllustrate:function(){this.illustrate.active=!0},hideIllustrate:function(){this.illustrate.active=!1},loadScene:function(){cc.director.loadScene("GameScene")},transcend:function(e,n){cc.log(e,n);var t,c=i.token,o=i.room_id,s=e;void 0==e&&(s=hex_md5("YanQu"+("room_id="+o+"&token="+c)+"!qaz@wsx$"));var r=i.AREA,g=n;void 0==n&&(g=i.version),t=a.url+"/live/section_rank_score?token="+c+"&room_id="+o+"&sign="+s,axios.post(t,{},{headers:{AREA:r,"CLIENT-VERSION":g}}).then(function(e){cc.log("rank:",e),Object.keys(e.data.data.rank).forEach(function(n){a.rank.push(e.data.data.rank[n])}),cc.log(a.rank)},this).catch(function(e){})},showRank:function(){this.rank.active=!0},hideRank:function(){this.rank.active=!1},hideButton:function(){alert(JSON.stringify(i))},update:function(e){this.loading.rotation+=2}}),cc._RF.pop()},{Common:"Common",net:"net"}],WheelJudge:[function(e,n,t){"use strict";cc._RF.push(n,"cb801w6aIhK2ZRdQijLQIMz","WheelJudge"),cc.Class({extends:cc.Component,properties:{},start:function(){this.wheelControl=this.node.parent.getComponent("Wheel"),this.collideCount=0},onBeginContact:function(e,n,t){cc.log(t.node.group),"ground"==t.node.group&&(this.wheelControl.wheelOnGround=!0,this.collideCount+=1,cc.log("ground:",this.wheelControl.wheelOnGround))},onEndContact:function(e,n,t){"ground"==t.node.group&&(this.collideCount-=1,cc.log(this.collideCount))}}),cc._RF.pop()},{}],Wheel:[function(e,n,t){"use strict";cc._RF.push(n,"34e62nMmxhPDrP3TnQzaS7x","Wheel"),cc.Class({extends:cc.Component,properties:{egg:{default:null,type:cc.Node}},start:function(){this.wheel_rigidbody=this.node.getComponent(cc.RigidBody),this.egg_rigidbody=this.egg.getComponent(cc.RigidBody),this.wheelOnGround=!0,this.onMoving=!1},moveForward:function(){if(this.wheelOnGround){var e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);if(e=cc.v2(e.x-10,e.y),!(this.wheel_rigidbody.linearVelocity.mag()>1e3)){var n=cc.v2(150,0);this.wheel_rigidbody.applyLinearImpulse(n,e)}}},highJump:function(){var e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);e=cc.v2(e.x-10,e.y);var n=cc.v2(2e4,1e4);this.wheel_rigidbody.applyLinearImpulse(n,e),e=this.egg.convertToWorldSpaceAR(cc.Vec2.ZERO),e=cc.v2(e.x-10,e.y),this.egg_rigidbody.applyLinearImpulse(n,e)},moveBackward:function(){if(this.wheelOnGround){var e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);if(e=cc.v2(e.x-10,e.y),!(this.wheel_rigidbody.linearVelocity.mag()>1e3)){var n=cc.v2(-200,0);this.wheel_rigidbody.applyLinearImpulse(n,e)}}},brakingUpdate:function(){if(this.wheel_rigidbody.linearVelocity.x>0){var e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);e=cc.v2(e.x-10,e.y);var n=cc.v2(-80,0);this.wheel_rigidbody.applyLinearImpulse(n,e)}else if(this.wheel_rigidbody.linearVelocity.x<0){var t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);t=cc.v2(t.x-10,t.y);var a=cc.v2(80,0);this.wheel_rigidbody.applyLinearImpulse(a,t)}},update:function(e){this.onMoving||this.brakingUpdate()}}),cc._RF.pop()},{}],"ball-control":[function(e,n,t){"use strict";cc._RF.push(n,"77eb1Tow7NE56M4Z9x7Thcy","ball-control");cc.Class({extends:cc.Component,properties:{maxSpeed:1200},onLoad:function(){var e=cc.find("/Canvas");e.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),e.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.moveFlags=0},start:function(){this.body=this.getComponent(cc.RigidBody),this.tempSpeed=0},onTouchStart:function(e){e.touch.getLocation().x<cc.winSize.width/2?(this.tempSpeed=this.maxSpeed,this.moveFlags|=1):(this.tempSpeed=this.maxSpeed,this.moveFlags|=2)},onTouchEnd:function(e){e.touch.getLocation().x<cc.winSize.width/2?this.moveFlags&=-2:this.moveFlags&=-3},updateMotorSpeed:function(e){if(this.body){var n=0;1==(1&this.moveFlags)?n=-this.tempSpeed:2==(2&this.moveFlags)&&(n=this.tempSpeed),this.body.angularVelocity=n,this.tempSpeed-=100*e,cc.log(this.tempSpeed)}},update:function(e){this.updateMotorSpeed(e)}}),cc._RF.pop()},{}],chaoyue:[function(e,n,t){"use strict";cc._RF.push(n,"dac14T8vEdKfIF9sWiJLknA","chaoyue");var a=e("Common");cc.Class({extends:cc.Component,properties:{transcendPrefab:cc.Prefab,scoreLabel:{default:null,type:cc.Label}},onLoad:function(){if(cc.log("chao yue scenetype ",a.SceneType,a.rank),(11===a.SceneType||12===a.SceneType||20===a.SceneType||1==a.SceneType)&&0!=a.rank.length){this._ranking=a.rank.length,this.transcendFunc();var e=cc.instantiate(this.transcendPrefab);this.node.addChild(e),e.opacity=0,e.getComponent("transcend").init(a.rank[this._ranking-1].avatar,a.rank[this._ranking-1].rank)}},start:function(){},transcendFunc:function(){cc.log("\u6570\u636e",a.rank),this.schedule(this.detectionScore,3)},detectionScore:function(){for(var e=a.rank,n=this.scoreLabel.string,t=0;t<e.length;t++)if(Number(n)>Number(e[t].score)&&(cc.log(n,e[t].score,t),this._ranking>t)){var i=cc.instantiate(this.transcendPrefab);this.node.addChild(i),i.setPosition(cc.v2(0,0)),i.opacity=0,i.getComponent("transcend").init(a.rank[t].avatar,a.rank[t].rank);var c=cc.sequence(cc.fadeTo(.5,0),cc.fadeTo(0,255),cc.fadeTo(1,255),cc.spawn(cc.moveBy(1,cc.v2(0,80)),cc.fadeTo(1,0)));return i.runAction(c),this._ranking=t,void(0==this._ranking&&this.unscheduleAllCallbacks())}}}),cc._RF.pop()},{Common:"Common"}],endbg:[function(e,n,t){"use strict";cc._RF.push(n,"b0123F/GzdDoYtgcFawA/yh","endbg");var a=e("Common"),i=e("net");cc.Class({extends:cc.Component,properties:{Camera:cc.Node,hongbao:cc.Node,putong:cc.Node,weixing:cc.Node,weixinhelp:cc.Node,team:cc.Node,score:cc.Label},onLoad:function(){cc.log("net",i),this.weixinhelp.active=!1,this.node.active=!1,this.putong.active=!1,this.hongbao.active=!1,this.weixing.active=!1,this.team.active=!1},init:function(){this.node.zIndex=2,this.node.active=!0,this.node.x=this.Camera.x,this.node.y=this.Camera.y,10===a.SceneType?(this.weixing.active=!0,this.putongRank()):11===a.SceneType||12===a.SceneType||1===a.SceneType?(this.hongbao.active=!0,this.hongBao()):20===a.SceneType?(this.weixing.active=!0,this.wechat()):21===a.SceneType?(this.weixinhelp.active=!0,this.wechathelp()):22===a.SceneType||15===a.SceneType?(this.team.active=!0,this.teamend()):(this.putong.active=!0,this.score.string="\u672c\u6b21\u5f97\u5206\uff1a"+a.score)},start:function(){},putongRank:function(){var e=a.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=e;var n,t=i.singletoken,c=i.AREA,o="game_id="+a.GameId+"&score="+e+"&token="+t,s=hex_md5("YanQu"+o+"!qaz@wsx$"),r=i.version;n=a.url+"/game/single_push_data?token="+t+"&game_id="+a.GameId+"&score="+e+"&sign="+s,cc.log(n),axios.post(n,{},{headers:{AREA:c,"CLIENT-VERSION":r}}).then(function(e){cc.log(e);var n=e.data.code;if(cc.log("code:",n),400404==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==n){cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var t=e.data.data.rank,a=e.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(e){cc.log(e)})},hongBao:function(){var e=a.score;cc.find("Canvas/bg/hongbao/score").getComponent("cc.Label").string=e;var n,t=i.token,c=i.room_id,o=i.AREA,s="room_id="+c+"&score="+e+"&token="+t,r=void 0,g=void 0;try{var l=window.yanqu.getSignString(s);r=JSON.parse(l).sign.sign,g=JSON.parse(l).header.VERSION}catch(e){}1===a.SceneType&&(r=hex_md5("YanQu"+s+"!qaz@wsx$")),n=a.url+"/live_game/push_data?token="+t+"&score="+e+"&room_id="+c+"&sign="+r,axios.post(n,{},{headers:{AREA:o,"CLIENT-VERSION":g}}).then(function(e){cc.log("\u8fd4\u56de\u4fe1\u606f\uff1a",e);var n=e.data.code;if(400404==n)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==n)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==n)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==n){cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="";var t=e.data.data.rank_list,a=e.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(e){cc.log(e)})},wechat:function(){var e=a.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=e;var n,t=i.token,c=i.room_id,o=i.AREA,s=hex_md5("YanQu"+("room_id="+c+"&score="+e+"&token="+t)+"!qaz@wsx$"),r=i.version;n=a.url+"/live_game/push_data?token="+t+"&score="+e+"&room_id="+c+"&sign="+s,cc.log(n),axios.post(n,{},{headers:{AREA:o,"CLIENT-VERSION":r}}).then(function(e){cc.log(e);var n=e.data.code;if(cc.log("code:",n),400404==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==n){cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var t=e.data.data.rank_list,a=e.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(e){cc.log(e)})},wechathelp:function(){var e,n=i.token,t=i.room_id,c=i.AREA,o="help_score="+a.score+"&room_id="+t+"&token="+n+"&user_id="+i.helpuid,s=hex_md5("YanQu"+o+"!qaz@wsx$");e=a.url+"/live_game/push_data?token="+n+"&help_score="+a.score+"&room_id="+t+"&user_id="+i.helpuid+"&sign="+s;var r=i.version;cc.log(e,"PPPPP"),axios.post(e,{},{headers:{AREA:c,"CLIENT-VERSION":r}}).then(function(e){cc.log(e);var n=e.data.code;if(400404==n)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==n)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==n)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==n){cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="";var t=e.data.data.rank_list,i=e.data.data.current_rank,c=e.data.data.max_help_score;console.log("head",t),cc.find("Canvas/bg/help_weixin/score").getComponent(cc.Label).string=a.score,cc.find("Canvas/bg/help_weixin/help_score").getComponent(cc.Label).string="\u6700\u9ad8\u52a9\u529b\u6210\u7ee9 "+c+" \u5206",t[0]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,i===t[0].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,i===t[1].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,i===t[2].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==n){var o=e.data;cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string=""+o.message}}).catch(function(e){cc.log(e)})},teamend:function(){cc.log("team");var e,n=i.token,t=i.room_id,c=i.AREA,o="room_id="+t+"&score="+a.score+"&token="+n,s=hex_md5("YanQu"+o+"!qaz@wsx$");e=a.url+"/live_game/push_data?token="+n+"&score="+a.score+"&room_id="+t+"&sign="+s;var r=i.version;cc.log(e,"PPPPP"),axios.post(e,{},{headers:{AREA:c,"CLIENT-VERSION":r}}).then(function(e){cc.log(e);var n=e.data.code;if(400404==n)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==n)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==n)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==n){cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var t=e.data.data.rank_list,i=e.data.data.current_rank,c=e.data.data.max_score;console.log("head",t),cc.find("Canvas/bg/team/score").getComponent(cc.Label).string=a.score,cc.find("Canvas/bg/team/help_score").getComponent(cc.Label).string="\u6700\u9ad8\u4e2a\u4eba\u6210\u7ee9 "+c+" \u5206",t[0]&&(cc.find("Canvas/bg/team/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,i===t[0].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/team/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,i===t[1].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/team/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,i===t[2].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==n){var o=e.data;cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string=""+o.message}}).catch(function(e){cc.log(e)})},turn:function(){a.score=0,a.rebornTime=1,cc.director.loadScene("GameScene")},moregames:function(){wx.miniProgram.navigateTo({url:"/pages/empty/empty"})}}),cc._RF.pop()},{Common:"Common",net:"net"}],net:[function(e,n,t){"use strict";cc._RF.push(n,"62e73sDA6dOGolthqoGzpA1","net");var a=function(){var e=window.location.search,n=new Object;if(-1!=e.indexOf("?"))for(var t=e.substr(1),a=t.split("&"),i=0;i<a.length;i++)n[a[i].split("=")[0]]=a[i].split("=")[1];return n}(),i=a.token,c=a.room_id,o=a.AREA,s=a.env,r=a.type,g=a.version,l=a.helpuid,d=a.teamid,h=a.apptype,p=a.singletoken;var u={text:window.location,token:i,room_id:c,AREA:o,env:s,type:r,version:g,helpuid:l,teamid:d,apptype:h,singletoken:p,url:{wxoffline:"http://applet.dialect-tv.test",wxpre:"https://yfbapplet.dialect-tv.com",wxonline:"https://applet.dialect-tv.com",appoffline:"http://api.dialect-tv.test",apppre:"http://pre.api.dialect-tv.com",apponline:"http://api.dialect-tv.com"},getSignString:function(e){var n=[];try{var t=window.yanqu.getSignString(e),a=JSON.parse(t).sign.sign,i=JSON.parse(t).header.VERSION;n.push(a),n.push(i)}catch(e){}return n}};n.exports=u,cc._RF.pop()},{}],transcend:[function(e,n,t){"use strict";cc._RF.push(n,"1733epIf0tDcJUub+NHiTbT","transcend"),cc.Class({extends:cc.Component,properties:{num:cc.Label,img:cc.Sprite},start:function(){this.texture=null},init:function(e,n){var t=this;cc.log(e,n);var a="http://image.dialect-tv.com/"+e;cc.log("url: ",a),cc.loader.load(a,function(e,n){if(e)cc.log(e);else{t.texture=n;var a=new cc.SpriteFrame(n);t.img.spriteFrame=a}}),this.num.string="\u7b2c"+n+"\u540d",this.scheduleOnce(function(){this.onStop()},2)},onStop:function(){cc.loader.release(this.texture),this.texture=null,this.node.destroy()}}),cc._RF.pop()},{}]},{},["Block","Rank","Start","chaoyue","transcend","endbg","net","CameraControl","Car","Cloud","Common","Egg","Game","Wheel","WheelJudge","ball-control"]);