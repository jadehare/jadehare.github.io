window.__require=function n(t,e,c){function a(i,r){if(!e[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+i+"'")}}var h=e[i]={exports:{}};t[i][0].call(h.exports,function(n){return a(t[i][1][n]||n)},h,h.exports,n,t,e,c)}return e[i].exports}for(var o="function"==typeof __require&&__require,i=0;i<c.length;i++)a(c[i]);return a}({Background:[function(n,t,e){"use strict";cc._RF.push(t,"df52dEMqctILoZkkwxFsGE/","Background"),cc.Class({extends:cc.Component,properties:{},start:function(){this.color=[this.node.color.r,this.node.color.g,this.node.color.b],this.tempColor=this.color},init:function(n){this.r=n[0],this.g=n[1],this.b=n[2],this.color=[this.r,this.g,this.b],this.changingColor()},changeColor:function(n){this.tempColor=this.color,this.r=n[0],this.g=n[1],this.b=n[2]},changingColor:function(){var n=this;this.scheduleOnce(function(){n.r==n.color[0]||(n.color[0]+=(n.r-n.tempColor[0])/10,n.color[1]+=(n.g-n.tempColor[1])/10,n.color[2]+=(n.b-n.tempColor[2])/10),n.node.color=new cc.Color(n.color[0],n.color[1],n.color[2],255),n.changingColor()},.1)},update:function(n){}}),cc._RF.pop()},{}],Block:[function(n,t,e){"use strict";cc._RF.push(t,"7678faPbyJLrph1RxP8mctM","Block");var c=n("Common");cc.Class({extends:cc.Component,properties:{rankLabel:{default:null,type:cc.Label},userIcon:{default:null,type:cc.Sprite},userInfo:{default:null,type:cc.Node},userName:{default:null,type:cc.Label},score:{default:null,type:cc.Label}},start:function(){},init:function(n,t,e,a){var o=this;this.rankLabel.string=n,this.rankLabel.node.color="1"==n?new cc.Color(255,0,0,255):"2"==n?new cc.Color(255,102,0,255):"3"==n?new cc.Color(255,204,0,255):new cc.Color(255,255,255,255),this.userName.string=e,this.score.string=a,""==t||(cc.log("load pic",c.url+"/"+t),cc.loader.load("http://image.dialect-tv.com/"+t,function(n,t){n&&console.error(n),o.userIcon.spriteFrame=new cc.SpriteFrame(t)}))}}),cc._RF.pop()},{Common:"Common"}],Bricks:[function(n,t,e){"use strict";cc._RF.push(t,"97c31TjDJlORqR/Wokird4e","Bricks");n("Common");cc.Class({extends:cc.Component,properties:{brick_sprites:{default:[],type:cc.Sprite}},start:function(){},init:function(n){this.r=n[0],this.g=n[1],this.b=n[2],this.color=[this.r,this.g,this.b],this.changingColor()},changeColor:function(n){this.tempColor=this.color,this.r=n[0],this.g=n[1],this.b=n[2]},changingColor:function(){var n=this;this.scheduleOnce(function(){n.r==n.color[0]||(n.color[0]+=(n.r-n.tempColor[0])/3,n.color[1]+=(n.g-n.tempColor[1])/3,n.color[2]+=(n.b-n.tempColor[2])/3);for(var t=n.node.children,e=0;e<t.length;e++){var c=t[e];"brick"==c.name?c.getComponent("Brick").changeColor(new cc.Color(n.color[0],n.color[1],n.color[2],255)):c.getChildByName("brick").getComponent("Brick").changeColor(new cc.Color(n.color[0],n.color[1],n.color[2],255))}n.changingColor()},.1)},update:function(n){}}),cc._RF.pop()},{Common:"Common"}],Brick:[function(n,t,e){"use strict";cc._RF.push(t,"e3548lDjMxPdYcHvzLkEn3p","Brick");n("Common");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},changeColor:function(n){this.node.color=n},update:function(n){}}),cc._RF.pop()},{Common:"Common"}],Camera:[function(n,t,e){"use strict";cc._RF.push(t,"5b91abijsVAULRIBYY8vB4/","Camera"),cc.Class({extends:cc.Component,properties:{canvas:{default:null,type:cc.Node}},start:function(){this.gameControl=this.canvas.getComponent("Game"),this.setInputControl()},setInputControl:function(){var n=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){n.gameControl.gameEnded||(t.touch._point.x>n.node.width/2?n.gameControl.jump(!0):n.gameControl.jump(!1))})}}),cc._RF.pop()},{}],Common:[function(n,t,e){"use strict";cc._RF.push(t,"3785eUoHqtJQ6WOxTsM+yyY","Common");t.exports={score:0,color:[255,255,255,255],SceneType:0,reborn:{},rebornTime:1,GameId:42,url:"",rank:[]},cc._RF.pop()},{}],Game:[function(n,t,e){"use strict";cc._RF.push(t,"aabae80T+ZHqqg8fyMggIYb","Game");var c=n("Common");cc.Class({extends:cc.Component,properties:{player:{default:null,type:cc.Node},player_shadow:{default:null,type:cc.Node},blocks_father:{default:null,type:cc.Node},bg_color:{default:null,type:cc.Node},Camera:{default:null,type:cc.Node},score:{default:null,type:cc.Node},blocks_pre:{default:[],type:cc.Prefab},stack_pre:{default:[],type:cc.Prefab},particle:{default:null,type:cc.Prefab},star_pre:{default:null,type:cc.Prefab},scoreLabel:{default:null,type:cc.Label},bgm_audio:{default:null,type:cc.AudioClip},drop_audio:{default:null,type:cc.AudioClip}},onLoad:function(){var n=cc.director.getCollisionManager();n.enabled=!0,n.enabledDebugDraw=!0},start:function(){this.blockPool=new cc.NodePool;for(var n=0;n<10;++n){var t=cc.instantiate(this.blocks_pre[0]);this.blockPool.put(t)}this.starPool=new cc.NodePool;for(var e=0;e<10;++e){var c=cc.instantiate(this.star_pre);this.starPool.put(c)}this.colorArr=[[231,118,139,255],[244,148,144,255],[240,160,75,255],[222,253,124,255],[141,248,207,255],[112,190,245,255],[150,165,246,255],[200,128,208,255]],this.bgColorArr=[[173,61,92,255],[150,54,64,255],[185,85,60,255],[0,102,51,255],[81,133,101,255],[78,98,161,255],[66,106,162,255],[92,53,154,255]],this.bgColorControl=this.bg_color.getComponent("Background"),this.bricksControl=this.blocks_father.getComponent("Bricks"),this.blockRight=!0,this.gameEnded=!1,this.nextDirectionControl=-1,this.dropDuration=.8,this.currentIndex=0,this.currentDestroy=0,this.init()},init:function(){var n=this;this.currentBgm=cc.audioEngine.play(this.bgm_audio,!0,1),this.blockArr=[],this.stackArr=[],this.initColor();for(var t=0;t<10;t++)this.getAllBlocks();this.blocksInit(),this.blockArr[1].rightSide?this.player.scaleX=1:this.player.scaleX=-1,this.playerMove(this.currentIndex),this.cameraMove(this.currentIndex),this.colorControl(),this.schedule(function(){n.spawnStar()},5*Math.random()+1)},initColor:function(){this.colorIndex=Math.floor(Math.random()*this.colorArr.length),this.bricksControl.init(this.colorArr[this.colorIndex]),this.bgColorControl.init(this.bgColorArr[this.colorIndex])},colorControl:function(){var n=this;this.scheduleOnce(function(){n.colorIndex=Math.floor(Math.random()*n.colorArr.length),n.bricksControl.changeColor(n.colorArr[n.colorIndex]),n.bgColorControl.changeColor(n.bgColorArr[n.colorIndex]),n.colorControl()},20)},move:function(){var n=++this.currentIndex;this.playerMove(n),this.cameraMove(n),this.blocksControl(),this.currentIndex-this.currentDestroy>5&&(this.currentDestroy=this.currentIndex-6,this.blocksDestroy())},playerMove:function(n){var t=this.blockArr[n].position.x,e=this.blockArr[n].position.y+50,c=cc.jumpTo(.2,cc.v2(t,e+50),50,1);this.player.stopAllActions(),this.player.runAction(c);var a=cc.sequence(cc.scaleTo(.1,0,0),cc.scaleTo(.1,1,1));this.player_shadow.runAction(a)},cameraMove:function(n){var t=this.blockArr[n].position.x,e=this.blockArr[n].position.y,c=cc.moveTo(.2,cc.v2(t,e+50));this.Camera.stopAllActions(),this.Camera.runAction(c);var a=cc.moveTo(.2,cc.v2(t,e+50+this.node.height/2-80));this.score.stopAllActions(),this.score.runAction(a)},blocksInit:function(){for(var n=0;n<6;n++){var t=this.blockArr[n];this.blocks_father.addChild(t)}for(var e=0;e<5;e++)if(void 0==this.stackArr[e]);else for(var c=this.stackArr[e],a=0;a<c.length;a++)void 0!=c[a]&&this.blocks_father.addChild(c[a])},blocksControl:function(){var n=this.blockArr[this.currentIndex+5],t=n.position;if(1==this.currentIndex&&(this.destroyControl(),this.difficultControl(),cc.log("diffcult on")),n.y=this.Camera.y+640,n.color=new cc.Color(this.colorArr[this.colorIndex][0],this.colorArr[this.colorIndex][1],this.colorArr[this.colorIndex][2],255),this.blocks_father.addChild(n),n.runAction(cc.moveTo(.1,t)),void 0==this.stackArr[this.currentIndex+4]);else for(var e=this.stackArr[this.currentIndex+4],c=0;c<e.length;c++)if(void 0!=e[c]){var a=e[c],o=a.position;a.y=this.Camera.y+640,"stack"==a.name?a.getChildByName("brick").color=new cc.Color(this.colorArr[this.colorIndex][0],this.colorArr[this.colorIndex][1],this.colorArr[this.colorIndex][2],255):a.color=new cc.Color(this.colorArr[this.colorIndex][0],this.colorArr[this.colorIndex][1],this.colorArr[this.colorIndex][2],255),this.blocks_father.addChild(a),a.runAction(cc.moveTo(.1,o))}cc.log("get blocks "),this.getAllBlocks()},difficultControl:function(){var n=this;this.scheduleOnce(function(){n.dropDuration-=.02,n.dropDuration<=.1||n.difficultControl()},4)},destroyControl:function(){var n=this;this.scheduleOnce(function(){n.gameEnded||(n.blocksDestroy(),n.destroyControl())},this.dropDuration)},blocksDestroy:function(){var n=this;this.currentDestroy==this.currentIndex&&(this.gameEnded=!0,this.player.runAction(cc.moveBy(.2,cc.v2(0,-50))),this.unscheduleAllCallbacks(),this.scheduleOnce(function(){cc.find("Canvas/bg").getComponent("endbg").init()},1));var t=this.blockArr[this.currentDestroy],e=cc.sequence(cc.moveBy(.2,cc.v2(0,-640)),cc.callFunc(function(){n.blockPool.put(t)}));if(t.runAction(e),this.blockArr[this.currentDestroy]=null,void 0==this.stackArr[this.currentDestroy]);else{for(var c=this.stackArr[this.currentDestroy],a=0;a<c.length;a++)void 0!=c[a]&&function(){var n=c[a],t=cc.sequence(cc.moveBy(.2,cc.v2(0,-640)),cc.callFunc(function(){n.destroy()}));n.runAction(t)}();this.stackArr[this.currentDestroy]=null}this.currentDestroy+=1},getAllBlocks:function(){this.getBlocks()},getBlocks:function(){var n=0,t=0,e=0,c=0;this.nextDirectionControl<0?Math.random()<.5&&(this.blockRight=!this.blockRight):this.nextDirectionControl=-1,Math.random()<.2&&this.getStacks(this.blockRight),0==this.blockArr.length||(e=this.blockArr[this.blockArr.length-1].x,c=this.blockArr[this.blockArr.length-1].y,n=this.blockRight?e+90:e-90,t=c+this.blockArr[this.blockArr.length-1].height/2+24);var a=this.spawnBlock(cc.v2(n,t),1e3-this.blockArr.length);this.blockArr.push(a)},getStacks:function(n){var t=this.blockArr.length-1;if(!(t<0)){var e=n,c=0,a=0,o=0,i=0;if(Math.random()>.5&&(i=1),1==i){if(void 0==this.stackArr[t]){o=this.blockArr[t].x,a=this.blockArr[t].y+this.blockArr[t].height/2+24;var r=Math.floor(4*Math.random());c=3==r?e?o-90*(2*Math.floor(2*Math.random())+3):o+90*(2*Math.floor(2*Math.random())+3):e?o-90*(2*Math.floor(3*Math.random())+1):o+90*(2*Math.floor(3*Math.random())+1),this.stackArr[t]=[];var s=this.spawnStack(cc.v2(c,a),r);s.zIndex=1e3-t,this.stackArr[t].push(s)}}else{if(void 0==this.stackArr[t]){for(var l=[],h=0;h<4;h++)if(0==h?(o=this.blockArr[t].x,a=this.blockArr[t].y+this.blockArr[t].height/2+24):(o=l[h-1].x,a=l[h-1].y+l[h-1].height/2+24),c=e?o-90:o+90,0==h){var g=this.spawnStack(cc.v2(c,a),4);g.zIndex=1e3-t,l.push(g)}else l.push(this.spawnBlock(cc.v2(c,a),1e3-t-1));for(var d=0;d<l.length;d++)void 0==this.stackArr[t+d]&&(this.stackArr[t+d]=[]),this.stackArr[t+d].push(l[d])}this.rightSide?this.nextDirectionControl=0:this.nextDirectionControl=1}}},getStack:function(n,t){return this.spawnStack(n,t)},spawnBlock:function(n,t){var e=null;return(e=this.blockPool.size()>0?this.blockPool.get():cc.instantiate(this.blocks_pre[0])).removeAllChildren(),e.width=180,e.height=152,e.setPosition(n),e.rightSide=this.blockRight,e.zIndex=t,e},spawnStack:function(n,t){var e=cc.instantiate(this.stack_pre[t]);e.width=180,e.height=152,e.setPosition(cc.v2(0,0));var c=this.spawnBlock(cc.v2(0,0)),a=new cc.Node("stack");return a.width=180,a.height=152,c.zIndex=1,e.zIndex=2,a.addChild(c),a.addChild(e),a.setPosition(n),a},spawnStar:function(){var n=this,t=null;t=this.starPool.size()>0?this.starPool.get():cc.instantiate(this.star_pre);var e=this.node.width,c=this.node.height,a=30*Math.random(),o=Math.random(),i=2*Math.random(),r=2*Math.random(),s=cc.repeatForever(cc.sequence(cc.scaleTo(i,o),cc.scaleTo(i,0),cc.scaleTo(r,0)));t.runAction(s),this.scheduleOnce(function(){n.starPool.put(t)},a),t.setPosition(cc.v2((Math.random()-.5)*e,(Math.random()-.5)*c)),this.Camera.addChild(t)},spawnParticle:function(){var n=cc.instantiate(this.particle);n.setPosition(this.player.x,this.player.y),this.node.addChild(n)},dieJump:function(n){var t=this;this.player.stopAllActions();var e=120;n||(e=-120),this.player.runAction(cc.jumpBy(.2,cc.v2(e,0),50,1)),this.scheduleOnce(function(){t.blocks_father.zIndex=2,t.player.zIndex=1},.1)},dieCollide:function(n){var t=this;this.player.stopAllActions();var e=50;n||(e=-50),this.cameraShake();var c=cc.jumpBy(.2,cc.v2(e,50),50,1);this.player_shadow.runAction(cc.scaleTo(.2,0)),this.scheduleOnce(function(){t.player.stopAllActions(),t.spawnParticle(),t.player.destroy()},.1),this.player.runAction(c)},jump:function(n){var t=this.currentIndex+1,e=this.blockArr[t].rightSide;if(this.player.scaleX=n?1:-1,n==e)c.score+=1,this.scoreLabel.string=c.score,this.move();else{if(cc.audioEngine.stop(this.currentBgm),cc.audioEngine.play(this.drop_audio,!1,1),this.gameEnded=!0,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){cc.find("Canvas/bg").getComponent("endbg").init()},1),void 0==this.stackArr[this.currentIndex]);else for(var a=0;a<this.stackArr[this.currentIndex].length;a++)if(90==Math.abs(this.stackArr[this.currentIndex][a].x-this.blockArr[this.currentIndex].x))return void this.dieCollide(n);this.dieJump(n)}},cameraShake:function(){var n=this.Camera.x,t=this.Camera.y;this.Camera.stopAllActions();var e=cc.sequence(cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveBy(.02,cc.v2(2*(Math.random()-.5)*10,2*(Math.random()-.5)*10)),cc.moveTo(0,cc.v2(n,t)));this.Camera.runAction(e)}}),cc._RF.pop()},{Common:"Common"}],Rank:[function(n,t,e){"use strict";cc._RF.push(t,"a85ca6+unNLWaN7ujmWKgFm","Rank");var c=n("net"),a=n("Common");cc.Class({extends:cc.Component,properties:{block_pre:{default:null,type:cc.Prefab},content:{default:null,type:cc.Node},self:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},itemHeight:120},start:function(){10==a.SceneType?(this.loading.opacity=0,this.undateCount=0,this.updateDutation=.2,this.content.height=0,this.directionDown=!0,this.lastContentY=0,this.currentPage=1,this.showIndex=2,this.showLineNum=12,this.statusArray=[],this.blockArr=[],this.getStatus(this.currentPage),this.statusBeGet=!1,this.rankDied=!1,this.node.active=!1):this.node.destroy()},init:function(){this.lastContentY=this.content.y;var n=this.statusArray.length;n>12&&(n=12);for(var t=0;t<n;++t){var e=this.statusArray[t],c=e.rank,a=e.avatar,o=e.nickname,i=e.score,r=this.spawnBlock();this.content.addChild(r),r.setPosition(0,-this.itemHeight*(.5+t)),t%2==0&&(r.getChildByName("bg").opacity=0),r.getComponent("Block").init(c,a,o,i),this.blockArr.push(r)}},addRank:function(){this.rankDied||(cc.log("add rank"),this.getStatus(this.currentPage+1))},getStatus:function(n){var t=this,e=c.AREA,o=c.version,i=c.singletoken;cc.log(e,o);var r=a.GameId,s=hex_md5("YanQu"+("game_id="+r+"&page="+n+"&token="+i)+"!qaz@wsx$"),l=a.url+"/game/single_rank_all?token="+i+"&game_id="+r+"&page="+n+"&sign="+s;cc.log(l),axios.post(l,{},{headers:{AREA:e,"CLIENT-VERSION":o}}).then(function(e){cc.log(e);for(var c=e.data.data.rank_list,a=0;a<c.length;a++)t.statusArray.push(c[a]);t.currentPage=n,t.statusControl(e.data.data.current),t.content.height+=c.length*t.itemHeight,c.length<20&&(t.rankDied=!0),t.loading.opacity=0},this).catch(function(n){cc.log(n)})},statusControl:function(n){this.statusBeGet=!0,1==this.currentPage?(this.init(),this.initSelf(n)):this.refreshRank()},initSelf:function(n){cc.log("self data:",n);var t=n.rank,e=n.avatar,c=n.nickname,a=n.score,o=this.spawnBlock();o.getComponent("Block").init(t,e,c,a),this.self.addChild(o)},spawnBlock:function(){return cc.instantiate(this.block_pre)},scrollEvent:function(n,t){1==t&&(cc.log("scroll bottom"),this.refreshRank())},refreshRank:function(){for(var n=0;n<this.blockArr.length;n++){var t=this.blockArr[n],e=Math.abs(t.y),c=Math.round((e+60)/120)-1;if(c>this.statusArray.length-1||c<0)t.opacity=0;else{t.opacity=255;var a=this.statusArray[c],o=a.rank,i=a.avatar,r=a.nickname,s=a.score;t.getComponent("Block").init(o,i,r,s)}}},getCurrentLine:function(){Math.ceil((this.content.y+60)/900)>this.currentPage&&this.addRank();for(var n=0;n<this.blockArr.length;n++){if(this.content.y+this.blockArr[n].y>660){var t=this.blockArr[n];t.y-=1440;var e=Math.abs(t.y),c=Math.round((e+60)/120);if(c>this.statusArray.length||c<0){t.opacity=0;continue}t.opacity=255;var a=this.statusArray[c-1],o=a.rank,i=a.avatar,r=a.nickname,s=a.score;t.getComponent("Block").init(o,i,r,s)}if(this.content.y+this.blockArr[n].y<-660){var l=this.blockArr[n];l.y+=1440;var h=Math.abs(l.y),g=Math.round((h+60)/120);if(g>this.statusArray.length){l.opacity=0;continue}l.opacity=255;var d=this.statusArray[g-1],p=d.rank,u=d.avatar,b=d.nickname,m=d.score;l.getComponent("Block").init(p,u,b,m)}}},update:function(n){this.statusBeGet&&(this.undateCount+=n,this.undateCount<this.updateDutation||(this.undateCount=0,this.getCurrentLine()))}}),cc._RF.pop()},{Common:"Common",net:"net"}],Start:[function(n,t,e){"use strict";cc._RF.push(t,"afd9fxLy0dBZYJ9d6AAhfwt","Start");var c=n("Common"),a=n("net");cc.Class({extends:cc.Component,properties:{button:{default:null,type:cc.Node},rankButton:{default:null,type:cc.Node},illustrate:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},rank:{default:null,type:cc.Node}},onLoad:function(){},start:function(){var n=this;this.rankButton.active=!1,this.button.active=!1,this.illustrate.active=!1,this.netload=!1,this.preload=!1,this.chooseEnv(),this.getInfo(),cc.director.preloadScene("GameScene",function(){n.preload=!0,cc.log("preload success",n.preload,n.netload),n.netload&&(n.button.active=!0)})},chooseEnv:function(){if(void 0==a.type)if(void 0==a.token)void 0!==a.singletoken&&(this.rankButton.active=!0,1==a.env?c.url=a.url.appoffline:2==a.env?c.url=a.url.apppre:c.url=a.url.apponline,c.SceneType=10);else{if(1==a.env){var n=void 0;try{n=window.yanqu.getBrowerID()}catch(n){}c.url=a.url.appoffline,c.SceneType="yqbrower"==n?12:1}else c.SceneType=11,2==a.env?c.url=a.url.apppre:c.url=a.url.apponline;5==a.apptype&&(c.SceneType=15)}else 1==a.env?c.url=a.url.wxoffline:2==a.env?c.url=a.url.wxpre:c.url=a.url.wxonline,void 0!==a.singletoken&&(this.rankButton.active=!0,c.SceneType=10),3==a.type?c.SceneType=20:4==a.type?c.SceneType=21:5==a.type&&(c.SceneType=22);cc.log("scenetype:",c.SceneType)},getInfo:function(){var n,t=this,e="room_id="+a.room_id+"&token="+a.token,o=a.version,i=void 0;if(1==c.SceneType)i=hex_md5("YanQu"+e+"!qaz@wsx$"),o=1,a.AREA=1,this.transcend(i,o);else if(12==c.SceneType||15==c.SceneType||11==c.SceneType){var r=a.getSignString(e);i=r[0],o=r[1],a._version=o,this.transcend(i,o)}else if(20==c.SceneType||21==c.SceneType||22==c.SceneType)this.transcend();else if(10==c.SceneType)return this.netload=!0,void(this.preload&&(this.button.active=!0));n=c.url+"/live_game/revive?token="+a.token+"&room_id="+a.room_id+"&sign="+i,axios.post(n,{},{headers:{AREA:a.AREA,"CLIENT-VERSION":o}}).then(function(n){cc.log("start respose:",n);var e=n.data.data;c.reborn=e,t.netload=!0,t.preload&&(t.button.active=!0)}).catch(function(n){t.button.active=!0,cc.log(n)})},showIllustrate:function(){this.illustrate.active=!0},hideIllustrate:function(){this.illustrate.active=!1},loadScene:function(){cc.director.loadScene("GameScene")},transcend:function(n,t){cc.log(n,t);var e,o=a.token,i=a.room_id,r=n;void 0==n&&(r=hex_md5("YanQu"+("room_id="+i+"&token="+o)+"!qaz@wsx$"));var s=a.AREA,l=t;void 0==t&&(l=a.version),e=c.url+"/live/section_rank_score?token="+o+"&room_id="+i+"&sign="+r,axios.post(e,{},{headers:{AREA:s,"CLIENT-VERSION":l}}).then(function(n){cc.log("rank:",n),Object.keys(n.data.data.rank).forEach(function(t){c.rank.push(n.data.data.rank[t])}),cc.log(c.rank)},this).catch(function(n){})},showRank:function(){this.rank.active=!0},hideRank:function(){this.rank.active=!1},hideButton:function(){alert(JSON.stringify(a))},update:function(n){this.loading.rotation+=2}}),cc._RF.pop()},{Common:"Common",net:"net"}],chaoyue:[function(n,t,e){"use strict";cc._RF.push(t,"dac14T8vEdKfIF9sWiJLknA","chaoyue");var c=n("Common");cc.Class({extends:cc.Component,properties:{transcendPrefab:cc.Prefab,scoreLabel:{default:null,type:cc.Label}},onLoad:function(){if(cc.log("chao yue scenetype ",c.SceneType,c.rank),(11===c.SceneType||12===c.SceneType||20===c.SceneType||1==c.SceneType)&&0!=c.rank.length){this._ranking=c.rank.length,this.transcendFunc();var n=cc.instantiate(this.transcendPrefab);this.node.addChild(n),n.opacity=0,n.getComponent("transcend").init(c.rank[this._ranking-1].avatar,c.rank[this._ranking-1].rank)}},start:function(){},transcendFunc:function(){cc.log("\u6570\u636e",c.rank),this.schedule(this.detectionScore,3)},detectionScore:function(){for(var n=c.rank,t=this.scoreLabel.string,e=0;e<n.length;e++)if(Number(t)>Number(n[e].score)&&(cc.log(t,n[e].score,e),this._ranking>e)){var a=cc.instantiate(this.transcendPrefab);this.node.addChild(a),a.setPosition(cc.v2(0,0)),a.opacity=0,a.getComponent("transcend").init(c.rank[e].avatar,c.rank[e].rank);var o=cc.sequence(cc.fadeTo(.5,0),cc.fadeTo(0,255),cc.fadeTo(1,255),cc.spawn(cc.moveBy(1,cc.v2(0,80)),cc.fadeTo(1,0)));return a.runAction(o),this._ranking=e,void(0==this._ranking&&this.unscheduleAllCallbacks())}}}),cc._RF.pop()},{Common:"Common"}],endbg:[function(n,t,e){"use strict";cc._RF.push(t,"b0123F/GzdDoYtgcFawA/yh","endbg");var c=n("Common"),a=n("net");cc.Class({extends:cc.Component,properties:{Camera:cc.Node,hongbao:cc.Node,putong:cc.Node,weixing:cc.Node,weixinhelp:cc.Node,team:cc.Node,score:cc.Label},onLoad:function(){cc.log("net",a),this.weixinhelp.active=!1,this.node.active=!1,this.putong.active=!1,this.hongbao.active=!1,this.weixing.active=!1,this.team.active=!1},init:function(){this.node.zIndex=2,this.node.active=!0,this.node.x=this.Camera.x,this.node.y=this.Camera.y,10===c.SceneType?(this.weixing.active=!0,this.putongRank()):11===c.SceneType||12===c.SceneType||1===c.SceneType?(this.hongbao.active=!0,this.hongBao()):20===c.SceneType?(this.weixing.active=!0,this.wechat()):21===c.SceneType?(this.weixinhelp.active=!0,this.wechathelp()):22===c.SceneType||15===c.SceneType?(this.team.active=!0,this.teamend()):(this.putong.active=!0,this.score.string="\u672c\u6b21\u5f97\u5206\uff1a"+c.score)},start:function(){},putongRank:function(){var n=c.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=n;var t,e=a.singletoken,o=a.AREA,i="game_id="+c.GameId+"&score="+n+"&token="+e,r=hex_md5("YanQu"+i+"!qaz@wsx$"),s=a.version;t=c.url+"/game/single_push_data?token="+e+"&game_id="+c.GameId+"&score="+n+"&sign="+r,cc.log(t),axios.post(t,{},{headers:{AREA:o,"CLIENT-VERSION":s}}).then(function(n){cc.log(n);var t=n.data.code;if(cc.log("code:",t),400404==t)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==t)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==t)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==t){10==c.SceneType?cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="":cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var e=n.data.data.rank,a=n.data.data.current_rank;cc.log("head",e),e[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=e[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=e[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=e[0].score,a===e[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),e[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=e[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=e[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=e[1].score,a===e[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),e[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=e[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=e[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=e[2].score,a===e[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(n){cc.log(n)})},hongBao:function(){var n=c.score;cc.find("Canvas/bg/hongbao/score").getComponent("cc.Label").string=n;var t,e=a.token,o=a.room_id,i=a.AREA,r=(a.env,"room_id="+o+"&score="+n+"&token="+e),s=void 0,l=void 0;try{var h=window.yanqu.getSignString(r);s=JSON.parse(h).sign.sign,l=JSON.parse(h).header.VERSION}catch(n){}1===c.SceneType&&(s=hex_md5("YanQu"+r+"!qaz@wsx$")),t=c.url+"/live_game/push_data?token="+e+"&score="+n+"&room_id="+o+"&sign="+s,axios.post(t,{},{headers:{AREA:i,"CLIENT-VERSION":l}}).then(function(n){cc.log("\u8fd4\u56de\u4fe1\u606f\uff1a",n);var t=n.data.code;if(400404==t)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==t)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==t)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==t){cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="";var e=n.data.data.rank_list,c=n.data.data.current_rank;cc.log("head",e),e[0]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/1").getComponent(cc.Label).string=e[0].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/1/name").getComponent(cc.Label).string=e[0].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/1/score").getComponent(cc.Label).string=e[0].score,c===e[0].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/phbbbzz").active=!0)),e[1]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/2").getComponent(cc.Label).string=e[1].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/2/name").getComponent(cc.Label).string=e[1].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/2/score").getComponent(cc.Label).string=e[1].score,c===e[1].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/phbbbzz").active=!0)),e[2]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/3").getComponent(cc.Label).string=e[2].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/3/name").getComponent(cc.Label).string=e[2].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/3/score").getComponent(cc.Label).string=e[2].score,c===e[2].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(n){cc.log(n)})},wechat:function(){var n=c.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=n;var t,e=a.token,o=a.room_id,i=a.AREA,r=hex_md5("YanQu"+("room_id="+o+"&score="+n+"&token="+e)+"!qaz@wsx$"),s=a.version;t=c.url+"/live_game/push_data?token="+e+"&score="+n+"&room_id="+o+"&sign="+r,cc.log(t),axios.post(t,{},{headers:{AREA:i,"CLIENT-VERSION":s}}).then(function(n){cc.log(n);var t=n.data.code;if(cc.log("code:",t),400404==t)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==t)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==t)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==t){cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var e=n.data.data.rank_list,c=n.data.data.current_rank;cc.log("head",e),e[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=e[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=e[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=e[0].score,c===e[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),e[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=e[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=e[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=e[1].score,c===e[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),e[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=e[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=e[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=e[2].score,c===e[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(n){cc.log(n)})},wechathelp:function(){var n,t=a.token,e=a.room_id,o=a.AREA,i="help_score="+c.score+"&room_id="+e+"&token="+t+"&user_id="+a.helpuid,r=hex_md5("YanQu"+i+"!qaz@wsx$");n=c.url+"/live_game/push_data?token="+t+"&help_score="+c.score+"&room_id="+e+"&user_id="+a.helpuid+"&sign="+r;var s=a.version;cc.log(n,"PPPPP"),axios.post(n,{},{headers:{AREA:o,"CLIENT-VERSION":s}}).then(function(n){cc.log(n);var t=n.data.code;if(400404==t)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==t)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==t)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==t){cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="";var e=n.data.data.rank_list,a=n.data.data.current_rank,o=n.data.data.max_help_score;console.log("head",e),cc.find("Canvas/bg/help_weixin/score").getComponent(cc.Label).string=c.score,cc.find("Canvas/bg/help_weixin/help_score").getComponent(cc.Label).string="\u6700\u9ad8\u52a9\u529b\u6210\u7ee9 "+o+" \u5206",e[0]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=e[0].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=e[0].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=e[0].score,a===e[0].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/phbbbzz").active=!0)),e[1]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=e[1].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=e[1].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=e[1].score,a===e[1].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/phbbbzz").active=!0)),e[2]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=e[2].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=e[2].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=e[2].score,a===e[2].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==t){var i=n.data;cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string=""+i.message}}).catch(function(n){cc.log(n)})},teamend:function(){cc.log("team");var n,t=a.token,e=a.room_id,o=a.AREA,i="room_id="+e+"&score="+c.score+"&token="+t,r=hex_md5("YanQu"+i+"!qaz@wsx$");n=c.url+"/live_game/push_data?token="+t+"&score="+c.score+"&room_id="+e+"&sign="+r;var s=a.version;cc.log(n,"PPPPP"),axios.post(n,{},{headers:{AREA:o,"CLIENT-VERSION":s}}).then(function(n){cc.log(n);var t=n.data.code;if(400404==t)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==t)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==t)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==t){cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var e=n.data.data.rank_list,a=n.data.data.current_rank,o=n.data.data.max_score;console.log("head",e),cc.find("Canvas/bg/team/score").getComponent(cc.Label).string=c.score,cc.find("Canvas/bg/team/help_score").getComponent(cc.Label).string="\u6700\u9ad8\u4e2a\u4eba\u6210\u7ee9 "+o+" \u5206",e[0]&&(cc.find("Canvas/bg/team/bg_paihangbang/1/1").getComponent(cc.Label).string=e[0].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/1/name").getComponent(cc.Label).string=e[0].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/1/score").getComponent(cc.Label).string=e[0].score,a===e[0].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/1/phbbbzz").active=!0)),e[1]&&(cc.find("Canvas/bg/team/bg_paihangbang/2/2").getComponent(cc.Label).string=e[1].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/2/name").getComponent(cc.Label).string=e[1].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/2/score").getComponent(cc.Label).string=e[1].score,a===e[1].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/2/phbbbzz").active=!0)),e[2]&&(cc.find("Canvas/bg/team/bg_paihangbang/3/3").getComponent(cc.Label).string=e[2].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/3/name").getComponent(cc.Label).string=e[2].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/3/score").getComponent(cc.Label).string=e[2].score,a===e[2].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==t){var i=n.data;cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string=""+i.message}}).catch(function(n){cc.log(n)})},turn:function(){c.score=0,c.rebornTime=1,cc.director.loadScene("GameScene")},moregames:function(){wx.miniProgram.navigateTo({url:"/pages/empty/empty"})}}),cc._RF.pop()},{Common:"Common",net:"net"}],net:[function(n,t,e){"use strict";cc._RF.push(t,"62e73sDA6dOGolthqoGzpA1","net");var c=function(){var n=window.location.search,t=new Object;if(-1!=n.indexOf("?"))for(var e=n.substr(1),c=e.split("&"),a=0;a<c.length;a++)t[c[a].split("=")[0]]=c[a].split("=")[1];return t}();var a={token:c.token,room_id:c.room_id,AREA:c.AREA,env:c.env,type:c.type,version:c.version,helpuid:c.helpuid,teamid:c.teamid,apptype:c.apptype,singletoken:c.singletoken,url:{wxoffline:"http://applet.dialect-tv.test",wxpre:"https://yfbapplet.dialect-tv.com",wxonline:"https://applet.dialect-tv.com",appoffline:"http://api.dialect-tv.test",apppre:"http://pre.api.dialect-tv.com",apponline:"http://api.dialect-tv.com"},getSignString:function(n){var t=[];try{var e=window.yanqu.getSignString(n),c=JSON.parse(e).sign.sign,a=JSON.parse(e).header.VERSION;t.push(c),t.push(a)}catch(n){}return t}};t.exports=a,cc._RF.pop()},{}],transcend:[function(n,t,e){"use strict";cc._RF.push(t,"1733epIf0tDcJUub+NHiTbT","transcend"),cc.Class({extends:cc.Component,properties:{num:cc.Label,img:cc.Sprite},start:function(){this.texture=null},init:function(n,t){var e=this;cc.log(n,t);var c="http://image.dialect-tv.com/"+n;cc.log("url: ",c),cc.loader.load(c,function(n,t){if(n)cc.log(n);else{e.texture=t;var c=new cc.SpriteFrame(t);e.img.spriteFrame=c}}),this.num.string="\u7b2c"+t+"\u540d",this.scheduleOnce(function(){this.onStop()},2)},onStop:function(){cc.loader.release(this.texture),this.texture=null,this.node.destroy()}}),cc._RF.pop()},{}]},{},["Block","Rank","Start","chaoyue","transcend","endbg","net","Background","Brick","Bricks","Camera","Common","Game"]);