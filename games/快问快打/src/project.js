window.__require=function e(n,t,i){function a(o,s){if(!t[o]){if(!n[o]){var r=o.split("/");if(r=r[r.length-1],!n[r]){var g="function"==typeof __require&&__require;if(!s&&g)return g(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+o+"'")}}var l=t[o]={exports:{}};n[o][0].call(l.exports,function(e){return a(n[o][1][e]||e)},l,l.exports,e,n,t,i)}return t[o].exports}for(var c="function"==typeof __require&&__require,o=0;o<i.length;o++)a(i[o]);return a}({Block:[function(e,n,t){"use strict";cc._RF.push(n,"7678faPbyJLrph1RxP8mctM","Block");var i=e("Common");cc.Class({extends:cc.Component,properties:{rankLabel:{default:null,type:cc.Label},userIcon:{default:null,type:cc.Sprite},userInfo:{default:null,type:cc.Node},userName:{default:null,type:cc.Label},score:{default:null,type:cc.Label}},start:function(){},init:function(e,n,t,a){var c=this;this.rankLabel.string=e,this.rankLabel.node.color="1"==e?new cc.Color(255,0,0,255):"2"==e?new cc.Color(255,102,0,255):"3"==e?new cc.Color(255,204,0,255):new cc.Color(255,255,255,255),this.userName.string=t,this.score.string=a,""==n||(cc.log("load pic",i.url+"/"+n),cc.loader.load("http://image.dialect-tv.com/"+n,function(e,n){e&&console.error(e),c.userIcon.spriteFrame=new cc.SpriteFrame(n)}))}}),cc._RF.pop()},{Common:"Common"}],Common:[function(e,n,t){"use strict";cc._RF.push(n,"3dc882QnuZKIpi957DcAECC","Common");n.exports={score:0,SceneType:0,reborn:{},rebornTime:1,GameId:19,url:"",rank:[]},cc._RF.pop()},{}],CountDown:[function(e,n,t){"use strict";cc._RF.push(n,"da3e6/fJHpIeplakPhOnhnD","CountDown"),cc.Class({extends:cc.Component,properties:{countDown:3,size:400,audio:{default:null,url:cc.AudioClip}},onLoad:function(){this.clock=0,this.secondClock=0,this.gameObject=cc.find("Canvas").getComponent("Game"),this.coverString=cc.find("Canvas/cover/label"),this.coverLabel=this.coverString.getComponent("cc.Label"),cc.audioEngine.play(this.audio,!1,1)},start:function(){},_stringShrink:function(){this.secondClock<1?(this.coverLabel.string=this.countDown,this.coverLabel.fontSize=this.size-200*this.secondClock,this.coverLabel.lineHeight=this.size-200*this.secondClock):("\u5f00\u59cb"===this.countDown&&(this.gameObject.gameBegin=!0,this.gameObject.playProblem(),this.gameObject.setInputControl(),this.node.destroy()),this.secondClock=0,this.countDown-=1,0===this.countDown&&(this.countDown="\u5f00\u59cb"))},update:function(e){this.clock+=e,this.secondClock+=e,this._stringShrink()}}),cc._RF.pop()},{}],Game:[function(e,n,t){"use strict";cc._RF.push(n,"a5e52aR4spCgrJGlY7vCSid","Game");var i=e("Common");cc.Class({extends:cc.Component,properties:{redPackage:!1,bgmAudio:cc.AudioClip,problemAudio:cc.AudioClip,gameoverAudio:cc.AudioClip,reborn:{default:null,type:cc.Node}},start:function(){var e=this;this.levelNum=0,this.jsonProblem=!1,this.clock=0,this.gameBegin=!1,this.problemCountTime=10,this.shake=!1,this.shakeButton=null,this.shakeGenarate=10,this.shakeInterval=.05,this.shakeClock=0,this.shakeCount=0,this.problemNum=cc.find("Canvas/problem/problemNum"),this.problemNumLabel=this.problemNum.getComponent("cc.Label"),this.progressBar=cc.find("Canvas/problem/progressBar/bar"),this.stringProblemLong=cc.find("Canvas/problem/stringProblem/stringLong"),this.stringProblemFirst=cc.find("Canvas/problem/stringProblem/stringFirstLine"),this.stringProblemSecond=cc.find("Canvas/problem/stringProblem/stringSecondLine"),this.explainProblem=cc.find("Canvas/problem/explainProblem"),this.stringLongLabel=this.stringProblemLong.getComponent("cc.Label"),this.stringFirstLabel=this.stringProblemFirst.getComponent("cc.Label"),this.stringSecondLabel=this.stringProblemSecond.getComponent("cc.Label"),this.explainLabel=this.explainProblem.getComponent("cc.Label"),this.currentImage=1,this.firstImageProblem=cc.find("Canvas/problem/firstImageProblem"),this.secondImageProblem=cc.find("Canvas/problem/secondImageProblem"),this.audioProblem=cc.find("Canvas/problem/audioProblem"),this.buttonCover=cc.find("Canvas/buttonCover"),this.buttonCover.active=!1,this.stringProblemLong.opacity=0,this.stringProblemFirst.opacity=0,this.explainProblem.opacity=0,this.firstImageProblem.opacity=0,this.secondImageProblem.opacity=0,this.audioProblem.opacity=0,this.picArr=[],this.currentPicNum=0,this.audioArr=[],this.currentAudio=-1,this.audio=null,this.right=cc.find("Canvas/button/right"),this.wrong=cc.find("Canvas/button/wrong"),this.right.width=this.node.width/2-10,this.wrong.width=this.node.width/2-10,this.problem=null,this.timeBarWidth=600,this.currentMusic=null,this.jsonProblem?cc.loader.load(cc.url.raw("resources/problems.json"),function(n,t){e.problemArr=t,e._getProblem(),e.getPicArr(),e.getAudioArr(),e.getFirstImage(),e.getNextAudio()}):this._getProblem(),this.rebornBegin=!1},onLoad:function(){},_init:function(){this._getProblem(),this.playProblem()},setInputControl:function(){var e=this;this.currentBgm=cc.audioEngine.play(this.bgmAudio,!0,10),cc.log(this.currentBgm),this.right.getComponent("cc.Button").interactable=!0,this.wrong.getComponent("cc.Button").interactable=!0,this.right.on(cc.Node.EventType.TOUCH_START,function(n){e.rebornBegin=!1,e.problem.key?e._answerRight():(e.shakeButton=e.right,e._answerWrong())}),this.wrong.on(cc.Node.EventType.TOUCH_START,function(n){e.rebornBegin=!1,e.problem.key?(e.shakeButton=e.wrong,e._answerWrong()):e._answerRight()})},getAudioArr:function(){for(var e=0;e<this.problemArr.length;e++)2===this.problemArr[e].type&&this.audioArr.push(this.problemArr[e]);cc.log(this.audioArr)},getPicArr:function(){for(var e=0;e<this.problemArr.length;e++)1===this.problemArr[e].type&&this.picArr.push(this.problemArr[e]);cc.log(this.picArr)},getFirstImage:function(){var e=this;cc.loader.loadRes(this.picArr[0].image,cc.SpriteFrame,function(n,t){e.firstImageProblem.getComponent(cc.Sprite).spriteFrame=t}),this.picArr.length>1&&cc.loader.loadRes(this.picArr[1].image,cc.SpriteFrame,function(n,t){e.secondImageProblem.getComponent(cc.Sprite).spriteFrame=t})},getNextImage:function(){var e=this;this.currentPicNum+1<this.picArr.length&&(cc.log("get next image"),this.currentPicNum%2==1?(cc.log("replace first pic as ",this.picArr[this.currentPicNum+1].image),cc.loader.loadRes(this.picArr[this.currentPicNum+1].image,cc.SpriteFrame,function(n,t){e.firstImageProblem.getComponent(cc.Sprite).spriteFrame=t,cc.log(e.firstImageProblem.getComponent(cc.Sprite))})):cc.loader.loadRes(this.picArr[this.currentPicNum+1].image,cc.SpriteFrame,function(n,t){e.secondImageProblem.getComponent(cc.Sprite).spriteFrame=t}))},getNextAudio:function(){if(void 0!==this.audioArr[this.currentAudio+2]&&!(this.currentAudio>this.audioArr.length-2)){var e="resources/"+this.audioArr[this.currentAudio+1].audio+".mp3",n=cc.url.raw(e);cc.audioEngine.preload(n,function(){});var t="resources/"+this.audioArr[this.currentAudio+2].audio+".mp3",i=cc.url.raw(t);cc.audioEngine.preload(i,function(){})}},_randomNumProblem:function(){var e={key:!0,stringFirstLine:"7+8=15",stringSecondLine:"",time:3,type:0},n=Math.floor(26*Math.random()-5),t=Math.floor(21*Math.random());n<0&&(t+=n);var i=Math.random()>.5,a=0;i?a=n-t:(a=n-t)>15?a-=Math.floor(6*Math.random()+1):a+=Math.floor(6*Math.random()+1);var c=Number(a)<0?"-":"+";return e.key=i,e.stringFirstLine=t+c+Math.abs(a),e.stringSecondLine="="+n,e},_getProblem:function(){switch(this._drawProblemNum(),this.stringProblemLong.opacity=0,this.stringProblemFirst.opacity=0,this.stringProblemSecond.opacity=0,this.problemNum.opacity=0,this.explainProblem.opacity=0,this.firstImageProblem.opacity=0,this.secondImageProblem.opacity=0,this.audioProblem.opacity=0,this.jsonProblem?this.problem=this.problemArr[this.levelNum]:this.problem=this._randomNumProblem(),this.problemCountTime=this.problem.time,cc.log("\u5f53\u524d\u95ee\u9898\u65f6\u95f4:"+this.problemCountTime),this.problem.type){case 0:this.jsonProblem?this.stringLongLabel.string=this.problem.string:(this.stringFirstLabel.string=this.problem.stringFirstLine,this.stringSecondLabel.string=this.problem.stringSecondLine);break;case 1:case 2:this.explainLabel.string=this.problem.string}},playProblem:function(){switch(this.problem.type){case 0:this.jsonProblem?this.stringProblemLong.opacity=255:(this.stringProblemFirst.opacity=255,this.stringProblemSecond.opacity=255),this.problemNum.opacity=255;break;case 1:this.currentPicNum%2==0?this.firstImageProblem.opacity=255:this.secondImageProblem.opacity=255,this.explainProblem.opacity=255,this.currentPicNum+=1;break;case 2:cc.log("pause music"),cc.audioEngine.pause(this.currentBgm),this.getNextAudio();var e="resources/"+this.problem.audio+".mp3";cc.log(e),this.problemAudio=cc.url.raw(e),this.currentMusic=cc.audioEngine.play(this.problemAudio,!0,1),cc.log("\u5f53\u524d\u97f3\u9891id\uff1a",this.currentMusic);var n=cc.audioEngine.getDuration(this.currentMusic);n<=0&&(n=30),this.problem.time=n,cc.log("\u5f53\u524d\u97f3\u9891\u65f6\u957f\uff1a",n),this.problemCountTime=this.problem.time,this.audioProblem.opacity=255,this.explainProblem.opacity=255,this.currentAudio+=1}},_answerRight:function(){this.levelNum+=1,this.stringProblemLong.opcacity=0,this.stringProblemFirst.opacity=0,this.stringProblemSecond.opacity=0,this.problemNum.opacity=0,this.explainProblem.opacity=0,this.firstImageProblem.opacity=0,this.secondImageProblem.opacity=0,this.audioProblem.opacity=0,2===this.problem.type?(cc.audioEngine.stop(this.currentMusic),cc.audioEngine.uncache(this.problem.audio)):1===this.problem.type&&this.getNextImage(),this.jsonProblem?(cc.log(this.levelNum,this.problemArr.length),this.levelNum<this.problemArr.length?this._init():(cc.audioEngine.stop(this.currentBgm),cc.audioEngine.stop(this.problemAudio),i.score=this.levelNum+70,this.gameBegin=!1,this.reborn.getComponent("Reborn").showLabel())):(i.score=this.levelNum,this._init())},_answerWrong:function(){cc.log("answer wrong"),this.buttonCover.active=!0,cc.audioEngine.stop(this.currentBgm),cc.audioEngine.stop(this.currentMusic),cc.audioEngine.play(this.gameoverAudio,!1,1),this.shake=!0,i.score=this.levelNum,this.gameBegin=!1,this.reborn.getComponent("Reborn").showLabel()},rebornGame:function(){this.currentBgm=cc.audioEngine.play(this.bgmAudio,!0,1),this.rebornBegin=!0,this.problemCountTime=this.problem.time,this.buttonCover.active=!1,this.gameBegin=!0},_drawProblemNum:function(){var e=this.levelNum;this.problemNumLabel.string="\u7b2c"+(e+1)+"\u9898"},numToChinese:function(e){var n="";switch(e){case 0:break;case 1:n="\u4e00";break;case 2:n="\u4e8c";break;case 3:n="\u4e09";break;case 4:n="\u56db";break;case 5:n="\u4e94";break;case 6:n="\u516d";break;case 7:n="\u4e03";break;case 8:n="\u516b";break;case 9:n="\u4e5d"}return n},update:function(e){this.gameBegin&&(this.clock+=e,0==this.levelNum||this.rebornBegin||this.reborn.active||(this.problemCountTime-=e),this.problemCountTime>0?this.progressBar.width=this.timeBarWidth*this.problemCountTime/this.problem.time:(this.buttonCover.active=!0,cc.log("music stop"),cc.audioEngine.stop(this.currentBgm),cc.audioEngine.play(this.gameoverAudio,!1,1),i.score=this.levelNum,this.gameBegin=!1,this.reborn.getComponent("Reborn").showLabel())),this.shake&&(this.shakeClock+=e,this.shakeClock>this.shakeInterval&&(this.shakeCount++,this.shakeButton.x+=this.shakeGenarate*=-1,this.shakeClock=0,this.shakeCount>15&&(this.shakeCount=0,this.shake=!1)))}}),cc._RF.pop()},{Common:"Common"}],Problem:[function(e,n,t){"use strict";cc._RF.push(n,"92e2ai4LTlOUY6drro3vT3V","Problem"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},update:function(e){}}),cc._RF.pop()},{}],Rank:[function(e,n,t){"use strict";cc._RF.push(n,"a85ca6+unNLWaN7ujmWKgFm","Rank");var i=e("net"),a=e("Common");cc.Class({extends:cc.Component,properties:{block_pre:{default:null,type:cc.Prefab},content:{default:null,type:cc.Node},self:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},itemHeight:120},start:function(){10==a.SceneType?(this.loading.opacity=0,this.undateCount=0,this.updateDutation=.2,this.content.height=0,this.directionDown=!0,this.lastContentY=0,this.currentPage=1,this.showIndex=2,this.showLineNum=12,this.statusArray=[],this.blockArr=[],this.getStatus(this.currentPage),this.statusBeGet=!1,this.rankDied=!1,this.node.active=!1):this.node.destroy()},init:function(){this.lastContentY=this.content.y;var e=this.statusArray.length;e>12&&(e=12);for(var n=0;n<e;++n){var t=this.statusArray[n],i=t.rank,a=t.avatar,c=t.nickname,o=t.score,s=this.spawnBlock();this.content.addChild(s),s.setPosition(0,-this.itemHeight*(.5+n)),n%2==0&&(s.getChildByName("bg").opacity=0),s.getComponent("Block").init(i,a,c,o),this.blockArr.push(s)}},addRank:function(){this.rankDied||(cc.log("add rank"),this.getStatus(this.currentPage+1))},getStatus:function(e){var n=this,t=i.AREA,c=i.version,o=i.singletoken;cc.log(t,c);var s=a.GameId,r=hex_md5("YanQu"+("game_id="+s+"&page="+e+"&token="+o)+"!qaz@wsx$"),g=a.url+"/game/single_rank_all?token="+o+"&game_id="+s+"&page="+e+"&sign="+r;cc.log(g),axios.post(g,{},{headers:{AREA:t,"CLIENT-VERSION":c}}).then(function(t){cc.log(t);for(var i=t.data.data.rank_list,a=0;a<i.length;a++)n.statusArray.push(i[a]);n.currentPage=e,n.statusControl(t.data.data.current),n.content.height+=i.length*n.itemHeight,i.length<20&&(n.rankDied=!0),n.loading.opacity=0},this).catch(function(e){cc.log(e)})},statusControl:function(e){this.statusBeGet=!0,1==this.currentPage?(this.init(),this.initSelf(e),this.refreshRank()):this.refreshRank()},initSelf:function(e){cc.log("self data:",e);var n=e.rank,t=e.avatar,i=e.nickname,a=e.score,c=this.spawnBlock();c.getComponent("Block").init(n,t,i,a),this.self.addChild(c)},spawnBlock:function(){return cc.instantiate(this.block_pre)},scrollEvent:function(e,n){1==n&&(cc.log("scroll bottom"),this.refreshRank())},refreshRank:function(){for(var e=0;e<this.blockArr.length;e++){var n=this.blockArr[e],t=Math.abs(n.y),i=Math.round((t+60)/120)-1;if(cc.log(i),i>this.statusArray.length-1||i<0)n.opacity=0;else{n.opacity=255;var a=this.statusArray[i],c=a.rank,o=a.avatar,s=a.nickname,r=a.score;n.getComponent("Block").init(c,o,s,r)}}},getCurrentLine:function(){Math.ceil((this.content.y+60)/900)>this.currentPage&&this.addRank();for(var e=0;e<this.blockArr.length;e++){if(this.content.y+this.blockArr[e].y>660){var n=this.blockArr[e];n.y-=1440;var t=Math.abs(n.y),i=Math.round((t+60)/120);if(i>this.statusArray.length||i<0){n.opacity=0;continue}n.opacity=255;var a=this.statusArray[i-1],c=a.rank,o=a.avatar,s=a.nickname,r=a.score;n.getComponent("Block").init(c,o,s,r)}if(this.content.y+this.blockArr[e].y<-660){var g=this.blockArr[e];g.y+=1440;var l=Math.abs(g.y),h=Math.round((l+60)/120);if(h>this.statusArray.length){g.opacity=0;continue}g.opacity=255;var p=this.statusArray[h-1],u=p.rank,b=p.avatar,m=p.nickname,d=p.score;g.getComponent("Block").init(u,b,m,d)}}},update:function(e){this.statusBeGet&&(this.undateCount+=e,this.undateCount<this.updateDutation||(this.undateCount=0,this.getCurrentLine()))}}),cc._RF.pop()},{Common:"Common",net:"net"}],Reborn:[function(e,n,t){"use strict";cc._RF.push(n,"faf9bra/O1C6rUqHeQpUUcT","Reborn");var i=e("net"),a=e("Common");cc.Class({extends:cc.Component,properties:{score:{default:null,type:cc.Node},reborn_button:{default:null,type:cc.Node},reborn_price:{default:null,type:cc.Node},total_coin:{default:null,type:cc.Node},background:{default:null,type:cc.Node},noMoney:{default:null,type:cc.Node},enoughMoney:{default:null,type:cc.Node},pay_success:{default:null,type:cc.Node},canvas:{default:null,type:cc.Node},black:{default:null,type:cc.Node},cover:{default:null,type:cc.Node},uploading:{default:null,type:cc.Node}},onLoad:function(){},start:function(){this.uploading.active=!1,this.node.active=!1,this.noMoney.active=!1,this.enoughMoney.active=!1,this.pay_success.active=!1,this.background.active=!1,this.black.active=!1,this.gameObject=this.canvas.getComponent("Game")},showLabel:function(){this.unscheduleAllCallbacks();var e=a.reborn;cc.log("reborn:",e,i.room_id),void 0!=e?void 0!=i.room_id?1==e.revive?(this.score.getComponent("cc.Label").string=a.score,this.total_coin.getComponent("cc.Label").string=e.coin,a.rebornTime<4&&0!=e.subsection[a.rebornTime]?(this.node.active=!0,this.background.active=!0,this.enoughMoney.active=!0,this.black.active=!0,this.reborn_price.getComponent("cc.Label").string=e.subsection[a.rebornTime]):this.goDie()):this.goDie():this.scheduleOnce(function(){cc.find("Canvas/bg").getComponent("endbg").init()},1):this.goDie()},reborn:function(){var e=this,n=a.reborn;if(parseInt(n.coin)<parseInt(n.subsection[a.rebornTime]))return this.node.active=!0,this.black.active=!1,this.enoughMoney.active=!1,this.pay_success.active=!1,this.background.active=!0,void(this.noMoney.active=!0);var t=void 0,c=1,o="num="+a.rebornTime+"&room_id="+i.room_id+"&token="+i.token;if(1==a.SceneType){var s=hex_md5("YanQu"+o+"!qaz@wsx$");c=1,t=a.url+"/live_game/revive_post?token="+i.token+"&room_id="+i.room_id+"&num="+a.rebornTime+"&sign="+s}else if(12==a.SceneType||15==a.SceneType||11==a.SceneType){var r=i.getSignString(o),g=r[0];c=r[1],t=a.url+"/live_game/revive_post?token="+i.token+"&room_id="+i.room_id+"&num="+a.rebornTime+"&sign="+g}else{if(20!=a.SceneType&&21!=a.SceneType&&22!=a.SceneType)return void this.goDie();var l=hex_md5("YanQu"+o+"!qaz@wsx$");c=i.version,t=a.url+"/live_game/revive_post?token="+i.token+"&room_id="+i.room_id+"&num="+a.rebornTime+"&sign="+l}cc.log("reborn url:",t),axios.post(t,{},{headers:{AREA:i.AREA,"CLIENT-VERSION":c}}).then(function(n){cc.log(n);var t=n.data.data;void 0!=t?(a.reborn.coin=t.coin,1==t.is_pay?e.rebornSuccess():(e.node.active=!0,e.background.active=!0,e.noMoney.active=!0)):e.goDie()}).catch(function(e){})},rebornSuccess:function(){var e=this;cc.log("reborn success"),a.rebornTime+=1,this.background.active=!1,this.black.active=!1,this.noMoney.active=!1,this.enoughMoney.active=!1,this.pay_success.active=!0,this.pay_success.opacity=255,this.pay_success.runAction(cc.fadeOut(1)),this.scheduleOnce(function(){e.node.active=!1},1),cc.find("Canvas").getComponent("Game").rebornGame()},goDie:function(){this.uploading.active=!0,cc.find("Canvas/bg").getComponent("endbg").init()},update:function(e){}}),cc._RF.pop()},{Common:"Common",net:"net"}],Start:[function(e,n,t){"use strict";cc._RF.push(n,"afd9fxLy0dBZYJ9d6AAhfwt","Start");var i=e("Common"),a=e("net");cc.Class({extends:cc.Component,properties:{button:{default:null,type:cc.Node},rankButton:{default:null,type:cc.Node},illustrate:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},rank:{default:null,type:cc.Node}},onLoad:function(){},start:function(){var e=this;this.rankButton.active=!1,this.button.active=!1,this.illustrate.active=!1,this.netload=!1,this.preload=!1,this.chooseEnv(),this.getInfo(),cc.director.preloadScene("GameScene",function(){e.preload=!0,cc.log("preload success",e.preload,e.netload),e.netload&&(e.button.active=!0)})},chooseEnv:function(){if(void 0==a.type)if(void 0==a.token)void 0!==a.singletoken&&(this.rankButton.active=!0,1==a.env?i.url=a.url.appoffline:2==a.env?i.url=a.url.apppre:i.url=a.url.apponline,i.SceneType=10);else{if(1==a.env){var e=void 0;try{e=window.yanqu.getBrowerID()}catch(e){}i.url=a.url.appoffline,i.SceneType="yqbrower"==e?12:1}else i.SceneType=11,2==a.env?i.url=a.url.apppre:i.url=a.url.apponline;5==a.apptype&&(i.SceneType=15)}else 1==a.env?i.url=a.url.wxoffline:2==a.env?i.url=a.url.wxpre:i.url=a.url.wxonline,void 0!==a.singletoken&&(this.rankButton.active=!0,i.SceneType=10),3==a.type?i.SceneType=20:4==a.type?i.SceneType=21:5==a.type&&(i.SceneType=22);cc.log("scenetype:",i.SceneType)},getInfo:function(){var e,n=this,t="room_id="+a.room_id+"&token="+a.token,c=a.version,o=void 0;if(1==i.SceneType)o=hex_md5("YanQu"+t+"!qaz@wsx$"),c=1,a.AREA=1,this.transcend(o,c);else if(12==i.SceneType||15==i.SceneType||11==i.SceneType){var s=a.getSignString(t);o=s[0],c=s[1],a._version=c,this.transcend(o,c)}else if(20==i.SceneType||21==i.SceneType||22==i.SceneType)this.transcend();else if(10==i.SceneType)return this.netload=!0,void(this.preload&&(this.button.active=!0));e=i.url+"/live_game/revive?token="+a.token+"&room_id="+a.room_id+"&sign="+o,axios.post(e,{},{headers:{AREA:a.AREA,"CLIENT-VERSION":c}}).then(function(e){cc.log("start respose:",e);var t=e.data.data;i.reborn=t,n.netload=!0,n.preload&&(n.button.active=!0)}).catch(function(e){n.button.active=!0,cc.log(e)})},showIllustrate:function(){this.illustrate.active=!0},hideIllustrate:function(){this.illustrate.active=!1},loadScene:function(){cc.director.loadScene("GameScene")},transcend:function(e,n){cc.log(e,n);var t,c=a.token,o=a.room_id,s=e;void 0==e&&(s=hex_md5("YanQu"+("room_id="+o+"&token="+c)+"!qaz@wsx$"));var r=a.AREA,g=n;void 0==n&&(g=a.version),t=i.url+"/live/section_rank_score?token="+c+"&room_id="+o+"&sign="+s,axios.post(t,{},{headers:{AREA:r,"CLIENT-VERSION":g}}).then(function(e){cc.log("rank:",e),Object.keys(e.data.data.rank).forEach(function(n){i.rank.push(e.data.data.rank[n])}),cc.log(i.rank)},this).catch(function(e){})},showRank:function(){this.rank.active=!0},hideRank:function(){this.rank.active=!1},hideButton:function(){alert(JSON.stringify(a))},update:function(e){this.loading.rotation+=2}}),cc._RF.pop()},{Common:"Common",net:"net"}],chaoyue:[function(e,n,t){"use strict";cc._RF.push(n,"dac14T8vEdKfIF9sWiJLknA","chaoyue");var i=e("Common");cc.Class({extends:cc.Component,properties:{transcendPrefab:cc.Prefab,scoreLabel:{default:null,type:cc.Label}},onLoad:function(){if(cc.log("chao yue scenetype ",i.SceneType,i.rank),(11===i.SceneType||12===i.SceneType||20===i.SceneType||1==i.SceneType)&&0!=i.rank.length){this._ranking=i.rank.length,this.transcendFunc();var e=cc.instantiate(this.transcendPrefab);this.node.addChild(e),e.opacity=0,e.getComponent("transcend").init(i.rank[this._ranking-1].avatar,i.rank[this._ranking-1].rank)}},start:function(){},transcendFunc:function(){cc.log("\u6570\u636e",i.rank),this.schedule(this.detectionScore,3)},detectionScore:function(){var e=i.rank,n=i.score;cc.log(n);for(var t=0;t<e.length;t++)if(Number(n)>Number(e[t].score)&&(cc.log(n,e[t].score,t),this._ranking>t)){var a=cc.instantiate(this.transcendPrefab);this.node.addChild(a),a.setPosition(cc.v2(0,0)),a.opacity=0,a.getComponent("transcend").init(i.rank[t].avatar,i.rank[t].rank);var c=cc.sequence(cc.fadeTo(.5,0),cc.fadeTo(0,255),cc.fadeTo(1,255),cc.spawn(cc.moveBy(1,cc.v2(0,80)),cc.fadeTo(1,0)));return a.runAction(c),this._ranking=t,void(0==this._ranking&&this.unscheduleAllCallbacks())}}}),cc._RF.pop()},{Common:"Common"}],endbg:[function(e,n,t){"use strict";cc._RF.push(n,"b0123F/GzdDoYtgcFawA/yh","endbg");var i=e("Common"),a=e("net");cc.Class({extends:cc.Component,properties:{Camera:cc.Node,hongbao:cc.Node,putong:cc.Node,weixing:cc.Node,weixinhelp:cc.Node,team:cc.Node,score:cc.Label},onLoad:function(){cc.log("net",a),this.weixinhelp.active=!1,this.node.active=!1,this.putong.active=!1,this.hongbao.active=!1,this.weixing.active=!1,this.team.active=!1},init:function(){this.node.zIndex=2,this.node.active=!0,10===i.SceneType?(this.weixing.active=!0,this.putongRank()):11===i.SceneType||12===i.SceneType||1===i.SceneType?(this.hongbao.active=!0,this.hongBao()):20===i.SceneType?(this.weixing.active=!0,this.wechat()):21===i.SceneType?(this.weixinhelp.active=!0,this.wechathelp()):22===i.SceneType||15===i.SceneType?(this.team.active=!0,this.teamend()):(this.putong.active=!0,this.score.string="\u672c\u6b21\u5f97\u5206\uff1a"+i.score)},start:function(){},putongRank:function(){var e=i.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=e;var n,t=a.singletoken,c=a.AREA,o="game_id="+i.GameId+"&score="+e+"&token="+t,s=hex_md5("YanQu"+o+"!qaz@wsx$"),r=a.version;n=i.url+"/game/single_push_data?token="+t+"&game_id="+i.GameId+"&score="+e+"&sign="+s,cc.log(n),axios.post(n,{},{headers:{AREA:c,"CLIENT-VERSION":r}}).then(function(e){cc.log(e);var n=e.data.code;if(cc.log("code:",n),400404==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==n){10==i.SceneType?cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="":cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var t=e.data.data.rank,a=e.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(e){cc.log(e)})},hongBao:function(){var e=i.score;cc.find("Canvas/bg/hongbao/score").getComponent("cc.Label").string=e;var n,t=a.token,c=a.room_id,o=a.AREA,s=(a.env,"room_id="+c+"&score="+e+"&token="+t),r=void 0,g=void 0;try{var l=window.yanqu.getSignString(s);r=JSON.parse(l).sign.sign,g=JSON.parse(l).header.VERSION}catch(e){}1===i.SceneType&&(r=hex_md5("YanQu"+s+"!qaz@wsx$")),n=i.url+"/live_game/push_data?token="+t+"&score="+e+"&room_id="+c+"&sign="+r,axios.post(n,{},{headers:{AREA:o,"CLIENT-VERSION":g}}).then(function(e){cc.log("\u8fd4\u56de\u4fe1\u606f\uff1a",e);var n=e.data.code;if(400404==n)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==n)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==n)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==n){cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="";var t=e.data.data.rank_list,i=e.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,i===t[0].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,i===t[1].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,i===t[2].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(e){cc.log(e)})},wechat:function(){var e=i.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=e;var n,t=a.token,c=a.room_id,o=a.AREA,s=hex_md5("YanQu"+("room_id="+c+"&score="+e+"&token="+t)+"!qaz@wsx$"),r=a.version;n=i.url+"/live_game/push_data?token="+t+"&score="+e+"&room_id="+c+"&sign="+s,cc.log(n),axios.post(n,{},{headers:{AREA:o,"CLIENT-VERSION":r}}).then(function(e){cc.log(e);var n=e.data.code;if(cc.log("code:",n),400404==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==n)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==n){cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var t=e.data.data.rank_list,i=e.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,i===t[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,i===t[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,i===t[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(e){cc.log(e)})},wechathelp:function(){var e,n=a.token,t=a.room_id,c=a.AREA,o="help_score="+i.score+"&room_id="+t+"&token="+n+"&user_id="+a.helpuid,s=hex_md5("YanQu"+o+"!qaz@wsx$");e=i.url+"/live_game/push_data?token="+n+"&help_score="+i.score+"&room_id="+t+"&user_id="+a.helpuid+"&sign="+s;var r=a.version;cc.log(e,"PPPPP"),axios.post(e,{},{headers:{AREA:c,"CLIENT-VERSION":r}}).then(function(e){cc.log(e);var n=e.data.code;if(400404==n)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==n)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==n)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==n){cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="";var t=e.data.data.rank_list,a=e.data.data.current_rank,c=e.data.data.max_help_score;console.log("head",t),cc.find("Canvas/bg/help_weixin/score").getComponent(cc.Label).string=i.score,cc.find("Canvas/bg/help_weixin/help_score").getComponent(cc.Label).string="\u6700\u9ad8\u52a9\u529b\u6210\u7ee9 "+c+" \u5206",t[0]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==n){var o=e.data;cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string=""+o.message}}).catch(function(e){cc.log(e)})},teamend:function(){cc.log("team");var e,n=a.token,t=a.room_id,c=a.AREA,o="room_id="+t+"&score="+i.score+"&token="+n,s=hex_md5("YanQu"+o+"!qaz@wsx$");e=i.url+"/live_game/push_data?token="+n+"&score="+i.score+"&room_id="+t+"&sign="+s;var r=a.version;cc.log(e,"PPPPP"),axios.post(e,{},{headers:{AREA:c,"CLIENT-VERSION":r}}).then(function(e){cc.log(e);var n=e.data.code;if(400404==n)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==n)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==n)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==n){cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var t=e.data.data.rank_list,a=e.data.data.current_rank,c=e.data.data.max_score;console.log("head",t),cc.find("Canvas/bg/team/score").getComponent(cc.Label).string=i.score,cc.find("Canvas/bg/team/help_score").getComponent(cc.Label).string="\u6700\u9ad8\u4e2a\u4eba\u6210\u7ee9 "+c+" \u5206",t[0]&&(cc.find("Canvas/bg/team/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/team/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/team/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==n){var o=e.data;cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string=""+o.message}}).catch(function(e){cc.log(e)})},turn:function(){i.score=0,i.rebornTime=1,cc.director.loadScene("GameScene")},moregames:function(){wx.miniProgram.navigateTo({url:"/pages/empty/empty"})}}),cc._RF.pop()},{Common:"Common",net:"net"}],net:[function(e,n,t){"use strict";cc._RF.push(n,"62e73sDA6dOGolthqoGzpA1","net");var i=function(){var e=window.location.search,n=new Object;if(-1!=e.indexOf("?"))for(var t=e.substr(1),i=t.split("&"),a=0;a<i.length;a++)n[i[a].split("=")[0]]=i[a].split("=")[1];return n}();var a={token:i.token,room_id:i.room_id,AREA:i.AREA,env:i.env,type:i.type,version:i.version,helpuid:i.helpuid,teamid:i.teamid,apptype:i.apptype,singletoken:i.singletoken,url:{wxoffline:"http://applet.dialect-tv.test",wxpre:"https://yfbapplet.dialect-tv.com",wxonline:"https://applet.dialect-tv.com",appoffline:"http://api.dialect-tv.test",apppre:"http://pre.api.dialect-tv.com",apponline:"http://api.dialect-tv.com"},getSignString:function(e){var n=[];try{var t=window.yanqu.getSignString(e),i=JSON.parse(t).sign.sign,a=JSON.parse(t).header.VERSION;n.push(i),n.push(a)}catch(e){}return n}};n.exports=a,cc._RF.pop()},{}],transcend:[function(e,n,t){"use strict";cc._RF.push(n,"1733epIf0tDcJUub+NHiTbT","transcend"),cc.Class({extends:cc.Component,properties:{num:cc.Label,img:cc.Sprite},start:function(){this.texture=null},init:function(e,n){var t=this;cc.log(e,n);var i="http://image.dialect-tv.com/"+e;cc.log("url: ",i),cc.loader.load(i,function(e,n){if(e)cc.log(e);else{t.texture=n;var i=new cc.SpriteFrame(n);t.img.spriteFrame=i}}),this.num.string="\u7b2c"+n+"\u540d",this.scheduleOnce(function(){this.onStop()},2)},onStop:function(){cc.loader.release(this.texture),this.texture=null,this.node.destroy()}}),cc._RF.pop()},{}]},{},["Common","Block","Rank","Start","chaoyue","transcend","endbg","net","Reborn","CountDown","Game","Problem"]);