require=function o(c,s,r){function h(t,n){if(!s[t]){if(!c[t]){var e="function"==typeof require&&require;if(!n&&e)return e(t,!0);if(l)return l(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var a=s[t]={exports:{}};c[t][0].call(a.exports,function(n){var e=c[t][1][n];return h(e||n)},a,a.exports,o,c,s,r)}return s[t].exports}for(var l="function"==typeof require&&require,n=0;n<r.length;n++)h(r[n]);return h}({Bg:[function(n,e,t){"use strict";cc._RF.push(e,"fa5ffk/U4pJH7T+4EWVZYuv","Bg"),cc.Class({extends:cc.Component,properties:{speed:2},onLoad:function(){},update:function(n){0==Global.isPause&&(this.node.setPositionY(this.node.getPositionY()-this.speed),this.node.getPositionY()<=-this.node.getContentSize().height&&this.node.setPositionY(this.node.getPositionY()+2*this.node.getContentSize().height-this.speed))}}),cc._RF.pop()},{}],Block:[function(n,e,t){"use strict";cc._RF.push(e,"7678faPbyJLrph1RxP8mctM","Block");var o=n("Common");cc.Class({extends:cc.Component,properties:{rankLabel:{default:null,type:cc.Label},userIcon:{default:null,type:cc.Sprite},userInfo:{default:null,type:cc.Node},userName:{default:null,type:cc.Label},score:{default:null,type:cc.Label}},start:function(){},init:function(n,e,t,i){var a=this;this.rankLabel.string=n,this.rankLabel.node.color="1"==n?new cc.Color(255,0,0,255):"2"==n?new cc.Color(255,102,0,255):"3"==n?new cc.Color(255,204,0,255):new cc.Color(255,255,255,255),this.userName.string=t,this.score.string=i,""==e||(cc.log("load pic",o.url+"/"+e),cc.loader.load("http://image.dialect-tv.com/"+e,function(n,e){n&&console.error(n),a.userIcon.spriteFrame=new cc.SpriteFrame(e)}))}}),cc._RF.pop()},{Common:"Common"}],Bullet:[function(n,e,t){"use strict";cc._RF.push(e,"6a411rnLEZN2p+zptJkPwUi","Bullet"),cc.Class({extends:cc.Component,properties:{speed:0},onLoad:function(){if("bullet4_left"===this.node.name){var n=[cc.p(0,504),cc.p(-300,-504),cc.p(0,1e3)],e=cc.bezierBy(3,n);this.node.runAction(e)}else if("bullet4_right"===this.node.name){n=[cc.p(0,504),cc.p(300,-504),cc.p(300,1e3)],e=cc.bezierBy(3,n);this.node.runAction(e)}},onCollisionEnter:function(n,e){"bullet1"===this.node.name||this.node.destroy()},update:function(n){"bullet4_left"===this.node.name||"bullet4_right"===this.node.name||("bullet5"===this.node.name?0==Global.isPause&&(this.node.y-=600*n,this.node.y<-1e3&&this.node.destroy()):0==Global.isPause&&(this.node.setPositionY(this.node.getPositionY()+this.speed),1e3<this.node.y&&this.node.destroy()))}}),cc._RF.pop()},{}],Common:[function(n,e,t){"use strict";cc._RF.push(e,"baab8pSH1JPYqpVpVSHhkQV","Common");e.exports={score:0,SceneType:0,reborn:{},rebornTime:1,GameId:1,url:"",rank:[]},cc._RF.pop()},{}],GameScene:[function(n,e,t){"use strict";cc._RF.push(e,"9e18dtryclGP5ZBVF6QNaEh","GameScene"),window.Global={isPause:!1};var i=n("Common");cc.Class({extends:cc.Component,properties:{canvas:{default:null,type:cc.Node},score:cc.Label,genbulletspeedtime:0},onLoad:function(){var n=cc.sequence(cc.fadeOut(0),cc.fadeIn(1));this.canvas.runAction(n),this.end=!1},update:function(n){this.score.string=i.score}}),cc._RF.pop()},{Common:"Common"}],Helpers:[function(n,e,t){"use strict";cc._RF.push(e,"571d9OIF85Cu5Px5VTeyiNk","Helpers"),e.exports={getRandomInt:function(n,e){return Math.floor(Math.random()*(e-n))+n}},cc._RF.pop()},{}],Player:[function(n,e,t){"use strict";cc._RF.push(e,"55c16NGdM1KkLW2phr5FSHm","Player");n("Common"),cc.Class({extends:cc.Component,properties:{sprites:[cc.Sprite],s:cc.Sprite,time:.2,bulletPre:cc.Prefab,bulletPre1:cc.Prefab,bulletPre2:cc.Prefab,bulletPre3:cc.Prefab,Canvas:cc.Node,pre1:cc.Node,blink:cc.Node,bgmAudio:{url:cc.AudioClip,default:null},reborn:cc.Node},onLoad:function(){cc.director.getCollisionManager().enabled=!0,this.bgm=cc.audioEngine.play(this.bgmAudio,!0,1),this.end=!1,this.touchx=0,this.touchy=0,this.AddTouchEvent(),this.schedule(this.GenerateBullets,this.time),this.currentSpriteFrame=this.sprites[3].spriteFrame;var n=cc.fadeIn(1),e=cc.fadeOut(1),t=cc.sequence(n,e);this.blink.runAction(cc.repeatForever(t))},bomb:function(){cc.audioEngine.stop(this.bgm);var n=this.getComponent(cc.Animation);n.play(),Global.isPause=!0,n.on("stop",this.onStop,this)},onStop:function(){this.end||(this.end=!0,this.reborn.getComponent("Reborn").showLabel())},onDisabled:function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1},GenerateBullets:function(){if(!1===this.end){var n=cc.instantiate(this.bulletPre);n.position=this.node.position,n.parent=this.Canvas}},GenerateBullet1s:function(){if(!1===this.end){var n=cc.instantiate(this.bulletPre1);n.position=cc.p(this.node.x,this.node.y),n.parent=this.Canvas}},GenerateBullet2s:function(){if(!1===this.end){var n=cc.instantiate(this.bulletPre2);n.position=cc.p(this.node.x-50,this.node.y),n.parent=this.Canvas}},GenerateBullet3s:function(){if(!1===this.end){var n=cc.instantiate(this.bulletPre3);n.position=cc.p(this.node.x-50,this.node.y),n.parent=this.Canvas}},AddTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(n){this.touchx=n.touch.getLocationX(),this.touchy=n.touch.getLocationY()},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(n){this.node.setPositionX(this.node.getPositionX()+n.touch.getLocationX()-this.touchx),this.node.setPositionY(this.node.getPositionY()+n.touch.getLocationY()-this.touchy),this.node.y<=-605?this.node.setPositionY(-605):356<=this.node.x?this.node.setPositionX(356):this.node.x<=-359&&this.node.setPositionX(-359),this.touchx=n.touch.getLocationX(),this.touchy=n.touch.getLocationY()},this),this.node.on(cc.Node.EventType.TOUCH_END,function(n){},this)},onCollisionEnter:function(n,e){return"1"===n.node.group?(this.node.getComponent(cc.Sprite).spriteFrame=this.sprites[0].spriteFrame,this.currentSpriteFrame=this.sprites[0].spriteFrame,this.unscheduleAllCallbacks(),void this.schedule(this.GenerateBullet1s,this.time)):"2"===n.node.group?(this.node.getComponent(cc.Sprite).spriteFrame=this.sprites[1].spriteFrame,this.currentSpriteFrame=this.sprites[1].spriteFrame,this.unscheduleAllCallbacks(),void this.schedule(this.GenerateBullet2s,.1)):"3"===n.node.group?(this.node.getComponent(cc.Sprite).spriteFrame=this.sprites[2].spriteFrame,this.currentSpriteFrame=this.sprites[2].spriteFrame,this.unscheduleAllCallbacks(),void this.schedule(this.GenerateBullet3s,.2)):void this.bomb()},rebornGame:function(){this.bgm=cc.audioEngine.play(this.bgmAudio,!0,1),Global.isPause=!1,this.end=!1,this.node.getComponent(cc.Sprite).spriteFrame=this.currentSpriteFrame,this.node.opacity=255,this.node.x=0,this.node.y=-520,this.pre1.removeAllChildren()}});cc._RF.pop()},{Common:"Common"}],Rank:[function(n,e,t){"use strict";cc._RF.push(e,"a85ca6+unNLWaN7ujmWKgFm","Rank");var r=n("net"),h=n("Common");cc.Class({extends:cc.Component,properties:{block_pre:{default:null,type:cc.Prefab},content:{default:null,type:cc.Node},self:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},itemHeight:120},start:function(){10==h.SceneType?(this.loading.opacity=0,this.undateCount=0,this.updateDutation=.2,this.content.height=0,this.directionDown=!0,this.lastContentY=0,this.currentPage=1,this.showIndex=2,this.showLineNum=12,this.statusArray=[],this.blockArr=[],this.getStatus(this.currentPage),this.statusBeGet=!1,this.rankDied=!1,this.node.active=!1):this.node.destroy()},init:function(){this.lastContentY=this.content.y;var n=this.statusArray.length;12<n&&(n=12);for(var e=0;e<n;++e){var t=this.statusArray[e],i=t.rank,a=t.avatar,o=t.nickname,c=t.score,s=this.spawnBlock();this.content.addChild(s),s.setPosition(0,-this.itemHeight*(.5+e)),e%2==0&&(s.getChildByName("bg").opacity=0),s.getComponent("Block").init(i,a,o,c),this.blockArr.push(s)}},addRank:function(){this.rankDied||(cc.log("add rank"),this.getStatus(this.currentPage+1))},getStatus:function(i){var a=this,n=r.AREA,e=r.version,t=r.singletoken;cc.log(n,e);var o=h.GameId,c=hex_md5("YanQu"+("game_id="+o+"&page="+i+"&token="+t)+"!qaz@wsx$"),s=h.url+"/game/single_rank_all?token="+t+"&game_id="+o+"&page="+i+"&sign="+c;cc.log(s),axios.post(s,{},{headers:{AREA:n,"CLIENT-VERSION":e}}).then(function(n){cc.log(n);for(var e=n.data.data.rank_list,t=0;t<e.length;t++)a.statusArray.push(e[t]);a.currentPage=i,a.statusControl(n.data.data.current),a.content.height+=e.length*a.itemHeight,e.length<20&&(a.rankDied=!0),a.loading.opacity=0},this).catch(function(n){cc.log(n)})},statusControl:function(n){this.statusBeGet=!0,1==this.currentPage&&(this.init(),this.initSelf(n)),this.refreshRank()},initSelf:function(n){cc.log("self data:",n);var e=n.rank,t=n.avatar,i=n.nickname,a=n.score,o=this.spawnBlock();o.getComponent("Block").init(e,t,i,a),this.self.addChild(o)},spawnBlock:function(){return cc.instantiate(this.block_pre)},scrollEvent:function(n,e){1==e&&(cc.log("scroll bottom"),this.refreshRank())},refreshRank:function(){for(var n=0;n<this.blockArr.length;n++){var e=this.blockArr[n],t=Math.abs(e.y),i=Math.round((t+60)/120)-1;if(cc.log(i),i>this.statusArray.length-1||i<0)e.opacity=0;else{e.opacity=255;var a=this.statusArray[i],o=a.rank,c=a.avatar,s=a.nickname,r=a.score;e.getComponent("Block").init(o,c,s,r)}}},getCurrentLine:function(){Math.ceil((this.content.y+60)/900)>this.currentPage&&this.addRank();for(var n=0;n<this.blockArr.length;n++){if(660<this.content.y+this.blockArr[n].y){var e=this.blockArr[n];e.y-=1440;var t=Math.abs(e.y),i=Math.round((t+60)/120);if(i>this.statusArray.length||i<0){e.opacity=0;continue}e.opacity=255;var a=this.statusArray[i-1],o=a.rank,c=a.avatar,s=a.nickname,r=a.score;e.getComponent("Block").init(o,c,s,r)}if(this.content.y+this.blockArr[n].y<-660){var h=this.blockArr[n];h.y+=1440;var l=Math.abs(h.y),g=Math.round((l+60)/120);if(g>this.statusArray.length){h.opacity=0;continue}h.opacity=255;var p=this.statusArray[g-1],d=p.rank,u=p.avatar,b=p.nickname,m=p.score;h.getComponent("Block").init(d,u,b,m)}}},update:function(n){this.statusBeGet&&(this.undateCount+=n,this.undateCount<this.updateDutation||(this.undateCount=0,this.getCurrentLine()))}}),cc._RF.pop()},{Common:"Common",net:"net"}],Reborn:[function(n,e,t){"use strict";cc._RF.push(e,"faf9bra/O1C6rUqHeQpUUcT","Reborn");var h=n("net"),l=n("Common");cc.Class({extends:cc.Component,properties:{score:{default:null,type:cc.Node},reborn_button:{default:null,type:cc.Node},reborn_price:{default:null,type:cc.Node},total_coin:{default:null,type:cc.Node},background:{default:null,type:cc.Node},noMoney:{default:null,type:cc.Node},enoughMoney:{default:null,type:cc.Node},pay_success:{default:null,type:cc.Node},canvas:{default:null,type:cc.Node},black:{default:null,type:cc.Node},cover:{default:null,type:cc.Node},uploading:{default:null,type:cc.Node}},onLoad:function(){},start:function(){this.uploading.active=!1,this.node.active=!1,this.noMoney.active=!1,this.enoughMoney.active=!1,this.pay_success.active=!1,this.background.active=!1,this.black.active=!1},showLabel:function(){this.unscheduleAllCallbacks();var n=l.reborn;cc.log("reborn:",n,h.room_id),null!=n?null!=h.room_id?1==n.revive?(this.score.getComponent("cc.Label").string=l.score,this.total_coin.getComponent("cc.Label").string=n.coin,l.rebornTime<4&&0!=n.subsection[l.rebornTime]?(this.node.active=!0,this.background.active=!0,this.enoughMoney.active=!0,this.black.active=!0,this.reborn_price.getComponent("cc.Label").string=n.subsection[l.rebornTime]):this.goDie()):this.goDie():this.scheduleOnce(function(){cc.find("Canvas/bg").getComponent("endbg").init()},1):this.goDie()},reborn:function(){var t=this,n=l.reborn;if(parseInt(n.coin)<parseInt(n.subsection[l.rebornTime]))return this.node.active=!0,this.black.active=!1,this.enoughMoney.active=!1,this.pay_success.active=!1,this.background.active=!0,void(this.noMoney.active=!0);var e=void 0,i=1,a="num="+l.rebornTime+"&room_id="+h.room_id+"&token="+h.token;if(1==l.SceneType){var o=hex_md5("YanQu"+a+"!qaz@wsx$");i=1,e=l.url+"/live_game/revive_post?token="+h.token+"&room_id="+h.room_id+"&num="+l.rebornTime+"&sign="+o}else if(12==l.SceneType||15==l.SceneType||11==l.SceneType){var c=h.getSignString(a),s=c[0];i=c[1],e=l.url+"/live_game/revive_post?token="+h.token+"&room_id="+h.room_id+"&num="+l.rebornTime+"&sign="+s}else{if(20!=l.SceneType&&21!=l.SceneType&&22!=l.SceneType)return void this.goDie();var r=hex_md5("YanQu"+a+"!qaz@wsx$");i=h.version,e=l.url+"/live_game/revive_post?token="+h.token+"&room_id="+h.room_id+"&num="+l.rebornTime+"&sign="+r}cc.log("reborn url:",e),axios.post(e,{},{headers:{AREA:h.AREA,"CLIENT-VERSION":i}}).then(function(n){cc.log(n);var e=n.data.data;null!=e?(l.reborn.coin=e.coin,1==e.is_pay?t.rebornSuccess():(t.node.active=!0,t.background.active=!0,t.noMoney.active=!0)):t.goDie()}).catch(function(n){})},rebornSuccess:function(){var n=this;cc.log("reborn success"),l.rebornTime+=1,this.background.active=!1,this.black.active=!1,this.noMoney.active=!1,this.enoughMoney.active=!1,this.pay_success.active=!0,this.pay_success.opacity=255,this.pay_success.runAction(cc.fadeOut(1)),this.scheduleOnce(function(){n.node.active=!1},1),cc.find("Canvas/player").getComponent("Player").rebornGame()},goDie:function(){this.uploading.active=!0,cc.find("Canvas/bg").getComponent("endbg").init()},update:function(n){}}),cc._RF.pop()},{Common:"Common",net:"net"}],Start:[function(n,e,t){"use strict";cc._RF.push(e,"afd9fxLy0dBZYJ9d6AAhfwt","Start");var i="GameScene",r=n("Common"),h=n("net");cc.Class({extends:cc.Component,properties:{button:{default:null,type:cc.Node},rankButton:{default:null,type:cc.Node},illustrate:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},rank:{default:null,type:cc.Node}},onLoad:function(){},start:function(){var n=this;this.rankButton.active=!1,this.button.active=!1,this.illustrate.active=!1,this.netload=!1,this.preload=!1,this.chooseEnv(),this.getInfo(),cc.director.preloadScene(i,function(){n.preload=!0,cc.log("preload success",n.preload,n.netload),n.netload&&(n.button.active=!0)})},chooseEnv:function(){if(null==h.type)if(null==h.token)void 0!==h.singletoken&&(this.rankButton.active=!0,1==h.env?r.url=h.url.appoffline:2==h.env?r.url=h.url.apppre:r.url=h.url.apponline,r.SceneType=10);else{if(1==h.env){var n=void 0;try{n=window.yanqu.getBrowerID()}catch(n){}r.url=h.url.appoffline,r.SceneType="yqbrower"==n?12:1}else r.SceneType=11,2==h.env?r.url=h.url.apppre:r.url=h.url.apponline;5==h.apptype&&(r.SceneType=15)}else 1==h.env?r.url=h.url.wxoffline:2==h.env?r.url=h.url.wxpre:r.url=h.url.wxonline,void 0!==h.singletoken&&(this.rankButton.active=!0,r.SceneType=10),3==h.type?r.SceneType=20:4==h.type?r.SceneType=21:5==h.type&&(r.SceneType=22);cc.log("scenetype:",r.SceneType)},getInfo:function(){var n,t=this,e="room_id="+h.room_id+"&token="+h.token,i=h.version,a=void 0;if(1==r.SceneType)a=hex_md5("YanQu"+e+"!qaz@wsx$"),i=1,h.AREA=1,this.transcend(a,i);else if(12==r.SceneType||15==r.SceneType||11==r.SceneType){var o=h.getSignString(e);a=o[0],i=o[1],h._version=i,this.transcend(a,i)}else if(20==r.SceneType||21==r.SceneType||22==r.SceneType)this.transcend();else if(10==r.SceneType)return this.netload=!0,void(this.preload&&(this.button.active=!0));n=r.url+"/live_game/revive?token="+h.token+"&room_id="+h.room_id+"&sign="+a,axios.post(n,{},{headers:{AREA:h.AREA,"CLIENT-VERSION":i}}).then(function(n){cc.log("start respose:",n);var e=n.data.data;r.reborn=e,t.netload=!0,t.preload&&(t.button.active=!0)}).catch(function(n){t.button.active=!0,cc.log(n)})},showIllustrate:function(){this.illustrate.active=!0},hideIllustrate:function(){this.illustrate.active=!1},loadScene:function(){cc.director.loadScene(i)},transcend:function(n,e){cc.log(n,e);var t,i=h.token,a=h.room_id,o=n;null==n&&(o=hex_md5("YanQu"+("room_id="+a+"&token="+i)+"!qaz@wsx$"));var c=h.AREA,s=e;null==e&&(s=h.version),t=r.url+"/live/section_rank_score?token="+i+"&room_id="+a+"&sign="+o,axios.post(t,{},{headers:{AREA:c,"CLIENT-VERSION":s}}).then(function(e){cc.log("rank:",e),Object.keys(e.data.data.rank).forEach(function(n){r.rank.push(e.data.data.rank[n])}),cc.log(r.rank)},this).catch(function(n){})},showRank:function(){this.rank.active=!0},hideRank:function(){this.rank.active=!1},hideButton:function(){alert(JSON.stringify(h))},update:function(n){this.loading.rotation+=2}}),cc._RF.pop()},{Common:"Common",net:"net"}],born:[function(n,e,t){"use strict";cc._RF.push(e,"0e1304gbjxOm5reEhv4eRuh","born");var i=n("Helpers");cc.Class({extends:cc.Component,properties:{monster_prefabs:{default:[],type:[cc.Prefab]},bullet_prefabs:{default:[],type:[cc.Prefab]},boss:cc.Prefab},addSpawnMonster:function(){var n=i.getRandomInt(0,this.monster_prefabs.length),e=cc.instantiate(this.monster_prefabs[n]);e.parent=this.node,e.position=this.getRandomPosition()},addSpawnBullet:function(){var n=i.getRandomInt(0,this.bullet_prefabs.length),e=cc.instantiate(this.bullet_prefabs[n]);e.parent=this.node,e.position=this.getRandomPosition()},addSpawnboss:function(){var n=cc.instantiate(this.boss);n.parent=this.node,n.position=this.getRandomPosition()},onLoad:function(){this.bornGeneration=1,this.spawnBullet(),this.spawnBoss(),this.spawnMonster(),this.gameDifficulty()},spawnMonster:function(){var n=this;this.addSpawnMonster(),this.scheduleOnce(function(){n.spawnMonster()},.7*this.bornGeneration)},spawnBullet:function(){var n=this;this.addSpawnBullet(),this.scheduleOnce(function(){n.spawnBullet()},10*this.bornGeneration)},spawnBoss:function(){var n=this;this.addSpawnboss(),this.scheduleOnce(function(){n.spawnBoss()},20*this.bornGeneration)},getRandomPosition:function(){return cc.p(640*Math.random(),1e3)},gameDifficulty:function(){var n=this;this.bornGeneration<.5||(this.bornGeneration-=.1,this.scheduleOnce(function(){n.gameDifficulty()},20))}}),cc._RF.pop()},{Helpers:"Helpers"}],boss:[function(n,e,t){"use strict";cc._RF.push(e,"f56cfqjRGpL0rZYVACbd3UG","boss");var i=n("Common");function a(n,e){return Math.floor(Math.random()*(e-n))+n}cc.Class({extends:cc.Component,properties:{speed:cc.v2(0,0),life:1},onLoad:function(){this.speed.x=a(-100,100),this.speed.y=a(0,100),this.schedule(this.addl,1)},addl:function(){var i=this;cc.loader.loadRes("zidana",function(n,e){var t=cc.instantiate(e);i.node&&(t.parent=i.node,t.position=cc.p(0,0))})},onCollisionEnter:function(n,e){this.life-=1,0===this.life&&this.bomb()},bomb:function(){var n=this.getComponent(cc.Animation);n.play(),n.on("stop",this.onStop,this)},onStop:function(){i.score+=50,this.node.destroy()},update:function(n){Global.isPause||(this.node.x+=this.speed.x*n,this.node.y-=this.speed.y*n,this.node.x<0&&(this.node.x=640),640<this.node.x&&(this.node.x=0))}}),cc._RF.pop()},{Common:"Common"}],bulletProperty:[function(n,e,t){"use strict";function i(n,e){return Math.floor(Math.random()*(e-n))+n}cc._RF.push(e,"540baRoadhO5rUqiWHU3ATn","bulletProperty"),cc.Class({extends:cc.Component,properties:{speed:cc.v2(0,0)},onLoad:function(){this.speed.x=i(-100,100),this.speed.y=i(100,200)},onCollisionEnter:function(n,e){this.onStop()},onStop:function(){this.node.destroy()},update:function(n){0==Global.isPause&&(this.node.x+=this.speed.x*n,this.node.y-=this.speed.y*n,this.node.x<0&&(this.node.x=640),640<this.node.x&&(this.node.x=0))}}),cc._RF.pop()},{}],button:[function(n,e,t){"use strict";cc._RF.push(e,"c4582MV0g5H6b9hKyjSDlf+","button"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on("bomb",this.log,this)}}),cc._RF.pop()},{}],chaoyue:[function(n,e,t){"use strict";cc._RF.push(e,"dac14T8vEdKfIF9sWiJLknA","chaoyue");var o=n("Common");cc.Class({extends:cc.Component,properties:{transcendPrefab:cc.Prefab,scoreLabel:{default:null,type:cc.Label}},onLoad:function(){if(cc.log("chao yue scenetype ",o.SceneType,o.rank),(11===o.SceneType||12===o.SceneType||20===o.SceneType||1==o.SceneType)&&0!=o.rank.length){this._ranking=o.rank.length,this.transcendFunc();var n=cc.instantiate(this.transcendPrefab);this.node.addChild(n),n.opacity=0,n.getComponent("transcend").init(o.rank[this._ranking-1].avatar,o.rank[this._ranking-1].rank)}},start:function(){},transcendFunc:function(){cc.log("数据",o.rank),this.schedule(this.detectionScore,3)},detectionScore:function(){for(var n=o.rank,e=this.scoreLabel.string,t=0;t<n.length;t++)if(Number(e)>Number(n[t].score)&&(cc.log(e,n[t].score,t),this._ranking>t)){var i=cc.instantiate(this.transcendPrefab);this.node.addChild(i),i.setPosition(cc.v2(0,0)),i.opacity=0,i.getComponent("transcend").init(o.rank[t].avatar,o.rank[t].rank);var a=cc.sequence(cc.fadeTo(.5,0),cc.fadeTo(0,255),cc.fadeTo(1,255),cc.spawn(cc.moveBy(1,cc.v2(0,80)),cc.fadeTo(1,0)));return i.runAction(a),this._ranking=t,void(0==this._ranking&&this.unscheduleAllCallbacks())}}}),cc._RF.pop()},{Common:"Common"}],endScene:[function(n,e,t){"use strict";cc._RF.push(e,"2ea37nY1YVBfqFRndVtALlN","endScene");var i=n("Common");cc.Class({extends:cc.Component,properties:{score:cc.Label},onLoad:function(){this.score.string="本次得分："+i.score},turn:function(){cc.director.loadScene("StartScene")},start:function(){}}),cc._RF.pop()},{Common:"Common"}],endbg:[function(n,e,t){"use strict";cc._RF.push(e,"b0123F/GzdDoYtgcFawA/yh","endbg");var h=n("Common"),l=n("net");cc.Class({extends:cc.Component,properties:{Camera:cc.Node,hongbao:cc.Node,putong:cc.Node,weixing:cc.Node,weixinhelp:cc.Node,team:cc.Node,score:cc.Label},onLoad:function(){cc.log("net",l),this.weixinhelp.active=!1,this.node.active=!1,this.putong.active=!1,this.hongbao.active=!1,this.weixing.active=!1,this.team.active=!1},init:function(){this.node.zIndex=2,this.node.active=!0,10===h.SceneType?(this.weixing.active=!0,this.putongRank()):11===h.SceneType||12===h.SceneType||1===h.SceneType?(this.hongbao.active=!0,this.hongBao()):20===h.SceneType?(this.weixing.active=!0,this.wechat()):21===h.SceneType?(this.weixinhelp.active=!0,this.wechathelp()):22===h.SceneType||15===h.SceneType?(this.team.active=!0,this.teamend()):(this.putong.active=!0,this.score.string="本次得分："+h.score)},start:function(){},putongRank:function(){var n=h.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=n;var e,t=l.singletoken,i=l.AREA,a="game_id="+h.GameId+"&score="+n+"&token="+t,o=hex_md5("YanQu"+a+"!qaz@wsx$"),c=l.version;e=h.url+"/game/single_push_data?token="+t+"&game_id="+h.GameId+"&score="+n+"&sign="+o,cc.log(e),axios.post(e,{},{headers:{AREA:i,"CLIENT-VERSION":c}}).then(function(n){cc.log(n);var e=n.data.code;if(cc.log("code:",e),400404==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="无该活动信息，请重试~";else if(400502==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="活动房间类型错误";else if(400507==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="游戏时间已结束，不能参与游戏";else if(200==e){10==h.SceneType?cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="":cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="排名越高，奖金越多";var t=n.data.data.rank,i=n.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,i===t[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,i===t[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,i===t[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(n){cc.log(n)})},hongBao:function(){var n=h.score;cc.find("Canvas/bg/hongbao/score").getComponent("cc.Label").string=n;var e,t=l.token,i=l.room_id,a=l.AREA,o=(l.env,"room_id="+i+"&score="+n+"&token="+t),c=void 0,s=void 0;try{var r=window.yanqu.getSignString(o);c=JSON.parse(r).sign.sign,s=JSON.parse(r).header.VERSION}catch(n){}1===h.SceneType&&(c=hex_md5("YanQu"+o+"!qaz@wsx$")),e=h.url+"/live_game/push_data?token="+t+"&score="+n+"&room_id="+i+"&sign="+c,axios.post(e,{},{headers:{AREA:a,"CLIENT-VERSION":s}}).then(function(n){cc.log("返回信息：",n);var e=n.data.code;if(400404==e)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="无该活动信息，请重试~";else if(400502==e)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="活动房间类型错误";else if(400507==e)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="游戏时间已结束，不能参与游戏";else if(200==e){cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="";var t=n.data.data.rank_list,i=n.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,i===t[0].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,i===t[1].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,i===t[2].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(n){cc.log(n)})},wechat:function(){var n=h.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=n;var e,t=l.token,i=l.room_id,a=l.AREA,o=hex_md5("YanQu"+("room_id="+i+"&score="+n+"&token="+t)+"!qaz@wsx$"),c=l.version;e=h.url+"/live_game/push_data?token="+t+"&score="+n+"&room_id="+i+"&sign="+o,cc.log(e),axios.post(e,{},{headers:{AREA:a,"CLIENT-VERSION":c}}).then(function(n){cc.log(n);var e=n.data.code;if(cc.log("code:",e),400404==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="无该活动信息，请重试~";else if(400502==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="活动房间类型错误";else if(400507==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="游戏时间已结束，不能参与游戏";else if(200==e){cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="排名越高，奖金越多";var t=n.data.data.rank_list,i=n.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,i===t[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,i===t[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,i===t[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(n){cc.log(n)})},wechathelp:function(){var n,e=l.token,t=l.room_id,i=l.AREA,a="help_score="+h.score+"&room_id="+t+"&token="+e+"&user_id="+l.helpuid,o=hex_md5("YanQu"+a+"!qaz@wsx$");n=h.url+"/live_game/push_data?token="+e+"&help_score="+h.score+"&room_id="+t+"&user_id="+l.helpuid+"&sign="+o;var c=l.version;cc.log(n,"PPPPP"),axios.post(n,{},{headers:{AREA:i,"CLIENT-VERSION":c}}).then(function(n){cc.log(n);var e=n.data.code;if(400404==e)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="无该活动信息，请重试~";else if(400502==e)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="活动房间类型错误";else if(400507==e)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="游戏时间已结束，不能参与游戏";else if(200==e){cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="";var t=n.data.data.rank_list,i=n.data.data.current_rank,a=n.data.data.max_help_score;console.log("head",t),cc.find("Canvas/bg/help_weixin/score").getComponent(cc.Label).string=h.score,cc.find("Canvas/bg/help_weixin/help_score").getComponent(cc.Label).string="最高助力成绩 "+a+" 分",t[0]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,i===t[0].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,i===t[1].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,i===t[2].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==e){var o=n.data;cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string=""+o.message}}).catch(function(n){cc.log(n)})},teamend:function(){cc.log("team");var n,e=l.token,t=l.room_id,i=l.AREA,a="room_id="+t+"&score="+h.score+"&token="+e,o=hex_md5("YanQu"+a+"!qaz@wsx$");n=h.url+"/live_game/push_data?token="+e+"&score="+h.score+"&room_id="+t+"&sign="+o;var c=l.version;cc.log(n,"PPPPP"),axios.post(n,{},{headers:{AREA:i,"CLIENT-VERSION":c}}).then(function(n){cc.log(n);var e=n.data.code;if(400404==e)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="无该活动信息，请重试~";else if(400502==e)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="活动房间类型错误";else if(400507==e)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="游戏时间已结束，不能参与游戏";else if(200==e){cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="排名越高，奖金越多";var t=n.data.data.rank_list,i=n.data.data.current_rank,a=n.data.data.max_score;console.log("head",t),cc.find("Canvas/bg/team/score").getComponent(cc.Label).string=h.score,cc.find("Canvas/bg/team/help_score").getComponent(cc.Label).string="最高个人成绩 "+a+" 分",t[0]&&(cc.find("Canvas/bg/team/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,i===t[0].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/team/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,i===t[1].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/team/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,i===t[2].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==e){var o=n.data;cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string=""+o.message}}).catch(function(n){cc.log(n)})},turn:function(){h.score=0,h.rebornTime=1,Global.isPause=!1,cc.director.loadScene("GameScene")},moregames:function(){wx.miniProgram.navigateTo({url:"/pages/empty/empty"})}}),cc._RF.pop()},{Common:"Common",net:"net"}],monster:[function(n,e,t){"use strict";cc._RF.push(e,"9b0ffdITkpJMajkV1R8NKp+","monster");var i=n("Common");function a(n,e){return Math.floor(Math.random()*(e-n))+n}cc.Class({extends:cc.Component,properties:{speed:cc.v2(0,0),life:1},onLoad:function(){this.speed.x=a(-100,100),this.speed.y=a(100,200),this.i=0},onCollisionEnter:function(n,e){this.life-=1,0===this.life&&this.bomb()},bomb:function(){var n=this.getComponent(cc.Animation);n.play(),n.on("stop",this.onStop,this)},onStop:function(){i.score+=1,this.node&&this.node.destroy()},update:function(n){0==Global.isPause&&(this.i+=n,this.node.x+=this.speed.x*n,this.node.y-=this.speed.y*n,this.i<=60?this.node.y-=this.speed.y*n:60<=this.i&&this.i<=600?this.node.y-=this.speed.y*n+2:this.node.y-=this.speed.y*n+4,this.node.x<-100&&(this.node.x=820),820<this.node.x&&(this.node.x=-100),this.node.y<-1e3&&this.node.destroy())}}),cc._RF.pop()},{Common:"Common"}],net:[function(n,e,t){"use strict";cc._RF.push(e,"62e73sDA6dOGolthqoGzpA1","net");var i=function(){var n=window.location.search,e=new Object;if(-1!=n.indexOf("?"))for(var t=n.substr(1),i=t.split("&"),a=0;a<i.length;a++)e[i[a].split("=")[0]]=i[a].split("=")[1];return e}();var a={token:i.token,room_id:i.room_id,AREA:i.AREA,env:i.env,type:i.type,version:i.version,helpuid:i.helpuid,teamid:i.teamid,apptype:i.apptype,singletoken:i.singletoken,url:{wxoffline:"http://applet.dialect-tv.test",wxpre:"https://yfbapplet.dialect-tv.com",wxonline:"https://applet.dialect-tv.com",appoffline:"http://api.dialect-tv.test",apppre:"http://pre.api.dialect-tv.com",apponline:"http://api.dialect-tv.com"},getSignString:function(n){var e=[];try{var t=window.yanqu.getSignString(n),i=JSON.parse(t).sign.sign,a=JSON.parse(t).header.VERSION;e.push(i),e.push(a)}catch(n){}return e}};e.exports=a,cc._RF.pop()},{}],transcend:[function(n,e,t){"use strict";cc._RF.push(e,"1733epIf0tDcJUub+NHiTbT","transcend"),cc.Class({extends:cc.Component,properties:{num:cc.Label,img:cc.Sprite},start:function(){this.texture=null},init:function(n,e){var i=this;cc.log(n,e);var t="http://image.dialect-tv.com/"+n;cc.log("url: ",t),cc.loader.load(t,function(n,e){if(n)cc.log(n);else{i.texture=e;var t=new cc.SpriteFrame(e);i.img.spriteFrame=t}}),this.num.string="第"+e+"名",this.scheduleOnce(function(){this.onStop()},2)},onStop:function(){cc.loader.release(this.texture),this.texture=null,this.node.destroy()}}),cc._RF.pop()},{}]},{},["Bg","Bullet","Common","GameScene","Helpers","Player","born","boss","bulletProperty","button","endScene","monster","Block","Rank","Start","chaoyue","transcend","endbg","net","Reborn"]);