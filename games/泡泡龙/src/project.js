require=function o(c,s,l){function r(t,n){if(!s[t]){if(!c[t]){var e="function"==typeof require&&require;if(!n&&e)return e(t,!0);if(h)return h(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var i=s[t]={exports:{}};c[t][0].call(i.exports,function(n){var e=c[t][1][n];return r(e||n)},i,i.exports,o,c,s,l)}return s[t].exports}for(var h="function"==typeof require&&require,n=0;n<l.length;n++)r(l[n]);return r}({Animation:[function(n,e,t){"use strict";cc._RF.push(e,"77c5aQ61LBCJru5OLItIKeg","Animation"),cc.Class({extends:cc.Component,properties:{},start:function(){var n=this;this.scheduleOnce(function(){n.node.destroy()},.3)}}),cc._RF.pop()},{}],Ball:[function(n,e,t){"use strict";cc._RF.push(e,"b705bPW+tJPgqYBeW1llT2/","Ball");var a=n("Common");cc.Class({extends:cc.Component,properties:{wall:{default:null,type:cc.Node},destroy_animation:{default:null,type:cc.Prefab},star_particle:{default:[],type:cc.Prefab},collide_audio:{default:null,url:cc.AudioClip},break_audio:{default:null,url:cc.AudioClip}},onLoad:function(){this.ballfired=!1,this.moveX=0,this.moveY=0,this.speed=0,this.g=.5,this.drop=!1,this.play=null,this.dropDirection=0,this.ballBoomed=!1},start:function(){this.score=cc.find("Canvas/score/label").getComponent("cc.Label")},onCollisionEnter:function(n,e){"ball"===n.node.group?this.ballCollision(n,e):"border"===n.node.group&&this.borderCollision(n,e)},ballCollision:function(n,e){if(this.wall=cc.find("Canvas/wall"),this.play=this.wall.getComponent("Play"),!n.node.getComponent("Ball").drop&&this.ballfired){this.ballfired=!1,this.play.ballOnFire=!1;var t=n.node.getBoundingBoxToWorld(),a=e.node.getBoundingBoxToWorld(),i=cc.v2(a.x-t.x,a.y-t.y),o=cc.radiansToDegrees(cc.pToAngle(i)),c=n.node.row,s=n.node.col;o<-150?(this.node.row=c,this.node.col=s-1):o<-90?(c%2==0||0===s||(s-=1),this.node.row=c-1,this.node.col=s):o<-30?(this.node.row=c-1,this.node.col=s+1,this.node.row%2==0&&(this.node.col-=1)):o<30?(this.node.row=c,this.node.col=s+1):o<90?(c%2==0&&(s+=1),this.node.row=c+1,this.node.col=s):(o<150?(c%2==0&&(s+=1),this.node.row=c+1):this.node.row=c,this.node.col=s-1),this.node.row%2==1?7<this.node.col&&(this.node.col=7):6<this.node.col&&(this.node.col=6),this.play.addBallToBalls(e.node)}},borderCollision:function(n,e){this.wall=cc.find("Canvas/wall"),this.play=this.wall.getComponent("Play"),"topBorder"===n.node.name?this.ballfired&&this.play.addTopBallToBalls(e.node):"bottomBorder"==n.node.name?"dropball"==this.node.group?(a.score+=10,this.score.string=a.score,this.drop=!1,this.ballBoom()):this.ballfired||this.play.gameEnd():(cc.audioEngine.play(this.collide_audio,!1,1),this.moveX*=-1)},ballFire:function(n){this.ballfired=!0,this.moveX=n.x,this.moveY=n.y},ballFiveBoom:function(){var n=cc.instantiate(this.destroy_animation);n.setPosition(this.node.x,this.node.y),this.node.parent.addChild(n);var e=cc.instantiate(this.star_particle[1]);e.setPosition(this.node.x,this.node.y),this.node.parent.addChild(e),this.node.destroy()},ballFourBoom:function(){var n=cc.instantiate(this.destroy_animation);n.setPosition(this.node.x,this.node.y),this.node.parent.addChild(n);var e=cc.instantiate(this.star_particle[0]);e.setPosition(this.node.x,this.node.y),this.node.parent.addChild(e),this.node.destroy()},ballBoom:function(){var n=cc.instantiate(this.destroy_animation);n.setPosition(this.node.x,this.node.y),this.node.parent.addChild(n),this.node.destroy()},dropBall:function(){this.drop=!0,this.node.group="dropball",this.dropDirection=2*Math.random(),.5<Math.random()?this.dropDirection*=-1:this.dropDirection*=1},ballAction:function(n,e){var t=cc.sequence(cc.moveBy(.2,cc.v2(2,0)),cc.moveBy(.2,cc.v2(-2,0)));this.node.runAction(t)},update:function(n){this.ballBoomed||(this.ballfired&&(this.node.x+=this.moveX,this.node.y+=this.moveY),this.drop&&(this.node.x+=this.dropDirection,this.node.y-=this.speed,this.speed+=this.g))}}),cc._RF.pop()},{Common:"Common"}],Block:[function(n,e,t){"use strict";cc._RF.push(e,"7678faPbyJLrph1RxP8mctM","Block");var o=n("Common");cc.Class({extends:cc.Component,properties:{rankLabel:{default:null,type:cc.Label},userIcon:{default:null,type:cc.Sprite},userInfo:{default:null,type:cc.Node},userName:{default:null,type:cc.Label},score:{default:null,type:cc.Label}},start:function(){},init:function(n,e,t,a){var i=this;cc.log("block init",n,t),this.rankLabel.string=n,this.rankLabel.node.color="1"==n?new cc.Color(255,0,0,255):"2"==n?new cc.Color(255,102,0,255):"3"==n?new cc.Color(255,204,0,255):new cc.Color(255,255,255,255),this.userName.string=t,this.score.string=a,""==e||(cc.log("load pic",o.url+"/"+e),cc.loader.load("http://image.dialect-tv.com/"+e,function(n,e){n&&console.error(n),i.userIcon.spriteFrame=new cc.SpriteFrame(e)}))}}),cc._RF.pop()},{Common:"Common"}],Common:[function(n,e,t){"use strict";cc._RF.push(e,"f7f14lzX3ZEcK8fLwzRTEdh","Common");e.exports={score:0,SceneType:0,reborn:{},rebornTime:1,GameId:31,url:"",rank:[]},cc._RF.pop()},{}],Game:[function(n,e,t){"use strict";cc._RF.push(e,"c9479v41rhIyaCWwUBJlWat","Game"),cc.Class({extends:cc.Component,properties:{wall:{default:null,type:cc.Node},shooter:{default:null,type:cc.Node},paos:{default:null,type:cc.Node}},onLoad:function(){cc.director.getCollisionManager().enabled=!0},start:function(){this.play=this.wall.getComponent("Play"),this.setInputControl()},setInputControl:function(){var c=this;this.node.on(cc.Node.EventType.TOUCH_START,function(n){var e=n.touch._point.x;e-=c.node.width/2;var t=n.touch._point.y;(t-=c.node.height/2)<-290&&(t=-290);var a=c.shooter,i=cc.v2(e-a.x,t-a.y),o=cc.pToAngle(i);c.paos.rotation=90-cc.radiansToDegrees(o)}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(n){var e=n.touch._point.x;e-=c.node.width/2;var t=n.touch._point.y;(t-=c.node.height/2)<-290&&(t=-290);var a=c.shooter,i=cc.v2(e-a.x,t-a.y),o=cc.pToAngle(i);c.paos.rotation=90-cc.radiansToDegrees(o)}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(n){}),this.node.on(cc.Node.EventType.TOUCH_END,function(n){var e=n.touch._point.x;e-=c.node.width/2;var t=n.touch._point.y;(t-=c.node.height/2)<-290&&(t=-290);var a=c.shooter,i=cc.v2(e-a.x,t-a.y),o=cc.pToAngle(i);c.paos.rotation=90-cc.radiansToDegrees(o),c.play.ballFire(o)})},update:function(n){}}),cc._RF.pop()},{}],Play:[function(n,e,t){"use strict";cc._RF.push(e,"2b6a8cWPeZKG4/3J8RKFGaO","Play");var o=n("Common");cc.Class({extends:cc.Component,properties:{ballPrefab:{default:null,type:cc.Prefab},balls_father:{default:null,type:cc.Node},shooter:{default:null,type:cc.Node},cover:{default:null,type:cc.Node},score:{default:null,type:cc.Label},ball_sprites:{default:[],type:cc.Sprite},paos_anim:{default:null,type:cc.Animation},handsNode:{default:null,type:cc.Node},end_audio:{default:null,url:cc.AudioClip},ballFire_audio:{default:null,url:cc.AudioClip},collide_audio:{default:null,url:cc.AudioClip},break_audio:{default:null,url:cc.AudioClip}},onLoad:function(){this.onAddLine=!1,this.ballOnFire=!1,this.cover.active=!1,this.initLine=15,this.balls=[],this.ballWidth=this.node.width/8,this.addLineCount=0,this.addLineDuration=15,this.currentShootBall=null,this.nextShootBallPositionX=this.shooter.x-170,this.nextShootBallPositionY=this.shooter.y+15,this.nextShootBall=null,this.fireSpeed=25,this.cleanBallsArr=[],this.linkedBallsArr=[],this.checkBalls=[]},start:function(){this.handsNode.zIndex=2,this.init(),this.initScheduler()},init:function(){this.addInitLine(),this.addLine(this.initLine+2),this.currentShootBall=this._spawnShooter(cc.v2(this.shooter.x,this.shooter.y)),this.currentShootBall.getComponent("cc.CircleCollider").enabled=!1,this.nextShootBall=this._spawnShooter(cc.v2(this.nextShootBallPositionX,this.nextShootBallPositionY)),this.nextShootBall.getComponent("cc.CircleCollider").enabled=!1},addInitLine:function(){for(var n=[[0,0,0,1,1,2,2,2],[0,0,1,1,1,2,2]],e=0;e<n.length;e++){for(var t=n[e],a=[],i=0;i<t.length;i++){var o=this._spawnBall(e+this.initLine,i,t[i]);a.push(o)}this.balls[e+this.initLine]=a,this.balls_father.x=-this.node.width/2,this.balls_father.y=this.node.height/2-((e-this.initLine)*this.ballWidth*.866+this.ballWidth/2)}},rowColToPosition:function(n,e){if(n%2==0){var t=.866*(n-this.initLine)*this.ballWidth,a=(e+1)*this.ballWidth;return cc.v2(a,t)}var i=.866*(n-this.initLine)*this.ballWidth,o=e*this.ballWidth+this.ballWidth/2;return cc.v2(o,i)},_spawnBall:function(n,e,t){var a=this.rowColToPosition(n,e),i=cc.instantiate(this.ballPrefab);i.zIndex=1;var o=null;o=t<0?this.ball_sprites[[Math.floor(cc.random0To1()*this.ball_sprites.length)]]:this.ball_sprites[t],i._name=o.node.name,i.getComponent(cc.Sprite).spriteFrame=o.spriteFrame;var c=i.getComponent("Ball");return i.row=n,i.col=e,c.ballfired=!1,i.width=this.ballWidth,i.height=this.ballWidth,i.setPosition(a),this.balls_father.addChild(i),i},_spawnShooter:function(n){var e=cc.instantiate(this.ballPrefab),t=this.ball_sprites[[Math.floor(cc.random0To1()*this.ball_sprites.length)]];return e._name=t.node.name,e.getComponent(cc.Sprite).spriteFrame=t.spriteFrame,e.width=this.ballWidth,e.height=this.ballWidth,e.setPosition(n),this.node.addChild(e),e},addLine:function(n){var e=0;e=n%2==0?7:8;for(var t=[],a=0;a<e;a++){var i=this._spawnBall(n,a,-1);t.push(i)}this.balls[n]=t,this.balls_father.x=-this.node.width/2,this.balls_father.y=this.node.height/2-((n-this.initLine)*this.ballWidth*.866+this.ballWidth/2)},initScheduler:function(){var n=this;this.scheduleOnce(function(){n.onAddLine=!0,n.initScheduler(),10<n.addLineDuration&&(n.addLineCount++,3<n.addLineCount&&(n.addLineCount=0,n.addLineDuration-=1)),cc.log(n.addLineDuration)},this.addLineDuration)},ballFire:function(n){cc.audioEngine.play(this.ballFire_audio,!1,.5),this.paos_anim.play("pao"),this.ballOnFire=!0,this.cover.active=!0;var e=cc.pRotateByAngle(cc.v2(this.fireSpeed,0),cc.v2(0,0),n),t=this.currentShootBall.getComponent("Ball");t.ballFire(e),t.ballfired=!0,this.currentShootBall.getComponent("cc.CircleCollider").enabled=!0},ballRreload:function(){var n=this;this.currentShootBall=this.nextShootBall;var e=cc.moveTo(.1,cc.v2(this.shooter.x,this.shooter.y));this.nextShootBall.runAction(e),this.scheduleOnce(function(){n.nextShootBall=n._spawnShooter(cc.v2(n.nextShootBallPositionX,n.shooter.y)),n.nextShootBall.getComponent("cc.CircleCollider").enabled=!1},.1),this.cover.active=!1},addBallToBalls:function(e){var t=this;cc.audioEngine.play(this.collide_audio,!1,1),e.removeFromParent();var n=e.getComponent("Ball"),a=e.row,i=e.col;n.ballfired=!1,e.setPosition(this.rowColToPosition(a,i)),this.balls_father.addChild(e),void 0===this.balls[a]&&(this.balls[a]=[]),this.balls[a][i]=e,this.scheduleOnce(function(){var n=t.judgeSameConnectBallAndCleanBalls(e);t.cleanBallsContent(n)&&t.judgeBallDrop(),t.scheduleOnce(function(){t.ballRreload()},.1)},.1)},addTopBallToBalls:function(e){var t=this;e.removeFromParent();for(var n=this.balls[this.balls.length-1],a=900,i=0,o=e.x+this.node.width/2,c=0;c<n.length;c++){var s=this.rowColToPosition(this.balls.length-1,c).x;a>Math.abs(s-o)&&(a=Math.abs(s-o),i=c)}e.row=this.balls.length-1,e.col=i,(this.balls[this.balls.length-1][i]=e).setPosition(this.rowColToPosition(this.balls.length-1,i)),e.getComponent("Ball").ballfired=!1,this.balls_father.addChild(e),this.scheduleOnce(function(){var n=t.judgeSameConnectBallAndCleanBalls(e);t.cleanBallsContent(n)&&t.judgeBallDrop(),t.scheduleOnce(function(){t.ballRreload()},.1)},.1)},cleanBallsContent:function(n){if(2<n.length){var e=n.length;o.score+=(5*(e-3)+10)*e,this.score.string=o.score;for(var t=0;t<n.length;t++){var a=n[t][0],i=n[t][1];4<e?this.balls[a][i].getComponent("Ball").ballFiveBoom():3<e?this.balls[a][i].getComponent("Ball").ballFourBoom():this.balls[a][i].getComponent("Ball").ballBoom(),this.balls[a][i]=null}return this.cleanBallsArr.splice(0,this.cleanBallsArr.length),!0}return this.cleanBallsArr.splice(0,this.cleanBallsArr.length),!1},judgeSameConnectBallAndCleanBalls:function(n){if(this.addCleanBallToCleanBallsArr(n)){for(var e=n.name,t=n.row,a=n.col,i=0;i<6;i++){var o=null;0===i?o=this.judgeBallExistInBalls(t,a-1):1===i?o=t%2==0?this.judgeBallExistInBalls(t+1,a):this.judgeBallExistInBalls(t+1,a-1):2===i?o=t%2==0?this.judgeBallExistInBalls(t+1,a+1):this.judgeBallExistInBalls(t+1,a):3===i?o=this.judgeBallExistInBalls(t,a+1):4===i?o=t%2==0?this.judgeBallExistInBalls(t-1,a+1):this.judgeBallExistInBalls(t-1,a):5===i&&(o=t%2==0?this.judgeBallExistInBalls(t-1,a):this.judgeBallExistInBalls(t-1,a-1)),null!==o&&(o._name===e&&this.judgeSameConnectBallAndCleanBalls(o))}return this.cleanBallsArr}},judgeBallExistInBalls:function(n,e){return void 0===this.balls[n]?null:void 0===this.balls[n][e]?null:this.balls[n][e]},addCleanBallToCleanBallsArr:function(n){for(var e=0;e<this.cleanBallsArr.length;e++)if(this.cleanBallsArr[e][0]===n.row&&this.cleanBallsArr[e][1]===n.col)return!1;return this.cleanBallsArr.push([n.row,n.col]),!0},judgeBallDrop:function(){this.loopBallsFromBottom(),this.checkBalls=[]},loopBallsFromBottom:function(){for(var n=0;n<this.balls.length;n++)if(null==this.balls[n]);else{var e=this.balls[n];for(var t in e)if(null==e[t]);else{var a=[],i={linked:!1};if(this.getLinkedBalls(e[t],a,i),i.linked);else for(var o=0;o<a.length;o++){var c=a[o];c.getComponent("Ball").dropBall(),this.balls[c.row][c.col]=null}}}},getLinkedBalls:function(n,e,t){if(-1==e.indexOf(n)&&-1==this.checkBalls.indexOf(n)){n.row==this.balls.length-1&&(t.linked=!0),e.push(n),this.checkBalls.push(n);for(var a=n.row,i=n.col,o=0;o<6;o++){var c=null;if(0===o)if(a%2==0){var s=this.judgeBallExistInBalls(a+1,i);null==s||(c=s)}else{var l=this.judgeBallExistInBalls(a+1,i-1);null==l||(c=l)}else if(1===o)if(a%2==0){var r=this.judgeBallExistInBalls(a+1,i+1);null==r||(c=r)}else{var h=this.judgeBallExistInBalls(a+1,i);null==h||(c=h)}else if(2===o){var d=this.judgeBallExistInBalls(a,i+1);null==d||(c=d)}else if(3===o)if(a%2==0){var g=this.judgeBallExistInBalls(a-1,i+1);null==g||(c=g)}else{var u=this.judgeBallExistInBalls(a-1,i);null==u||(c=u)}else if(4===o)if(a%2==0){var p=this.judgeBallExistInBalls(a-1,i);null==p||(c=p)}else{var b=this.judgeBallExistInBalls(a-1,i-1);null==b||(c=b)}else if(5===o){var f=this.judgeBallExistInBalls(a,i-1);null==f||(c=f)}null==c||this.getLinkedBalls(c,e,t)}}},gameEnd:function(){cc.audioEngine.stopAll(),cc.audioEngine.play(this.end_audio,!1,1),this.cover.active=!0,this.unscheduleAllCallbacks();for(var n=this.balls_father.children,e=0;e<n.length;e++)0==e&&cc.log(n[e].getComponent(cc.Sprite)),n[e].getComponent(cc.Sprite)._sgNode.setState(1);this.scheduleOnce(function(){cc.find("Canvas/bg").getComponent("endbg").init()},1)},update:function(n){this.onAddLine&&(this.ballOnFire||(this.addLine(this.balls.length),this.onAddLine=!1))}}),cc._RF.pop()},{Common:"Common"}],Rank:[function(n,e,t){"use strict";cc._RF.push(e,"a85ca6+unNLWaN7ujmWKgFm","Rank");var l=n("net"),r=n("Common");cc.Class({extends:cc.Component,properties:{block_pre:{default:null,type:cc.Prefab},content:{default:null,type:cc.Node},self:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},itemHeight:120},start:function(){10==r.SceneType?(this.loading.opacity=0,this.undateCount=0,this.updateDutation=.2,this.content.height=0,this.directionDown=!0,this.lastContentY=0,this.currentPage=1,this.showIndex=2,this.showLineNum=12,this.statusArray=[],this.blockArr=[],this.getStatus(this.currentPage),this.statusBeGet=!1,this.rankDied=!1,this.node.active=!1):this.node.destroy()},init:function(){this.lastContentY=this.content.y;var n=this.statusArray.length;12<n&&(n=12);for(var e=0;e<n;++e){var t=this.statusArray[e],a=t.rank,i=t.avatar,o=t.nickname,c=t.score,s=this.spawnBlock();this.content.addChild(s),s.setPosition(0,-this.itemHeight*(.5+e)),e%2==0&&(s.getChildByName("bg").opacity=0),s.getComponent("Block").init(a,i,o,c),this.blockArr.push(s)}},addRank:function(){this.rankDied||(cc.log("add rank"),this.getStatus(this.currentPage+1))},getStatus:function(a){var i=this,n=l.AREA,e=l.version,t=l.singletoken;cc.log(n,e);var o=r.GameId,c=hex_md5("YanQu"+("game_id="+o+"&page="+a+"&token="+t)+"!qaz@wsx$"),s=r.url+"/game/single_rank_all?token="+t+"&game_id="+o+"&page="+a+"&sign="+c;cc.log(s),axios.post(s,{},{headers:{AREA:n,"CLIENT-VERSION":e}}).then(function(n){cc.log(n);for(var e=n.data.data.rank_list,t=0;t<e.length;t++)i.statusArray.push(e[t]);i.currentPage=a,i.statusControl(n.data.data.current),i.content.height+=e.length*i.itemHeight,e.length<20&&(i.rankDied=!0),i.loading.opacity=0},this).catch(function(n){cc.log(n)})},statusControl:function(n){this.statusBeGet=!0,1==this.currentPage?(this.init(),this.initSelf(n)):this.refreshRank()},initSelf:function(n){cc.log("self data:",n);var e=n.rank,t=n.avatar,a=n.nickname,i=n.score,o=this.spawnBlock();o.getComponent("Block").init(e,t,a,i),this.self.addChild(o),cc.log(this.self)},spawnBlock:function(){return cc.instantiate(this.block_pre)},scrollEvent:function(n,e){1==e&&(cc.log("scroll bottom"),this.refreshRank())},refreshRank:function(){for(var n=0;n<this.blockArr.length;n++){var e=this.blockArr[n],t=Math.abs(e.y),a=Math.round((t+60)/120)-1;if(a>this.statusArray.length-1||a<0)e.opacity=0;else{e.opacity=255;var i=this.statusArray[a],o=i.rank,c=i.avatar,s=i.nickname,l=i.score;e.getComponent("Block").init(o,c,s,l)}}},getCurrentLine:function(){Math.ceil((this.content.y+60)/900)>this.currentPage&&this.addRank();for(var n=0;n<this.blockArr.length;n++){if(660<this.content.y+this.blockArr[n].y){var e=this.blockArr[n];e.y-=1440;var t=Math.abs(e.y),a=Math.round((t+60)/120);if(a>this.statusArray.length||a<0){e.opacity=0;continue}e.opacity=255;var i=this.statusArray[a-1],o=i.rank,c=i.avatar,s=i.nickname,l=i.score;e.getComponent("Block").init(o,c,s,l)}if(this.content.y+this.blockArr[n].y<-660){var r=this.blockArr[n];r.y+=1440;var h=Math.abs(r.y),d=Math.round((h+60)/120);if(d>this.statusArray.length){r.opacity=0;continue}r.opacity=255;var g=this.statusArray[d-1],u=g.rank,p=g.avatar,b=g.nickname,f=g.score;r.getComponent("Block").init(u,p,b,f)}}},update:function(n){this.statusBeGet&&(this.undateCount+=n,this.undateCount<this.updateDutation||(this.undateCount=0,this.getCurrentLine()))}}),cc._RF.pop()},{Common:"Common",net:"net"}],Start:[function(n,e,t){"use strict";cc._RF.push(e,"afd9fxLy0dBZYJ9d6AAhfwt","Start");var a="GameScene",l=n("Common"),r=n("net");cc.Class({extends:cc.Component,properties:{button:{default:null,type:cc.Node},rankButton:{default:null,type:cc.Node},illustrate:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},rank:{default:null,type:cc.Node}},onLoad:function(){},start:function(){var n=this;this.rankButton.active=!1,this.button.active=!1,this.illustrate.active=!1,this.netload=!1,this.preload=!1,this.chooseEnv(),this.getInfo(),cc.director.preloadScene(a,function(){n.preload=!0,cc.log("preload success",n.preload,n.netload),n.netload&&(n.button.active=!0)})},chooseEnv:function(){if(null==r.type)if(null==r.token)void 0!==r.singletoken&&(this.rankButton.active=!0,1==r.env?l.url=r.url.appoffline:2==r.env?l.url=r.url.apppre:l.url=r.url.apponline,l.SceneType=10);else{if(1==r.env){var n=void 0;try{n=window.yanqu.getBrowerID()}catch(n){}l.url=r.url.appoffline,l.SceneType="yqbrower"==n?12:1}else l.SceneType=11,2==r.env?l.url=r.url.apppre:l.url=r.url.apponline;5==r.apptype&&(l.SceneType=15)}else 1==r.env?l.url=r.url.wxoffline:2==r.env?l.url=r.url.wxpre:l.url=r.url.wxonline,void 0!==r.singletoken&&(this.rankButton.active=!0,l.SceneType=10),3==r.type?l.SceneType=20:4==r.type?l.SceneType=21:5==r.type&&(l.SceneType=22);cc.log("scenetype:",l.SceneType)},getInfo:function(){var n,t=this,e="room_id="+r.room_id+"&token="+r.token,a=r.version,i=void 0;if(1==l.SceneType)i=hex_md5("YanQu"+e+"!qaz@wsx$"),a=1,r.AREA=1,this.transcend(i,a);else if(12==l.SceneType||15==l.SceneType||11==l.SceneType){var o=r.getSignString(e);i=o[0],a=o[1],r._version=a,this.transcend(i,a)}else if(20==l.SceneType||21==l.SceneType||22==l.SceneType)this.transcend();else if(10==l.SceneType)return this.netload=!0,void(this.preload&&(this.button.active=!0));n=l.url+"/live_game/revive?token="+r.token+"&room_id="+r.room_id+"&sign="+i,axios.post(n,{},{headers:{AREA:r.AREA,"CLIENT-VERSION":a}}).then(function(n){cc.log("start respose:",n);var e=n.data.data;l.reborn=e,t.netload=!0,t.preload&&(t.button.active=!0)}).catch(function(n){t.button.active=!0,cc.log(n)})},showIllustrate:function(){this.illustrate.active=!0},hideIllustrate:function(){this.illustrate.active=!1},loadScene:function(){cc.director.loadScene(a)},transcend:function(n,e){cc.log(n,e);var t,a=r.token,i=r.room_id,o=n;null==n&&(o=hex_md5("YanQu"+("room_id="+i+"&token="+a)+"!qaz@wsx$"));var c=r.AREA,s=e;null==e&&(s=r.version),t=l.url+"/live/section_rank_score?token="+a+"&room_id="+i+"&sign="+o,axios.post(t,{},{headers:{AREA:c,"CLIENT-VERSION":s}}).then(function(e){cc.log("rank:",e),Object.keys(e.data.data.rank).forEach(function(n){l.rank.push(e.data.data.rank[n])}),cc.log(l.rank)},this).catch(function(n){})},showRank:function(){this.rank.active=!0},hideRank:function(){this.rank.active=!1},hideButton:function(){alert(JSON.stringify(r))},update:function(n){this.loading.rotation+=2}}),cc._RF.pop()},{Common:"Common",net:"net"}],chaoyue:[function(n,e,t){"use strict";cc._RF.push(e,"dac14T8vEdKfIF9sWiJLknA","chaoyue");var o=n("Common");cc.Class({extends:cc.Component,properties:{transcendPrefab:cc.Prefab,scoreLabel:{default:null,type:cc.Label}},onLoad:function(){if((11===o.SceneType||12===o.SceneType||20===o.SceneType)&&0!=o.rank.length){this._ranking=o.rank.length,this.transcendFunc();var n=cc.instantiate(this.transcendPrefab);this.node.addChild(n),n.opacity=0,n.getComponent("transcend").init(o.rank[this._ranking-1].avatar,o.rank[this._ranking-1].rank)}},start:function(){},transcendFunc:function(){cc.log("数据",o.rank),this.schedule(this.detectionScore,3)},detectionScore:function(){for(var n=o.rank,e=this.scoreLabel.string,t=0;t<n.length;t++)if(Number(e)>Number(n[t].score)&&(cc.log(e,n[t].score,t),this._ranking>t)){var a=cc.instantiate(this.transcendPrefab);this.node.addChild(a),a.setPosition(cc.v2(0,0)),a.opacity=0,a.getComponent("transcend").init(o.rank[t].avatar,o.rank[t].rank);var i=cc.sequence(cc.fadeTo(.5,0),cc.fadeTo(0,255),cc.fadeTo(1,255),cc.spawn(cc.moveBy(1,cc.v2(0,80)),cc.fadeTo(1,0)));return a.runAction(i),this._ranking=t,void(0==this._ranking&&this.unscheduleAllCallbacks())}}}),cc._RF.pop()},{Common:"Common"}],endbg:[function(n,e,t){"use strict";cc._RF.push(e,"b0123F/GzdDoYtgcFawA/yh","endbg");var r=n("Common"),h=n("net");cc.Class({extends:cc.Component,properties:{Camera:cc.Node,hongbao:cc.Node,putong:cc.Node,weixing:cc.Node,weixinhelp:cc.Node,team:cc.Node,score:cc.Label},onLoad:function(){cc.log("net",h),this.weixinhelp.active=!1,this.node.active=!1,this.putong.active=!1,this.hongbao.active=!1,this.weixing.active=!1,this.team.active=!1},init:function(){this.node.zIndex=2,this.node.active=!0,this.node.x=this.Camera.x,this.node.y=this.Camera.y,10===r.SceneType?(this.weixing.active=!0,this.putongRank()):11===r.SceneType||12===r.SceneType||1===r.SceneType?(this.hongbao.active=!0,this.hongBao()):20===r.SceneType?(this.weixing.active=!0,this.wechat()):21===r.SceneType?(this.weixinhelp.active=!0,this.wechathelp()):22===r.SceneType||15===r.SceneType?(this.team.active=!0,this.teamend()):(this.putong.active=!0,this.score.string="本次得分："+r.score)},start:function(){},putongRank:function(){var n=r.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=n;var e,t=h.singletoken,a=h.AREA,i="game_id="+r.GameId+"&score="+n+"&token="+t,o=hex_md5("YanQu"+i+"!qaz@wsx$"),c=h.version;e=r.url+"/game/single_push_data?token="+t+"&game_id="+r.GameId+"&score="+n+"&sign="+o,cc.log(e),axios.post(e,{},{headers:{AREA:a,"CLIENT-VERSION":c}}).then(function(n){cc.log(n);var e=n.data.code;if(cc.log("code:",e),400404==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="无该活动信息，请重试~";else if(400502==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="活动房间类型错误";else if(400507==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="游戏时间已结束，不能参与游戏";else if(200==e){cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="排名越高，奖金越多";var t=n.data.data.rank,a=n.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(n){cc.log(n)})},hongBao:function(){var n=r.score;cc.find("Canvas/bg/hongbao/score").getComponent("cc.Label").string=n;var e,t=h.token,a=h.room_id,i=h.AREA,o="room_id="+a+"&score="+n+"&token="+t,c=void 0,s=void 0;try{var l=window.yanqu.getSignString(o);c=JSON.parse(l).sign.sign,s=JSON.parse(l).header.VERSION}catch(n){}1===r.SceneType&&(c=hex_md5("YanQu"+o+"!qaz@wsx$")),e=r.url+"/live_game/push_data?token="+t+"&score="+n+"&room_id="+a+"&sign="+c,axios.post(e,{},{headers:{AREA:i,"CLIENT-VERSION":s}}).then(function(n){cc.log("返回信息：",n);var e=n.data.code;if(400404==e)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="无该活动信息，请重试~";else if(400502==e)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="活动房间类型错误";else if(400507==e)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="游戏时间已结束，不能参与游戏";else if(200==e){cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="";var t=n.data.data.rank_list,a=n.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(n){cc.log(n)})},wechat:function(){var n=r.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=n;var e,t=h.token,a=h.room_id,i=h.AREA,o=hex_md5("YanQu"+("room_id="+a+"&score="+n+"&token="+t)+"!qaz@wsx$"),c=h.version;e=r.url+"/live_game/push_data?token="+t+"&score="+n+"&room_id="+a+"&sign="+o,cc.log(e),axios.post(e,{},{headers:{AREA:i,"CLIENT-VERSION":c}}).then(function(n){cc.log(n);var e=n.data.code;if(cc.log("code:",e),400404==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="无该活动信息，请重试~";else if(400502==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="活动房间类型错误";else if(400507==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="游戏时间已结束，不能参与游戏";else if(200==e){cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="排名越高，奖金越多";var t=n.data.data.rank_list,a=n.data.data.current_rank;cc.log("head",t),t[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(n){cc.log(n)})},wechathelp:function(){var n,e=h.token,t=h.room_id,a=h.AREA,i="help_score="+r.score+"&room_id="+t+"&token="+e+"&user_id="+h.helpuid,o=hex_md5("YanQu"+i+"!qaz@wsx$");n=r.url+"/live_game/push_data?token="+e+"&help_score="+r.score+"&room_id="+t+"&user_id="+h.helpuid+"&sign="+o;var c=h.version;cc.log(n,"PPPPP"),axios.post(n,{},{headers:{AREA:a,"CLIENT-VERSION":c}}).then(function(n){cc.log(n);var e=n.data.code;if(400404==e)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="无该活动信息，请重试~";else if(400502==e)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="活动房间类型错误";else if(400507==e)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="游戏时间已结束，不能参与游戏";else if(200==e){cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="";var t=n.data.data.rank_list,a=n.data.data.current_rank,i=n.data.data.max_help_score;console.log("head",t),cc.find("Canvas/bg/help_weixin/score").getComponent(cc.Label).string=r.score,cc.find("Canvas/bg/help_weixin/help_score").getComponent(cc.Label).string="最高助力成绩 "+i+" 分",t[0]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==e){var o=n.data;cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string=""+o.message}}).catch(function(n){cc.log(n)})},teamend:function(){cc.log("team");var n,e=h.token,t=h.room_id,a=h.AREA,i="room_id="+t+"&score="+r.score+"&token="+e,o=hex_md5("YanQu"+i+"!qaz@wsx$");n=r.url+"/live_game/push_data?token="+e+"&score="+r.score+"&room_id="+t+"&sign="+o;var c=h.version;cc.log(n,"PPPPP"),axios.post(n,{},{headers:{AREA:a,"CLIENT-VERSION":c}}).then(function(n){cc.log(n);var e=n.data.code;if(400404==e)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="无该活动信息，请重试~";else if(400502==e)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="活动房间类型错误";else if(400507==e)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="游戏时间已结束，不能参与游戏";else if(200==e){cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="排名越高，奖金越多";var t=n.data.data.rank_list,a=n.data.data.current_rank,i=n.data.data.max_score;console.log("head",t),cc.find("Canvas/bg/team/score").getComponent(cc.Label).string=r.score,cc.find("Canvas/bg/team/help_score").getComponent(cc.Label).string="最高个人成绩 "+i+" 分",t[0]&&(cc.find("Canvas/bg/team/bg_paihangbang/1/1").getComponent(cc.Label).string=t[0].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/1/name").getComponent(cc.Label).string=t[0].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/1/score").getComponent(cc.Label).string=t[0].score,a===t[0].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/1/phbbbzz").active=!0)),t[1]&&(cc.find("Canvas/bg/team/bg_paihangbang/2/2").getComponent(cc.Label).string=t[1].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/2/name").getComponent(cc.Label).string=t[1].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/2/score").getComponent(cc.Label).string=t[1].score,a===t[1].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/2/phbbbzz").active=!0)),t[2]&&(cc.find("Canvas/bg/team/bg_paihangbang/3/3").getComponent(cc.Label).string=t[2].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/3/name").getComponent(cc.Label).string=t[2].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/3/score").getComponent(cc.Label).string=t[2].score,a===t[2].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==e){var o=n.data;cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string=""+o.message}}).catch(function(n){cc.log(n)})},turn:function(){r.score=0,r.rebornTime=1,cc.director.loadScene("GameScene")},moregames:function(){wx.miniProgram.navigateTo({url:"/pages/empty/empty"})}}),cc._RF.pop()},{Common:"Common",net:"net"}],net:[function(n,e,t){"use strict";cc._RF.push(e,"62e73sDA6dOGolthqoGzpA1","net");var a=function(){var n=window.location.search,e=new Object;if(-1!=n.indexOf("?"))for(var t=n.substr(1),a=t.split("&"),i=0;i<a.length;i++)e[a[i].split("=")[0]]=a[i].split("=")[1];return e}(),i=a.token,o=a.room_id,c=a.AREA,s=a.env,l=a.type,r=a.version,h=a.helpuid,d=a.teamid,g=a.apptype,u=a.singletoken;var p={text:window.location,token:i,room_id:o,AREA:c,env:s,type:l,version:r,helpuid:h,teamid:d,apptype:g,singletoken:u,url:{wxoffline:"http://applet.dialect-tv.test",wxpre:"https://yfbapplet.dialect-tv.com",wxonline:"https://applet.dialect-tv.com",appoffline:"http://api.dialect-tv.test",apppre:"http://pre.api.dialect-tv.com",apponline:"http://api.dialect-tv.com"},getSignString:function(n){var e=[];try{var t=window.yanqu.getSignString(n),a=JSON.parse(t).sign.sign,i=JSON.parse(t).header.VERSION;e.push(a),e.push(i)}catch(n){}return e}};e.exports=p,cc._RF.pop()},{}],transcend:[function(n,e,t){"use strict";cc._RF.push(e,"1733epIf0tDcJUub+NHiTbT","transcend"),cc.Class({extends:cc.Component,properties:{num:cc.Label,img:cc.Sprite},start:function(){this.texture=null},init:function(n,e){var a=this;cc.log(n,e);var t="http://image.dialect-tv.com/"+n;cc.log("url: ",t),cc.loader.load(t,function(n,e){if(n)cc.log(n);else{a.texture=e;var t=new cc.SpriteFrame(e);a.img.spriteFrame=t}}),this.num.string="第"+e+"名",this.scheduleOnce(function(){this.onStop()},2)},onStop:function(){cc.loader.release(this.texture),this.texture=null,this.node.destroy()}}),cc._RF.pop()},{}]},{},["Block","Rank","Start","chaoyue","transcend","endbg","net","Animation","Ball","Common","Game","Play"]);