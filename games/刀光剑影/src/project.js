window.__require=function t(e,n,a){function i(c,s){if(!n[c]){if(!e[c]){var r=c.split("/");if(r=r[r.length-1],!e[r]){var h="function"==typeof __require&&__require;if(!s&&h)return h(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+c+"'")}}var l=n[c]={exports:{}};e[c][0].call(l.exports,function(t){return i(e[c][1][t]||t)},l,l.exports,t,e,n,a)}return n[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<a.length;c++)i(a[c]);return i}({Blade:[function(t,e,n){"use strict";cc._RF.push(e,"5d640S3RWVIJ7gmtY9eIp9V","Blade");var a=t("Common");cc.Class({extends:cc.Component,properties:{score:{default:null,type:cc.Node},bonusLabel:{default:null,type:cc.Prefab},canvas:{default:null,type:cc.Node},juice_root:{default:null,type:cc.Node},megranateParticle:{default:null,type:cc.Prefab},game_root:{default:null,type:cc.Node},juices:{default:[],type:cc.Prefab},bladeAudio:{default:null,type:cc.AudioClip}},onLoad:function(){},start:function(){this.gameObject=this.canvas.getComponent("game_scene"),this.score_label=this.score.getComponent(cc.Label),this.cutMegranate=!1},onCollisionEnter:function(t,e){var n=this;cc.audioEngine.play(this.bladeAudio,!1,1);var i=null;if("megranate"==(i="boom"===t.node.name?t.node:t.node.parent).name)this.gameObject.cutMegranate(),i.getComponent("Megranate").flashCut(this.node.rotation),this.cutMegranate||(this.cutMegranate=!0,this.scheduleOnce(function(){n._spawnMegranateParticle(cc.v2(i.x,i.y)),i.getComponent("Megranate").split_fruit(),n._spawnJuices(new cc.Color(204,0,102)),n.cutMegranate=!1,n.score_label.string=a.score;for(var t=n.game_root.children,e=0;e<t.length;e++){var o=t[e];"boom"===o.name||"megranate"===o.name||o.getComponent("fruit").split_fruit(360*Math.random())}},2));else{var o=i.getComponent("fruit");if(0!==o.status_state)return;"boom"!=i.name&&(e.node._parent.lastFruit=cc.v2(i.x,i.y),this.gameObject.bladeCountBegin=!0,this.gameObject.bladeCount++,a.score++,this.score_label.string=a.score),i.getComponent("throw_action").stop_action(),o.split_fruit(360-this.node.rotation);var c=null;switch(i.name){case"apple":c=new cc.Color(0,255,51);break;case"banana":c=new cc.Color(204,255,0);break;case"peach":c=new cc.Color(204,153,51);break;case"sandia":c=new cc.Color(204,0,0);break;case"basaha":c=new cc.Color(204,51,102)}this._spawnJuices(c),!1===this.gameObject.is_started&&this.gameObject.on_start_game()}},_spawnJuices:function(t){for(var e=Math.floor(3*Math.random()+1),n=0;n<e;n++){var a=cc.instantiate(this.juices[Math.floor(5*Math.random())]);a.color=t,a.setPosition(this.node.parent.x+(100-200*Math.random()),this.node.parent.y+(100-200*Math.random())),this.juice_root.addChild(a)}},_spawnMegranateParticle:function(t){var e=cc.instantiate(this.megranateParticle);e.setPosition(t),this.canvas.addChild(e)}}),cc._RF.pop()},{Common:"Common"}],Block:[function(t,e,n){"use strict";cc._RF.push(e,"7678faPbyJLrph1RxP8mctM","Block");var a=t("Common");cc.Class({extends:cc.Component,properties:{rankLabel:{default:null,type:cc.Label},userIcon:{default:null,type:cc.Sprite},userInfo:{default:null,type:cc.Node},userName:{default:null,type:cc.Label},score:{default:null,type:cc.Label}},start:function(){},init:function(t,e,n,i){var o=this;this.rankLabel.string=t,this.rankLabel.node.color="1"==t?new cc.Color(255,0,0,255):"2"==t?new cc.Color(255,102,0,255):"3"==t?new cc.Color(255,204,0,255):new cc.Color(255,255,255,255),this.userName.string=n,this.score.string=i,""==e||(cc.log("load pic",a.url+"/"+e),cc.loader.load("http://image.dialect-tv.com/"+e,function(t,e){t&&console.error(t),o.userIcon.spriteFrame=new cc.SpriteFrame(e)}))}}),cc._RF.pop()},{Common:"Common"}],BonusLabel:[function(t,e,n){"use strict";cc._RF.push(e,"0aafd5C1jJGQavYfgazg3q6","BonusLabel"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.clock=0},update:function(t){this.clock+=t,this.clock>.6?(this.node.scaleX-=.1,this.node.scaleY-=.1,cc.log(this.node.width),(this.node.scaleX<0||this.node.scaleY<0)&&this.node.destroy()):this.clock>.5&&(this.node.scaleX+=.05,this.node.scaleY+=.05)}}),cc._RF.pop()},{}],Boom:[function(t,e,n){"use strict";cc._RF.push(e,"a1695QEK+pN+qFwSULGB/9q","Boom"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},onCollisionEnter:function(t,e){cc.log(t.tag,e.tag)},onCollisionStay:function(t,e){0===t.tag&&(this.node.y+=5)}}),cc._RF.pop()},{}],Camera_script:[function(t,e,n){"use strict";cc._RF.push(e,"78f989sM59BF60MZZR62PJV","Camera_script"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.moveCount=0,this.end=!1,this.moveX=0,this.moveY=0,this.cameraObject=this.node.getComponent("cc.Camera")},endScene:function(t){cc.log(this.node.x,t.x,this.node.y,t.y),this.moveX=(t.x-this.node.x)/10,this.moveY=(t.y-this.node.y)/10,this.end=!0},start:function(){},update:function(t){if(!0===this.end){if(10==this.moveCount++)return void(this.end=!1);this.cameraObject.zoomRatio+=.05,this.node.x+=this.moveX,this.node.y+=this.moveY}}}),cc._RF.pop()},{}],Common:[function(t,e,n){"use strict";cc._RF.push(e,"635790vPkBNFajuB0McrGAr","Common");e.exports={score:0,SceneType:0,reborn:{},rebornTime:1,GameId:24,url:"",rank:[]},cc._RF.pop()},{}],Juice:[function(t,e,n){"use strict";cc._RF.push(e,"c36439Tz+BKa6+75FhToMHo","Juice"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.clock=0},start:function(){},update:function(t){this.clock+=t,this.clock>.5&&(this.node.opacity-=2,this.node.opacity<10&&this.node.destroy())}}),cc._RF.pop()},{}],Life:[function(t,e,n){"use strict";cc._RF.push(e,"512ffX9yeZNXI7z2RGz48Zu","Life");t("Common");cc.Class({extends:cc.Component,properties:{x:{default:[],type:cc.Node},canvas:{default:null,type:cc.Node},reborn:{default:null,type:cc.Node},gameOverAudio:{default:null,url:cc.AudioClip}},onLoad:function(){this.gameObject=this.canvas.getComponent("game_scene"),this.init()},init:function(){this.x[0].opacity=255,this.x[1].opacity=255,this.x[2].opacity=255,this.x[3].opacity=0,this.x[4].opacity=0,this.x[5].opacity=0,this.lifeNum=0},lifeReduce:function(){var t=this;this.gameObject.gameOver||(cc.log(this.lifeNum),this.lifeNum>=3||this.gameObject.animation.play("bad"),this.scheduleOnce(function(){t.lifeNum>2||t.gameObject.animation.play("body")},1.5),2===this.lifeNum&&(cc.audioEngine.play(this.gameOverAudio,!1,1),cc.audioEngine.stop(this.gameObject.bgm),this.gameObject.gameOver=!0,this.gameObject.cover.active=!0,this.scheduleOnce(function(){cc.find("Canvas/reborn").getComponent("Reborn").showLabel()},1.2)),this.lifeNum>2||(this.x[this.lifeNum].opacity=0,this.x[this.lifeNum+3].opacity=255),this.lifeNum++)},start:function(){}}),cc._RF.pop()},{Common:"Common"}],Megranate:[function(t,e,n){"use strict";cc._RF.push(e,"25793BcpwlCOa2XYuuUbIrl","Megranate");var a=t("Common");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.clock=0,this.flashCutDuration=2,this.flashCutBegin=!1,this.flashCutTime=0,this.canvas=cc.find("Canvas"),this.megranateLabel=cc.find("Canvas/megranateLabel"),this.label=this.megranateLabel.getComponent("cc.Label"),this.gameObject=this.canvas.getComponent("game_scene"),this.status_state=0,this.icon=this.node.getChildByName("icon"),this.h1=this.node.getChildByName("megranatePeel"),this.h2=this.node.getChildByName("megranatePeel1"),this.h3=this.node.getChildByName("megranatePeel2"),this.h4=this.node.getChildByName("megranatePeel3"),this.flash1=this.node.getChildByName("flash1"),this.flash2=this.node.getChildByName("flash2"),this.h1.active=!1,this.h2.active=!1,this.h3.active=!1,this.h4.active=!1,this.flash1.active=!1,this.flash2.active=!1,this.flash1TimeCount=0,this.flash2TimeCount=0,this.flashDuration=.2,this.split_speed=500+100*Math.random(),this.cutCount=0},flashCut:function(t){this.cutCount%2==0?(this.flash1.active=!0,this.flash1.rotation=t):(this.flash2.active=!0,this.flash2.rotation=t),this.cutCount++,this.megranateLabel.opacity=255,this.flashCutTime=this.clock,this.flashCutBegin=!0,this.megranateLabel.y=this.node.y+200,this.megranateLabel.x=this.node.x,this.label.string=this.cutCount+"HIT"},split_fruit:function(){this.megranateLabel.opacity=0,a.score+=this.cutCount,cc.audioEngine.play(cc.url.raw("resources/sounds/splatter.mp3")),this.h1.rotation=this.icon.rotation,this.h2.rotation=this.icon.rotation,this.h3.rotation=this.icon.rotation,this.h4.rotation=this.icon.rotation,this.icon.active=!1,this.h1.active=!0,this.h2.active=!0,this.h3.active=!0,this.h4.active=!0,this.status_state=1;var t=this.icon.rotation;t>360&&(t-=360*Math.floor(t/360));t=(t=360-t)*Math.PI/180;var e=-this.split_speed*Math.cos(t),n=-this.split_speed*Math.sin(t),i=-this.split_speed*Math.cos(t+Math.PI/2),o=-this.split_speed*Math.sin(t+Math.PI/2),c=-this.split_speed*Math.cos(t+Math.PI),s=-this.split_speed*Math.sin(t+Math.PI),r=-this.split_speed*Math.cos(t+1.5*Math.PI),h=-this.split_speed*Math.sin(t+1.5*Math.PI);this.node.getComponent("throw_action").stop_action(),this.h1.getComponent("blow_up").start_action(e,n),this.h2.getComponent("blow_up").start_action(i,o),this.h3.getComponent("blow_up").start_action(c,s),this.h4.getComponent("blow_up").start_action(r,h),this.gameObject.megranateCount=0,this.gameObject.gameSpeedDownBegin=!1,this.gameObject.gameSpeedDown=1,this.gameObject.gen_fruit()},update:function(t){this.clock+=t,this.node.y<=-700&&(this.gameObject.megranateCount>0&&(this.gameObject.megranateCount=0),this.node.removeFromParent()),(this.h1.x<-400||this.h1.x>400||this.h1.y>600||this.h1.y<-600)&&this.node.removeFromParent(),this.flash1.active&&(this.flash1TimeCount>this.flashDuration?(this.flash1TimeCount=0,this.flash1.active=!1):this.flash1TimeCount+=t),this.flash2.active&&(this.flash2TimeCount>this.flashDuration?(this.flash2TimeCount=0,this.flash2.active=!1):this.flash2TimeCount+=t),this.flashCutBegin&&this.clock-this.flashCutTime>this.flashDuration&&(this.flashCutBegin=!1,this.megranateLabel.opacity=0)}}),cc._RF.pop()},{Common:"Common"}],Rank:[function(t,e,n){"use strict";cc._RF.push(e,"a85ca6+unNLWaN7ujmWKgFm","Rank");var a=t("net"),i=t("Common");cc.Class({extends:cc.Component,properties:{block_pre:{default:null,type:cc.Prefab},content:{default:null,type:cc.Node},self:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},itemHeight:120},start:function(){10==i.SceneType?(this.loading.opacity=0,this.undateCount=0,this.updateDutation=.2,this.content.height=0,this.directionDown=!0,this.lastContentY=0,this.currentPage=1,this.showIndex=2,this.showLineNum=12,this.statusArray=[],this.blockArr=[],this.getStatus(this.currentPage),this.statusBeGet=!1,this.rankDied=!1,this.node.active=!1):this.node.destroy()},init:function(){this.lastContentY=this.content.y;var t=this.statusArray.length;t>12&&(t=12);for(var e=0;e<t;++e){var n=this.statusArray[e],a=n.rank,i=n.avatar,o=n.nickname,c=n.score,s=this.spawnBlock();this.content.addChild(s),s.setPosition(0,-this.itemHeight*(.5+e)),e%2==0&&(s.getChildByName("bg").opacity=0),s.getComponent("Block").init(a,i,o,c),this.blockArr.push(s)}},addRank:function(){this.rankDied||(cc.log("add rank"),this.getStatus(this.currentPage+1))},getStatus:function(t){var e=this,n=a.AREA,o=a.version,c=a.singletoken;cc.log(n,o);var s=i.GameId,r=hex_md5("YanQu"+("game_id="+s+"&page="+t+"&token="+c)+"!qaz@wsx$"),h=i.url+"/game/single_rank_all?token="+c+"&game_id="+s+"&page="+t+"&sign="+r;cc.log(h),axios.post(h,{},{headers:{AREA:n,"CLIENT-VERSION":o}}).then(function(n){cc.log(n);for(var a=n.data.data.rank_list,i=0;i<a.length;i++)e.statusArray.push(a[i]);e.currentPage=t,e.statusControl(n.data.data.current),e.content.height+=a.length*e.itemHeight,a.length<20&&(e.rankDied=!0),e.loading.opacity=0},this).catch(function(t){cc.log(t)})},statusControl:function(t){this.statusBeGet=!0,1==this.currentPage?(this.init(),this.initSelf(t)):this.refreshRank()},initSelf:function(t){cc.log("self data:",t);var e=t.rank,n=t.avatar,a=t.nickname,i=t.score,o=this.spawnBlock();o.getComponent("Block").init(e,n,a,i),this.self.addChild(o)},spawnBlock:function(){return cc.instantiate(this.block_pre)},scrollEvent:function(t,e){1==e&&(cc.log("scroll bottom"),this.refreshRank())},refreshRank:function(){for(var t=0;t<this.blockArr.length;t++){var e=this.blockArr[t],n=Math.abs(e.y),a=Math.round((n+60)/120)-1;if(a>this.statusArray.length-1||a<0)e.opacity=0;else{e.opacity=255;var i=this.statusArray[a],o=i.rank,c=i.avatar,s=i.nickname,r=i.score;e.getComponent("Block").init(o,c,s,r)}}},getCurrentLine:function(){Math.ceil((this.content.y+60)/900)>this.currentPage&&this.addRank();for(var t=0;t<this.blockArr.length;t++){if(this.content.y+this.blockArr[t].y>660){var e=this.blockArr[t];e.y-=1440;var n=Math.abs(e.y),a=Math.round((n+60)/120);if(a>this.statusArray.length||a<0){e.opacity=0;continue}e.opacity=255;var i=this.statusArray[a-1],o=i.rank,c=i.avatar,s=i.nickname,r=i.score;e.getComponent("Block").init(o,c,s,r)}if(this.content.y+this.blockArr[t].y<-660){var h=this.blockArr[t];h.y+=1440;var l=Math.abs(h.y),g=Math.round((l+60)/120);if(g>this.statusArray.length){h.opacity=0;continue}h.opacity=255;var d=this.statusArray[g-1],u=d.rank,p=d.avatar,b=d.nickname,m=d.score;h.getComponent("Block").init(u,p,b,m)}}},update:function(t){this.statusBeGet&&(this.undateCount+=t,this.undateCount<this.updateDutation||(this.undateCount=0,this.getCurrentLine()))}}),cc._RF.pop()},{Common:"Common",net:"net"}],Reborn:[function(t,e,n){"use strict";cc._RF.push(e,"faf9bra/O1C6rUqHeQpUUcT","Reborn");var a=t("net"),i=t("Common");cc.Class({extends:cc.Component,properties:{score:{default:null,type:cc.Node},reborn_button:{default:null,type:cc.Node},reborn_price:{default:null,type:cc.Node},total_coin:{default:null,type:cc.Node},background:{default:null,type:cc.Node},noMoney:{default:null,type:cc.Node},enoughMoney:{default:null,type:cc.Node},pay_success:{default:null,type:cc.Node},canvas:{default:null,type:cc.Node},black:{default:null,type:cc.Node},cover:{default:null,type:cc.Node},uploading:{default:null,type:cc.Node}},onLoad:function(){},start:function(){this.uploading.active=!1,this.node.active=!1,this.noMoney.active=!1,this.enoughMoney.active=!1,this.pay_success.active=!1,this.background.active=!1,this.black.active=!1,this.gameObject=this.canvas.getComponent("Game")},showLabel:function(){this.unscheduleAllCallbacks();var t=i.reborn;cc.log("reborn:",t,a.room_id),void 0!=t?void 0!=a.room_id?1==t.revive?(this.score.getComponent("cc.Label").string=i.score,this.total_coin.getComponent("cc.Label").string=t.coin,i.rebornTime<4&&0!=t.subsection[i.rebornTime]?(this.node.active=!0,this.background.active=!0,this.enoughMoney.active=!0,this.black.active=!0,this.reborn_price.getComponent("cc.Label").string=t.subsection[i.rebornTime]):this.goDie()):this.goDie():this.scheduleOnce(function(){cc.find("Canvas/bg").getComponent("endbg").init()},1):this.goDie()},reborn:function(){var t=this,e=i.reborn;if(parseInt(e.coin)<parseInt(e.subsection[i.rebornTime]))return this.node.active=!0,this.black.active=!1,this.enoughMoney.active=!1,this.pay_success.active=!1,this.background.active=!0,void(this.noMoney.active=!0);var n=void 0,o=1,c="num="+i.rebornTime+"&room_id="+a.room_id+"&token="+a.token;if(1==i.SceneType){var s=hex_md5("YanQu"+c+"!qaz@wsx$");o=1,n=i.url+"/live_game/revive_post?token="+a.token+"&room_id="+a.room_id+"&num="+i.rebornTime+"&sign="+s}else if(12==i.SceneType||15==i.SceneType||11==i.SceneType){var r=a.getSignString(c),h=r[0];o=r[1],n=i.url+"/live_game/revive_post?token="+a.token+"&room_id="+a.room_id+"&num="+i.rebornTime+"&sign="+h}else{if(20!=i.SceneType&&21!=i.SceneType&&22!=i.SceneType)return void this.goDie();var l=hex_md5("YanQu"+c+"!qaz@wsx$");o=a.version,n=i.url+"/live_game/revive_post?token="+a.token+"&room_id="+a.room_id+"&num="+i.rebornTime+"&sign="+l}cc.log("reborn url:",n),axios.post(n,{},{headers:{AREA:a.AREA,"CLIENT-VERSION":o}}).then(function(e){cc.log(e);var n=e.data.data;void 0!=n?(i.reborn.coin=n.coin,1==n.is_pay?t.rebornSuccess():(t.node.active=!0,t.background.active=!0,t.noMoney.active=!0)):t.goDie()}).catch(function(t){})},rebornSuccess:function(){var t=this;i.rebornTime+=1,this.background.active=!1,this.black.active=!1,this.noMoney.active=!1,this.enoughMoney.active=!1,this.pay_success.active=!0,this.pay_success.opacity=255,this.pay_success.runAction(cc.fadeOut(1)),this.scheduleOnce(function(){t.node.active=!1},1),this.canvas.getComponent("game_scene").rebornGame()},goDie:function(){this.uploading.active=!0,cc.find("Canvas/bg").getComponent("endbg").init()},update:function(t){}}),cc._RF.pop()},{Common:"Common",net:"net"}],Start:[function(t,e,n){"use strict";cc._RF.push(e,"afd9fxLy0dBZYJ9d6AAhfwt","Start");var a=t("Common"),i=t("net");cc.Class({extends:cc.Component,properties:{button:{default:null,type:cc.Node},rankButton:{default:null,type:cc.Node},illustrate:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},rank:{default:null,type:cc.Node}},onLoad:function(){},start:function(){var t=this;this.rankButton.active=!1,this.button.active=!1,this.illustrate.active=!1,this.netload=!1,this.preload=!1,this.chooseEnv(),this.getInfo(),cc.director.preloadScene("GameScene",function(){t.preload=!0,cc.log("preload success",t.preload,t.netload),t.netload&&(t.button.active=!0)})},chooseEnv:function(){if(void 0==i.type)if(void 0==i.token)void 0!==i.singletoken&&(this.rankButton.active=!0,1==i.env?a.url=i.url.appoffline:2==i.env?a.url=i.url.apppre:a.url=i.url.apponline,a.SceneType=10);else{if(1==i.env){var t=void 0;try{t=window.yanqu.getBrowerID()}catch(t){}a.url=i.url.appoffline,a.SceneType="yqbrower"==t?12:1}else a.SceneType=11,2==i.env?a.url=i.url.apppre:a.url=i.url.apponline;5==i.apptype&&(a.SceneType=15)}else 1==i.env?a.url=i.url.wxoffline:2==i.env?a.url=i.url.wxpre:a.url=i.url.wxonline,void 0!==i.singletoken&&(this.rankButton.active=!0,a.SceneType=10),3==i.type?a.SceneType=20:4==i.type?a.SceneType=21:5==i.type&&(a.SceneType=22);cc.log("scenetype:",a.SceneType)},getInfo:function(){var t,e=this,n="room_id="+i.room_id+"&token="+i.token,o=i.version,c=void 0;if(1==a.SceneType)c=hex_md5("YanQu"+n+"!qaz@wsx$"),o=1,i.AREA=1,this.transcend(c,o);else if(12==a.SceneType||15==a.SceneType||11==a.SceneType){var s=i.getSignString(n);c=s[0],o=s[1],i._version=o,this.transcend(c,o)}else if(20==a.SceneType||21==a.SceneType||22==a.SceneType)this.transcend();else if(10==a.SceneType)return this.netload=!0,void(this.preload&&(this.button.active=!0));t=a.url+"/live_game/revive?token="+i.token+"&room_id="+i.room_id+"&sign="+c,axios.post(t,{},{headers:{AREA:i.AREA,"CLIENT-VERSION":o}}).then(function(t){cc.log("start respose:",t);var n=t.data.data;a.reborn=n,e.netload=!0,e.preload&&(e.button.active=!0)}).catch(function(t){e.button.active=!0,cc.log(t)})},showIllustrate:function(){this.illustrate.active=!0},hideIllustrate:function(){this.illustrate.active=!1},loadScene:function(){cc.director.loadScene("GameScene")},transcend:function(t,e){cc.log(t,e);var n,o=i.token,c=i.room_id,s=t;void 0==t&&(s=hex_md5("YanQu"+("room_id="+c+"&token="+o)+"!qaz@wsx$"));var r=i.AREA,h=e;void 0==e&&(h=i.version),n=a.url+"/live/section_rank_score?token="+o+"&room_id="+c+"&sign="+s,axios.post(n,{},{headers:{AREA:r,"CLIENT-VERSION":h}}).then(function(t){cc.log("rank:",t),Object.keys(t.data.data.rank).forEach(function(e){a.rank.push(t.data.data.rank[e])}),cc.log(a.rank)},this).catch(function(t){})},showRank:function(){this.rank.active=!0},hideRank:function(){this.rank.active=!1},hideButton:function(){alert(JSON.stringify(i))},update:function(t){this.loading.rotation+=2}}),cc._RF.pop()},{Common:"Common",net:"net"}],blow_up:[function(t,e,n){"use strict";cc._RF.push(e,"27c90RqTIdPfbSo7hMiODqA","blow_up"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.action_started=!1},start_action:function(t,e){this.action_started=!0,this.vx=t,this.vy=e},start:function(){},update:function(t){this.action_started&&(this.node.x+=this.vx/10,this.node.y+=this.vy/10)}}),cc._RF.pop()},{}],chaoyue:[function(t,e,n){"use strict";cc._RF.push(e,"dac14T8vEdKfIF9sWiJLknA","chaoyue");var a=t("Common");cc.Class({extends:cc.Component,properties:{transcendPrefab:cc.Prefab,scoreLabel:{default:null,type:cc.Label}},onLoad:function(){if(cc.log("chao yue scenetype ",a.SceneType,a.rank),(11===a.SceneType||12===a.SceneType||20===a.SceneType||1==a.SceneType)&&0!=a.rank.length){this._ranking=a.rank.length,this.transcendFunc();var t=cc.instantiate(this.transcendPrefab);this.node.addChild(t),t.opacity=0,t.getComponent("transcend").init(a.rank[this._ranking-1].avatar,a.rank[this._ranking-1].rank)}},start:function(){},transcendFunc:function(){cc.log("\u6570\u636e",a.rank),this.schedule(this.detectionScore,3)},detectionScore:function(){for(var t=a.rank,e=this.scoreLabel.string,n=0;n<t.length;n++)if(Number(e)>Number(t[n].score)&&(cc.log(e,t[n].score,n),this._ranking>n)){var i=cc.instantiate(this.transcendPrefab);this.node.addChild(i),i.setPosition(cc.v2(0,0)),i.opacity=0,i.getComponent("transcend").init(a.rank[n].avatar,a.rank[n].rank);var o=cc.sequence(cc.fadeTo(.5,0),cc.fadeTo(0,255),cc.fadeTo(1,255),cc.spawn(cc.moveBy(1,cc.v2(0,80)),cc.fadeTo(1,0)));return i.runAction(o),this._ranking=n,void(0==this._ranking&&this.unscheduleAllCallbacks())}}}),cc._RF.pop()},{Common:"Common"}],endbg:[function(t,e,n){"use strict";cc._RF.push(e,"b0123F/GzdDoYtgcFawA/yh","endbg");var a=t("Common"),i=t("net");cc.Class({extends:cc.Component,properties:{Camera:cc.Node,hongbao:cc.Node,putong:cc.Node,weixing:cc.Node,weixinhelp:cc.Node,team:cc.Node,score:cc.Label},onLoad:function(){cc.log("net",i),this.weixinhelp.active=!1,this.node.active=!1,this.putong.active=!1,this.hongbao.active=!1,this.weixing.active=!1,this.team.active=!1},init:function(){this.node.zIndex=2,this.node.active=!0,this.node.x=this.Camera.x,this.node.y=this.Camera.y,10===a.SceneType?(this.weixing.active=!0,this.putongRank()):11===a.SceneType||12===a.SceneType||1===a.SceneType?(this.hongbao.active=!0,this.hongBao()):20===a.SceneType?(this.weixing.active=!0,this.wechat()):21===a.SceneType?(this.weixinhelp.active=!0,this.wechathelp()):22===a.SceneType||15===a.SceneType?(this.team.active=!0,this.teamend()):(this.putong.active=!0,this.score.string="\u672c\u6b21\u5f97\u5206\uff1a"+a.score)},start:function(){},putongRank:function(){var t=a.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=t;var e,n=i.singletoken,o=i.AREA,c="game_id="+a.GameId+"&score="+t+"&token="+n,s=hex_md5("YanQu"+c+"!qaz@wsx$"),r=i.version;e=a.url+"/game/single_push_data?token="+n+"&game_id="+a.GameId+"&score="+t+"&sign="+s,cc.log(e),axios.post(e,{},{headers:{AREA:o,"CLIENT-VERSION":r}}).then(function(t){cc.log(t);var e=t.data.code;if(cc.log("code:",e),400404==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==e){cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var n=t.data.data.rank,a=t.data.data.current_rank;cc.log("head",n),n[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=n[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=n[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=n[0].score,a===n[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),n[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=n[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=n[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=n[1].score,a===n[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),n[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=n[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=n[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=n[2].score,a===n[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(t){cc.log(t)})},hongBao:function(){var t=a.score;cc.find("Canvas/bg/hongbao/score").getComponent("cc.Label").string=t;var e,n=i.token,o=i.room_id,c=i.AREA,s=(i.env,"room_id="+o+"&score="+t+"&token="+n),r=void 0,h=void 0;try{var l=window.yanqu.getSignString(s);r=JSON.parse(l).sign.sign,h=JSON.parse(l).header.VERSION}catch(t){}1===a.SceneType&&(r=hex_md5("YanQu"+s+"!qaz@wsx$")),e=a.url+"/live_game/push_data?token="+n+"&score="+t+"&room_id="+o+"&sign="+r,axios.post(e,{},{headers:{AREA:c,"CLIENT-VERSION":h}}).then(function(t){cc.log("\u8fd4\u56de\u4fe1\u606f\uff1a",t);var e=t.data.code;if(400404==e)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==e)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==e)cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==e){cc.find("Canvas/bg/hongbao/lishi").getComponent(cc.Label).string="";var n=t.data.data.rank_list,a=t.data.data.current_rank;cc.log("head",n),n[0]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/1").getComponent(cc.Label).string=n[0].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/1/name").getComponent(cc.Label).string=n[0].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/1/score").getComponent(cc.Label).string=n[0].score,a===n[0].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/1/phbbbzz").active=!0)),n[1]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/2").getComponent(cc.Label).string=n[1].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/2/name").getComponent(cc.Label).string=n[1].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/2/score").getComponent(cc.Label).string=n[1].score,a===n[1].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/2/phbbbzz").active=!0)),n[2]&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/3").getComponent(cc.Label).string=n[2].rank_num,cc.find("Canvas/bg/hongbao/bg_paihangbang/3/name").getComponent(cc.Label).string=n[2].nickname.substr(0,5),cc.find("Canvas/bg/hongbao/bg_paihangbang/3/score").getComponent(cc.Label).string=n[2].score,a===n[2].rank_num&&(cc.find("Canvas/bg/hongbao/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(t){cc.log(t)})},wechat:function(){var t=a.score;cc.find("Canvas/bg/weixin/score").getComponent("cc.Label").string=t;var e,n=i.token,o=i.room_id,c=i.AREA,s=hex_md5("YanQu"+("room_id="+o+"&score="+t+"&token="+n)+"!qaz@wsx$"),r=i.version;e=a.url+"/live_game/push_data?token="+n+"&score="+t+"&room_id="+o+"&sign="+s,cc.log(e),axios.post(e,{},{headers:{AREA:c,"CLIENT-VERSION":r}}).then(function(t){cc.log(t);var e=t.data.code;if(cc.log("code:",e),400404==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==e)cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==e){cc.find("Canvas/bg/weixin/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var n=t.data.data.rank_list,a=t.data.data.current_rank;cc.log("head",n),n[0]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=n[0].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=n[0].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=n[0].score,a===n[0].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/1/phbbbzz").active=!0)),n[1]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=n[1].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=n[1].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=n[1].score,a===n[1].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/2/phbbbzz").active=!0)),n[2]&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=n[2].rank_num,cc.find("Canvas/bg/weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=n[2].nickname.substr(0,5),cc.find("Canvas/bg/weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=n[2].score,a===n[2].rank_num&&(cc.find("Canvas/bg/weixin/bg_paihangbang/3/phbbbzz").active=!0))}}).catch(function(t){cc.log(t)})},wechathelp:function(){var t,e=i.token,n=i.room_id,o=i.AREA,c="help_score="+a.score+"&room_id="+n+"&token="+e+"&user_id="+i.helpuid,s=hex_md5("YanQu"+c+"!qaz@wsx$");t=a.url+"/live_game/push_data?token="+e+"&help_score="+a.score+"&room_id="+n+"&user_id="+i.helpuid+"&sign="+s;var r=i.version;cc.log(t,"PPPPP"),axios.post(t,{},{headers:{AREA:o,"CLIENT-VERSION":r}}).then(function(t){cc.log(t);var e=t.data.code;if(400404==e)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==e)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==e)cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==e){cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string="";var n=t.data.data.rank_list,i=t.data.data.current_rank,o=t.data.data.max_help_score;console.log("head",n),cc.find("Canvas/bg/help_weixin/score").getComponent(cc.Label).string=a.score,cc.find("Canvas/bg/help_weixin/help_score").getComponent(cc.Label).string="\u6700\u9ad8\u52a9\u529b\u6210\u7ee9 "+o+" \u5206",n[0]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/1").getComponent(cc.Label).string=n[0].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/name").getComponent(cc.Label).string=n[0].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/score").getComponent(cc.Label).string=n[0].score,i===n[0].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/1/phbbbzz").active=!0)),n[1]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/2").getComponent(cc.Label).string=n[1].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/name").getComponent(cc.Label).string=n[1].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/score").getComponent(cc.Label).string=n[1].score,i===n[1].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/2/phbbbzz").active=!0)),n[2]&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/3").getComponent(cc.Label).string=n[2].rank_num,cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/name").getComponent(cc.Label).string=n[2].nickname.substr(0,5),cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/score").getComponent(cc.Label).string=n[2].score,i===n[2].rank_num&&(cc.find("Canvas/bg/help_weixin/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==e){var c=t.data;cc.find("Canvas/bg/help_weixin/lishi").getComponent(cc.Label).string=""+c.message}}).catch(function(t){cc.log(t)})},teamend:function(){cc.log("team");var t,e=i.token,n=i.room_id,o=i.AREA,c="room_id="+n+"&score="+a.score+"&token="+e,s=hex_md5("YanQu"+c+"!qaz@wsx$");t=a.url+"/live_game/push_data?token="+e+"&score="+a.score+"&room_id="+n+"&sign="+s;var r=i.version;cc.log(t,"PPPPP"),axios.post(t,{},{headers:{AREA:o,"CLIENT-VERSION":r}}).then(function(t){cc.log(t);var e=t.data.code;if(400404==e)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u65e0\u8be5\u6d3b\u52a8\u4fe1\u606f\uff0c\u8bf7\u91cd\u8bd5~";else if(400502==e)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6d3b\u52a8\u623f\u95f4\u7c7b\u578b\u9519\u8bef";else if(400507==e)cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6e38\u620f\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u4e0d\u80fd\u53c2\u4e0e\u6e38\u620f";else if(200==e){cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string="\u6392\u540d\u8d8a\u9ad8\uff0c\u5956\u91d1\u8d8a\u591a";var n=t.data.data.rank_list,i=t.data.data.current_rank,o=t.data.data.max_score;console.log("head",n),cc.find("Canvas/bg/team/score").getComponent(cc.Label).string=a.score,cc.find("Canvas/bg/team/help_score").getComponent(cc.Label).string="\u6700\u9ad8\u4e2a\u4eba\u6210\u7ee9 "+o+" \u5206",n[0]&&(cc.find("Canvas/bg/team/bg_paihangbang/1/1").getComponent(cc.Label).string=n[0].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/1/name").getComponent(cc.Label).string=n[0].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/1/score").getComponent(cc.Label).string=n[0].score,i===n[0].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/1/phbbbzz").active=!0)),n[1]&&(cc.find("Canvas/bg/team/bg_paihangbang/2/2").getComponent(cc.Label).string=n[1].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/2/name").getComponent(cc.Label).string=n[1].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/2/score").getComponent(cc.Label).string=n[1].score,i===n[1].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/2/phbbbzz").active=!0)),n[2]&&(cc.find("Canvas/bg/team/bg_paihangbang/3/3").getComponent(cc.Label).string=n[2].rank_num,cc.find("Canvas/bg/team/bg_paihangbang/3/name").getComponent(cc.Label).string=n[2].nickname.substr(0,5),cc.find("Canvas/bg/team/bg_paihangbang/3/score").getComponent(cc.Label).string=n[2].score,i===n[2].rank_num&&(cc.find("Canvas/bg/team/bg_paihangbang/3/phbbbzz").active=!0))}else if(400801==e){var c=t.data;cc.find("Canvas/bg/team/lishi").getComponent(cc.Label).string=""+c.message}}).catch(function(t){cc.log(t)})},turn:function(){a.score=0,cc.director.loadScene("GameScene")},moregames:function(){wx.miniProgram.navigateTo({url:"/pages/empty/empty"})}}),cc._RF.pop()},{Common:"Common",net:"net"}],fruit:[function(t,e,n){"use strict";cc._RF.push(e,"278ce1d+sdBSLW3ebpL6R8B","fruit"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.status_state=0,"boom"===this.node._name?this.icon=this.node:(this.icon=this.node.getChildByName("icon"),this.h1=this.node.getChildByName("h1"),this.h2=this.node.getChildByName("h2"),this.flash=this.node.getChildByName("flash"),this.h1.active=!1,this.h2.active=!1,this.flash.active=!1),this.split_speed=200+100*Math.random()},split_fruit:function(t){"boom"===this.node._name?(this.icon=this.node,cc.find("Canvas").getComponent("game_scene").cutBoom(this.node._position)):(cc.audioEngine.play(cc.url.raw("resources/sounds/splatter.mp3")),this.h1.rotation=this.icon.rotation,this.h2.rotation=this.icon.rotation,this.flash.rotation=-t,this.icon.active=!1,this.h1.active=!0,this.h2.active=!0,this.status_state=1,this.flash.active=!0);var e=this.icon.rotation;e>360&&(e-=360*Math.floor(e/360));e=(e=360-e)*Math.PI/180;var n=-this.split_speed*Math.cos(e),a=-this.split_speed*Math.sin(e),i=-n,o=-a;if(this.node.getComponent("throw_action").stop_action(),"boom"===this.node._name)this.icon=this.node;else{this.h1.getComponent("throw_action").start_action(n,a),this.h2.getComponent("throw_action").start_action(i,o),this.flash.scaleY=0;var c=cc.scaleTo(.1,1,1),s=cc.scaleTo(.1,1,0),r=cc.sequence([c,s]);this.flash.runAction(r)}},update:function(t){if(1===this.status_state){var e=this.h1.convertToWorldSpace(cc.v2(0,0)),n=this.h2.convertToWorldSpace(cc.v2(0,0));e.y<=-100&&n.y<=-100&&this.node.removeFromParent()}else this.node.y<=-700&&("boom"===this.node._name||cc.find("Canvas/game_top/life").getComponent("Life").lifeReduce(),this.node.removeFromParent())}}),cc._RF.pop()},{}],game_scene:[function(t,e,n){"use strict";cc._RF.push(e,"b0551QdAgpIjp/cp4rN6nYD","game_scene");var a=t("Common");cc.Class({extends:cc.Component,properties:function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({redPackage:!1,megranateProbability:0,fruit_prefabs:{type:cc.Prefab,default:[]},megranate_prefabs:{type:cc.Prefab,default:null},life:{type:cc.Node,default:null},body:{type:cc.Node,default:null},camera:{type:cc.Node,default:null},megranateLabel:{type:cc.Node,default:null},boomLightPrefab:{type:cc.Prefab,default:null},boomBackground:{type:cc.Node,default:null},bladeFlash:{type:cc.Node,default:null},boom:{type:cc.Node,default:null},boomAudio:{default:null,type:cc.AudioClip},bonusLabel:{default:null,type:cc.Prefab},bladeAudio:{default:null,type:cc.AudioClip},bgmAudio:{default:null,type:cc.AudioClip},cover:{default:null,type:cc.Node},reborn:{default:null,type:cc.Node}},"life",{default:null,type:cc.Node}),onLoad:function(){var t=this;this.cover.active=!1,this.megranateCount=0,this.megranateLabel.opacity=0,this.bladeFlashCollider=this.bladeFlash.getChildByName("bladeFlash").getComponent("cc.PolygonCollider"),this.clock=0,cc.director.getCollisionManager().enabled=!0,this.node_speed=30,this._prevPointX=0,this._prevPointY=0,this.start_index=0,this.in_touch=!1,this.is_started=!1,this.variableThrowTime=1,this.constantThrowTime=1,this.game_root=cc.find("Canvas/game_root"),this.start_menu=cc.find("Canvas/start_menu"),this.start_menu.active=!0,this.score_root=cc.find("Canvas/game_top"),this.score_root.active=!1,this.score_label=cc.find("Canvas/game_top/score/str").getComponent(cc.Label),this.vect=cc.v2(0,0),this.point_set=[],this.node.on(cc.Node.EventType.TOUCH_START,function(e){t.point_set=[],t.start_index=0,t.in_touch=!0,t.point_set.push(e.getLocation()),t.bladeFlash.x=e.getLocation().x-t.node.width/2,t.bladeFlash.y=e.getLocation().y-t.node.height/2},this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){t.bladeFlash.opacity=255,t.bladeFlashCollider.enabled=!0,t.point_set.push(e.getLocation()),t.vect=cc.v2(e.touch._point.x-e.touch._prevPoint.x,e.touch._point.y-e.touch._prevPoint.y)},this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t.bladeFlash.opacity=0,t.bladeFlashCollider.enabled=!1},this.node),this.node.on(cc.Node.EventType.TOUCH_END,function(e){t.bladeFlash.opacity=0,t.bladeFlashCollider.enabled=!1,t.point_set=[],t.in_touch=!1,t.start_index=0},this.node),this.bladeCountBegin=!1,this.bladeCount=0,this.bladeCountTime=0,this.bladeCountDuration=.2,this.gameSpeedDown=1,this.gameSpeedDownDuration=2,this.gameSpeedDownBegin=!1},start:function(){this.animation=this.body.getComponent(cc.Animation),this.game_root.removeAllChildren();var t=cc.instantiate(this.fruit_prefabs[0]);this.game_root.addChild(t),t.x=0,t.y=-180,this.gameOver=!1,this.boomLightNum=0},initPool:function(){this.fruitPoolArr=[];for(var t=0;t<this.fruit_prefabs.length;t++){for(var e=new cc.NodePool,n=0;n<3;++n){var a=cc.instantiate(this.fruit_prefabs[t]);e.put(a)}this.fruitPoolArr.push(e)}},gen_fruit:function(){if(!this.gameOver&&!this.gameSpeedDownBegin){var t=null;if(100*Math.random()>this.megranateProbability||0!=this.megranateCount){var e=this.fruit_prefabs.length*Math.random();(e=Math.floor(e))>=this.fruit_prefabs.length&&(e=this.fruit_prefabs.length-1),t=cc.instantiate(this.fruit_prefabs[e])}else this.megranateCount++,t=cc.instantiate(this.megranate_prefabs);this.game_root.addChild(t),t.x=0,t.y=-640;var n=.5*Math.PI+(Math.random()-.5)*Math.PI/6,a=1200*Math.cos(n),i=1200*Math.sin(n);t.getComponent("throw_action").start_action(a,i);var o=Math.random()*this.variableThrowTime+this.constantThrowTime;5*Math.random()<1&&(o=.01),this.scheduleOnce(this.gen_fruit.bind(this),o)}},spawnFruit:function(){this.fruitPool.size()>0?this.fruitPool.get():cc.instantiate(this.fruitPrefab)},runBoomLightLoop:function(t){var e=this;this.spawnBoomLight(t),this.scheduleOnce(function(){8!==e.boomLightNum?e.runBoomLightLoop(t):e.boomLightNum=0},.1)},cutBoom:function(t){var e=this;cc.audioEngine.stop(this.bgm),cc.audioEngine.play(this.boomAudio,!1,1),this.animation.play("bad"),this.cover.active=!0,this.gameOver=!0,this.runBoomLightLoop(t);var n=cc.v2(0,0);t.x<-103?n.x=-103:t.x>103&&(n.x=103),t.y<-160?n.y=-160:t.y>160&&(n.x=160),this.boomBackground.x=n.x,this.boomBackground.y=n.y,this.scheduleOnce(function(){e.reborn.getComponent("Reborn").showLabel()},1.2)},cutMegranate:function(){this.gameSpeedDown=.01,this.gameSpeedDownBegin=!0},spawnBoomLight:function(t){var e=cc.instantiate(this.boomLightPrefab);e.setPosition(t),e.rotation=Math.round(360*Math.random()),e.height=800*Math.random()+300,e.width=e.height/20,this.boom.addChild(e),this.boomLightNum+=1},on_start_game:function(){!0!==this.is_started&&(this.is_started=!0,this.start_menu.active=!1,this.score_root.active=!0,a.score=0,this.score_label.string=""+a.score,this.unscheduleAllCallbacks(),this.scheduleOnce(this.gen_fruit.bind(this),2*Math.random()+1))},bladeBonusControl:function(t){var e=this;if(this.bladeCountBegin)if(this.bladeCountTime<this.bladeCountDuration)this.bladeCountTime+=t;else{switch(this.bladeCount>1&&(this.animation.play("good"),this.scheduleOnce(function(){e.animation.play("body")},1)),this.bladeCount){case 2:a.score+=1,this._spawnBonusLabel("Double kill");break;case 3:a.score+=3,this._spawnBonusLabel("Trible kill");break;case 4:a.score+=5,this._spawnBonusLabel("Ultra kill");break;case 5:a.score+=10,this._spawnBonusLabel("Mega  kill");break;case 6:a.score+=20,this._spawnBonusLabel("Monster kill");break;case 7:a.score+=40,this._spawnBonusLabel("God like")}this.score_label.string=a.score,this.bladeCount=0,this.bladeCountTime=0,this.bladeCountBegin=!1}},_spawnBonusLabel:function(t){var e=cc.instantiate(this.bonusLabel);e.getComponent("cc.Label").string=t,e.setPosition(this.bladeFlash.lastFruit),this.node.addChild(e)},bladeControl:function(){if(0===this.vect.x&&0===this.vect.y)return this.bladeFlash.opacity=0,void(this.bladeFlashCollider.enabled=!1);this.bladeFlash.getChildByName("bladeFlash").rotation=cc.misc.radiansToDegrees(this.vect.signAngle(cc.v2(1,0))),this.bladeFlash.x+=this.vect.x,this.bladeFlash.y+=this.vect.y,this.vect.x=0,this.vect.y=0},difficultyControl:function(t){this.clock+=t,this.constantThrowTime>0?(this.constantThrowTime-=t/50,this.variableThrowTime+=t/50,this.constantThrowTime<0&&(this.constantThrowTime=0)):this.variableThrowTime>1&&(this.variableThrowTime-=t/50)},rebornGame:function(){var t=this;this.bgm=cc.audioEngine.play(this.bgmAudio,!0,1),this.life.getComponent("Life").init(),this.game_root.removeAllChildren();for(var e=this.boom.children,n=0;n<e.length;n++)"boomBackground"!=e[n].name&&e[n].destroy();this.animation=this.body.getComponent(cc.Animation),this.animation.play("body"),this.gameOver=!1,this.cover.active=!1,this.scheduleOnce(function(){t.gen_fruit()},1)},update:function(t){this.is_started&&this.difficultyControl(t),this.bladeControl(),this.bladeBonusControl(t)}}),cc._RF.pop()},{Common:"Common"}],net:[function(t,e,n){"use strict";cc._RF.push(e,"62e73sDA6dOGolthqoGzpA1","net");var a=function(){var t=window.location.search,e=new Object;if(-1!=t.indexOf("?"))for(var n=t.substr(1),a=n.split("&"),i=0;i<a.length;i++)e[a[i].split("=")[0]]=a[i].split("=")[1];return e}();var i={token:a.token,room_id:a.room_id,AREA:a.AREA,env:a.env,type:a.type,version:a.version,helpuid:a.helpuid,teamid:a.teamid,apptype:a.apptype,singletoken:a.singletoken,url:{wxoffline:"http://applet.dialect-tv.test",wxpre:"https://yfbapplet.dialect-tv.com",wxonline:"https://applet.dialect-tv.com",appoffline:"http://api.dialect-tv.test",apppre:"http://pre.api.dialect-tv.com",apponline:"http://api.dialect-tv.com"},getSignString:function(t){var e=[];try{var n=window.yanqu.getSignString(t),a=JSON.parse(n).sign.sign,i=JSON.parse(n).header.VERSION;e.push(a),e.push(i)}catch(t){}return e}};e.exports=i,cc._RF.pop()},{}],rotation_forever:[function(t,e,n){"use strict";cc._RF.push(e,"7c0f5o2DwJHWouW5ceeUJuo","rotation_forever"),cc.Class({extends:cc.Component,properties:{rot_time:4},onLoad:function(){this.gameObject=cc.find("Canvas").getComponent("game_scene"),this.node.rotation=360*Math.random()},update:function(t){this.node.rotation+=1*this.gameObject.gameSpeedDown}}),cc._RF.pop()},{}],throw_action:[function(t,e,n){"use strict";cc._RF.push(e,"df515roSGVNH7YeumM1pVoZ","throw_action"),cc.Class({extends:cc.Component,properties:{g:-1e3,play_onload:!1},onLoad:function(){this.canvas=cc.find("Canvas"),this.gameObject=this.canvas.getComponent("game_scene"),this.action_started=!1},start_action:function(t,e){this.action_started=!0,this.vx=t,this.vy=e},stop_action:function(){this.action_started=!1},update:function(t){if(!1!==this.action_started){var e=this.vx*t,n=this.vy*t+.5*this.g*t*t;this.vy+=this.g*t,e*=this.gameObject.gameSpeedDown,n*=this.gameObject.gameSpeedDown,this.node.x+=e,this.node.y+=n}}}),cc._RF.pop()},{}],transcend:[function(t,e,n){"use strict";cc._RF.push(e,"1733epIf0tDcJUub+NHiTbT","transcend"),cc.Class({extends:cc.Component,properties:{num:cc.Label,img:cc.Sprite},start:function(){this.texture=null},init:function(t,e){var n=this;cc.log(t,e);var a="http://image.dialect-tv.com/"+t;cc.log("url: ",a),cc.loader.load(a,function(t,e){if(t)cc.log(t);else{n.texture=e;var a=new cc.SpriteFrame(e);n.img.spriteFrame=a}}),this.num.string="\u7b2c"+e+"\u540d",this.scheduleOnce(function(){this.onStop()},2)},onStop:function(){cc.loader.release(this.texture),this.texture=null,this.node.destroy()}}),cc._RF.pop()},{}]},{},["Common","chaoyue","transcend","endbg","net","Reborn","Blade","BonusLabel","Boom","Camera_script","Juice","Life","Megranate","blow_up","fruit","game_scene","rotation_forever","throw_action","Block","Rank","Start"]);